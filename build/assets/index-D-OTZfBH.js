(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function dv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var kh={exports:{}},Ha={},Ah={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function Qw(){if(Ag)return Re;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,D={};function j(F,Y,le){this.props=F,this.context=Y,this.refs=D,this.updater=le||C}j.prototype.isReactComponent={},j.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},j.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function q(){}q.prototype=j.prototype;function Q(F,Y,le){this.props=F,this.context=Y,this.refs=D,this.updater=le||C}var H=Q.prototype=new q;H.constructor=Q,P(H,j.prototype),H.isPureReactComponent=!0;var X=Array.isArray,ye=Object.prototype.hasOwnProperty,pe={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function A(F,Y,le){var Ee,Ce={},ke=null,Oe=null;if(Y!=null)for(Ee in Y.ref!==void 0&&(Oe=Y.ref),Y.key!==void 0&&(ke=""+Y.key),Y)ye.call(Y,Ee)&&!b.hasOwnProperty(Ee)&&(Ce[Ee]=Y[Ee]);var Ne=arguments.length-2;if(Ne===1)Ce.children=le;else if(1<Ne){for(var Ge=Array(Ne),ft=0;ft<Ne;ft++)Ge[ft]=arguments[ft+2];Ce.children=Ge}if(F&&F.defaultProps)for(Ee in Ne=F.defaultProps,Ne)Ce[Ee]===void 0&&(Ce[Ee]=Ne[Ee]);return{$$typeof:r,type:F,key:ke,ref:Oe,props:Ce,_owner:pe.current}}function x(F,Y){return{$$typeof:r,type:F.type,key:Y,ref:F.ref,props:F.props,_owner:F._owner}}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function M(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return Y[le]})}var U=/\/+/g;function N(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?M(""+F.key):Y.toString(36)}function He(F,Y,le,Ee,Ce){var ke=typeof F;(ke==="undefined"||ke==="boolean")&&(F=null);var Oe=!1;if(F===null)Oe=!0;else switch(ke){case"string":case"number":Oe=!0;break;case"object":switch(F.$$typeof){case r:case e:Oe=!0}}if(Oe)return Oe=F,Ce=Ce(Oe),F=Ee===""?"."+N(Oe,0):Ee,X(Ce)?(le="",F!=null&&(le=F.replace(U,"$&/")+"/"),He(Ce,Y,le,"",function(ft){return ft})):Ce!=null&&(O(Ce)&&(Ce=x(Ce,le+(!Ce.key||Oe&&Oe.key===Ce.key?"":(""+Ce.key).replace(U,"$&/")+"/")+F)),Y.push(Ce)),1;if(Oe=0,Ee=Ee===""?".":Ee+":",X(F))for(var Ne=0;Ne<F.length;Ne++){ke=F[Ne];var Ge=Ee+N(ke,Ne);Oe+=He(ke,Y,le,Ge,Ce)}else if(Ge=T(F),typeof Ge=="function")for(F=Ge.call(F),Ne=0;!(ke=F.next()).done;)ke=ke.value,Ge=Ee+N(ke,Ne++),Oe+=He(ke,Y,le,Ge,Ce);else if(ke==="object")throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Oe}function ct(F,Y,le){if(F==null)return F;var Ee=[],Ce=0;return He(F,Ee,"","",function(ke){return Y.call(le,ke,Ce++)}),Ee}function tt(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var Me={current:null},K={transition:null},he={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:K,ReactCurrentOwner:pe};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:ct,forEach:function(F,Y,le){ct(F,function(){Y.apply(this,arguments)},le)},count:function(F){var Y=0;return ct(F,function(){Y++}),Y},toArray:function(F){return ct(F,function(Y){return Y})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Re.Component=j,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=Q,Re.StrictMode=s,Re.Suspense=p,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Re.act=oe,Re.cloneElement=function(F,Y,le){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ee=P({},F.props),Ce=F.key,ke=F.ref,Oe=F._owner;if(Y!=null){if(Y.ref!==void 0&&(ke=Y.ref,Oe=pe.current),Y.key!==void 0&&(Ce=""+Y.key),F.type&&F.type.defaultProps)var Ne=F.type.defaultProps;for(Ge in Y)ye.call(Y,Ge)&&!b.hasOwnProperty(Ge)&&(Ee[Ge]=Y[Ge]===void 0&&Ne!==void 0?Ne[Ge]:Y[Ge])}var Ge=arguments.length-2;if(Ge===1)Ee.children=le;else if(1<Ge){Ne=Array(Ge);for(var ft=0;ft<Ge;ft++)Ne[ft]=arguments[ft+2];Ee.children=Ne}return{$$typeof:r,type:F.type,key:Ce,ref:ke,props:Ee,_owner:Oe}},Re.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Re.createElement=A,Re.createFactory=function(F){var Y=A.bind(null,F);return Y.type=F,Y},Re.createRef=function(){return{current:null}},Re.forwardRef=function(F){return{$$typeof:h,render:F}},Re.isValidElement=O,Re.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:tt}},Re.memo=function(F,Y){return{$$typeof:g,type:F,compare:Y===void 0?null:Y}},Re.startTransition=function(F){var Y=K.transition;K.transition={};try{F()}finally{K.transition=Y}},Re.unstable_act=oe,Re.useCallback=function(F,Y){return Me.current.useCallback(F,Y)},Re.useContext=function(F){return Me.current.useContext(F)},Re.useDebugValue=function(){},Re.useDeferredValue=function(F){return Me.current.useDeferredValue(F)},Re.useEffect=function(F,Y){return Me.current.useEffect(F,Y)},Re.useId=function(){return Me.current.useId()},Re.useImperativeHandle=function(F,Y,le){return Me.current.useImperativeHandle(F,Y,le)},Re.useInsertionEffect=function(F,Y){return Me.current.useInsertionEffect(F,Y)},Re.useLayoutEffect=function(F,Y){return Me.current.useLayoutEffect(F,Y)},Re.useMemo=function(F,Y){return Me.current.useMemo(F,Y)},Re.useReducer=function(F,Y,le){return Me.current.useReducer(F,Y,le)},Re.useRef=function(F){return Me.current.useRef(F)},Re.useState=function(F){return Me.current.useState(F)},Re.useSyncExternalStore=function(F,Y,le){return Me.current.useSyncExternalStore(F,Y,le)},Re.useTransition=function(){return Me.current.useTransition()},Re.version="18.3.1",Re}var Rg;function wf(){return Rg||(Rg=1,Ah.exports=Qw()),Ah.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function Yw(){if(Ng)return Ha;Ng=1;var r=wf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,p,g){var _,S={},T=null,C=null;g!==void 0&&(T=""+g),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(C=p.ref);for(_ in p)s.call(p,_)&&!a.hasOwnProperty(_)&&(S[_]=p[_]);if(h&&h.defaultProps)for(_ in p=h.defaultProps,p)S[_]===void 0&&(S[_]=p[_]);return{$$typeof:e,type:h,key:T,ref:C,props:S,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=u,Ha.jsxs=u,Ha}var Dg;function Xw(){return Dg||(Dg=1,kh.exports=Yw()),kh.exports}var f=Xw(),k=wf();const Jw=dv(k);var Hu={},Rh={exports:{}},cn={},Nh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function Zw(){return jg||(jg=1,function(r){function e(K,he){var oe=K.length;K.push(he);e:for(;0<oe;){var F=oe-1>>>1,Y=K[F];if(0<o(Y,he))K[F]=he,K[oe]=Y,oe=F;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var he=K[0],oe=K.pop();if(oe!==he){K[0]=oe;e:for(var F=0,Y=K.length,le=Y>>>1;F<le;){var Ee=2*(F+1)-1,Ce=K[Ee],ke=Ee+1,Oe=K[ke];if(0>o(Ce,oe))ke<Y&&0>o(Oe,Ce)?(K[F]=Oe,K[ke]=oe,F=ke):(K[F]=Ce,K[Ee]=oe,F=Ee);else if(ke<Y&&0>o(Oe,oe))K[F]=Oe,K[ke]=oe,F=ke;else break e}}return he}function o(K,he){var oe=K.sortIndex-he.sortIndex;return oe!==0?oe:K.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var p=[],g=[],_=1,S=null,T=3,C=!1,P=!1,D=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(K){for(var he=t(g);he!==null;){if(he.callback===null)s(g);else if(he.startTime<=K)s(g),he.sortIndex=he.expirationTime,e(p,he);else break;he=t(g)}}function X(K){if(D=!1,H(K),!P)if(t(p)!==null)P=!0,tt(ye);else{var he=t(g);he!==null&&Me(X,he.startTime-K)}}function ye(K,he){P=!1,D&&(D=!1,q(A),A=-1),C=!0;var oe=T;try{for(H(he),S=t(p);S!==null&&(!(S.expirationTime>he)||K&&!M());){var F=S.callback;if(typeof F=="function"){S.callback=null,T=S.priorityLevel;var Y=F(S.expirationTime<=he);he=r.unstable_now(),typeof Y=="function"?S.callback=Y:S===t(p)&&s(p),H(he)}else s(p);S=t(p)}if(S!==null)var le=!0;else{var Ee=t(g);Ee!==null&&Me(X,Ee.startTime-he),le=!1}return le}finally{S=null,T=oe,C=!1}}var pe=!1,b=null,A=-1,x=5,O=-1;function M(){return!(r.unstable_now()-O<x)}function U(){if(b!==null){var K=r.unstable_now();O=K;var he=!0;try{he=b(!0,K)}finally{he?N():(pe=!1,b=null)}}else pe=!1}var N;if(typeof Q=="function")N=function(){Q(U)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,ct=He.port2;He.port1.onmessage=U,N=function(){ct.postMessage(null)}}else N=function(){j(U,0)};function tt(K){b=K,pe||(pe=!0,N())}function Me(K,he){A=j(function(){K(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_continueExecution=function(){P||C||(P=!0,tt(ye))},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(K){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var oe=T;T=he;try{return K()}finally{T=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(K,he){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var oe=T;T=K;try{return he()}finally{T=oe}},r.unstable_scheduleCallback=function(K,he,oe){var F=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?F+oe:F):oe=F,K){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=oe+Y,K={id:_++,callback:he,priorityLevel:K,startTime:oe,expirationTime:Y,sortIndex:-1},oe>F?(K.sortIndex=oe,e(g,K),t(p)===null&&K===t(g)&&(D?(q(A),A=-1):D=!0,Me(X,oe-F))):(K.sortIndex=Y,e(p,K),P||C||(P=!0,tt(ye))),K},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(K){var he=T;return function(){var oe=T;T=he;try{return K.apply(this,arguments)}finally{T=oe}}}}(Dh)),Dh}var bg;function eE(){return bg||(bg=1,Nh.exports=Zw()),Nh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function tE(){if(Og)return cn;Og=1;var r=wf(),e=eE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},S={};function T(n){return p.call(S,n)?!0:p.call(_,n)?!1:g.test(n)?S[n]=!0:(_[n]=!0,!1)}function C(n,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,i,l,d){if(i===null||typeof i>"u"||C(n,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function D(n,i,l,d,m,v,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=v,this.removeEmptyString=E}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new D(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new D(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new D(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new D(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new D(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new D(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new D(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new D(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new D(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function Q(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(q,Q);j[i]=new D(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(q,Q);j[i]=new D(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(q,Q);j[i]=new D(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new D(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new D(n,1,!1,n.toLowerCase(),null,!0,!0)});function H(n,i,l,d){var m=j.hasOwnProperty(i)?j[i]:null;(m!==null?m.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,l,m,d)&&(l=null),d||m===null?T(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,d=m.attributeNamespace,l===null?n.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,d?n.setAttributeNS(d,i,l):n.setAttribute(i,l))))}var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ye=Symbol.for("react.element"),pe=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),K=Symbol.iterator;function he(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,F;function Y(n){if(F===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+n}var le=!1;function Ee(n,i){if(!n||le)return"";le=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var d=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){d=W}n.call(i.prototype)}else{try{throw Error()}catch(W){d=W}n()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),v=d.stack.split(`
`),E=m.length-1,R=v.length-1;1<=E&&0<=R&&m[E]!==v[R];)R--;for(;1<=E&&0<=R;E--,R--)if(m[E]!==v[R]){if(E!==1||R!==1)do if(E--,R--,0>R||m[E]!==v[R]){var L=`
`+m[E].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=E&&0<=R);break}}}finally{le=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?Y(n):""}function Ce(n){switch(n.tag){case 5:return Y(n.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return n=Ee(n.type,!1),n;case 11:return n=Ee(n.type.render,!1),n;case 1:return n=Ee(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case pe:return"Portal";case x:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case M:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case U:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ct:return i=n.displayName||null,i!==null?i:ke(n.type)||"Memo";case tt:i=n._payload,n=n._init;try{return ke(n(i))}catch{}}return null}function Oe(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ne(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ft(n){var i=Ge(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,v.call(this,E)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Sn(n){n._valueTracker||(n._valueTracker=ft(n))}function lr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return n&&(d=Ge(n)?n.checked?"true":"false":n.value),n=d,n!==l?(i.setValue(n),!0):!1}function Vn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cr(n,i){var l=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function rs(n,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=Ne(i.value!=null?i.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Js(n,i){i=i.checked,i!=null&&H(n,"checked",i,!1)}function ss(n,i){Js(n,i);var l=Ne(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?is(n,i.type,l):i.hasOwnProperty("defaultValue")&&is(n,i.type,Ne(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function xr(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function is(n,i,l){(i!=="number"||Vn(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Mn=Array.isArray;function Fn(n,i,l,d){if(n=n.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=i.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&d&&(n[l].defaultSelected=!0)}else{for(l=""+Ne(l),i=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Zs(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function os(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Mn(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:Ne(l)}}function as(n,i){var l=Ne(i.value),d=Ne(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function ei(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ee(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fe,nt=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,m){MSApp.execUnsafeLocalFunction(function(){return n(i,l,d,m)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Fe=Fe||document.createElement("div"),Fe.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Fe.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Rt(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tn=["Webkit","ms","Moz","O"];Object.keys(fn).forEach(function(n){Tn.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),fn[i]=fn[n]})});function ti(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||fn.hasOwnProperty(n)&&fn[n]?(""+i).trim():i+"px"}function ur(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,m=ti(l,i[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,m):n[l]=m}}var sa=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ia(n,i){if(i){if(sa[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function oa(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=null;function Ui(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bi=null,In=null,cr=null;function zi(n){if(n=Ra(n)){if(typeof Bi!="function")throw Error(t(280));var i=n.stateNode;i&&(i=ou(i),Bi(n.stateNode,n.type,i))}}function dr(n){In?cr?cr.push(n):cr=[n]:In=n}function aa(){if(In){var n=In,i=cr;if(cr=In=null,zi(n),i)for(n=0;n<i.length;n++)zi(i[n])}}function ri(n,i){return n(i)}function la(){}var kr=!1;function ua(n,i,l){if(kr)return n(i,l);kr=!0;try{return ri(n,i,l)}finally{kr=!1,(In!==null||cr!==null)&&(la(),aa())}}function mt(n,i){var l=n.stateNode;if(l===null)return null;var d=ou(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var $i=!1;if(h)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{$i=!1}function si(n,i,l,d,m,v,E,R,L){var W=Array.prototype.slice.call(arguments,3);try{i.apply(l,W)}catch(ne){this.onError(ne)}}var ii=!1,qi=null,Bn=!1,ca=null,nd={onError:function(n){ii=!0,qi=n}};function Hi(n,i,l,d,m,v,E,R,L){ii=!1,qi=null,si.apply(nd,arguments)}function Nl(n,i,l,d,m,v,E,R,L){if(Hi.apply(this,arguments),ii){if(ii){var W=qi;ii=!1,qi=null}else throw Error(t(198));Bn||(Bn=!0,ca=W)}}function zn(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function oi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function $n(n){if(zn(n)!==n)throw Error(t(188))}function Dl(n){var i=n.alternate;if(!i){if(i=zn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,d=i;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return $n(m),n;if(v===d)return $n(m),i;v=v.sibling}throw Error(t(188))}if(l.return!==d.return)l=m,d=v;else{for(var E=!1,R=m.child;R;){if(R===l){E=!0,l=m,d=v;break}if(R===d){E=!0,d=m,l=v;break}R=R.sibling}if(!E){for(R=v.child;R;){if(R===l){E=!0,l=v,d=m;break}if(R===d){E=!0,d=v,l=m;break}R=R.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function da(n){return n=Dl(n),n!==null?Wi(n):null}function Wi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Wi(n);if(i!==null)return i;n=n.sibling}return null}var Gi=e.unstable_scheduleCallback,ha=e.unstable_cancelCallback,jl=e.unstable_shouldYield,rd=e.unstable_requestPaint,Ye=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,ai=e.unstable_ImmediatePriority,ls=e.unstable_UserBlockingPriority,Pn=e.unstable_NormalPriority,fa=e.unstable_LowPriority,Ol=e.unstable_IdlePriority,li=null,pn=null;function Ll(n){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(li,n,void 0,(n.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Ml,pa=Math.log,Vl=Math.LN2;function Ml(n){return n>>>=0,n===0?32:31-(pa(n)/Vl|0)|0}var Ki=64,Qi=4194304;function us(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ui(n,i){var l=n.pendingLanes;if(l===0)return 0;var d=0,m=n.suspendedLanes,v=n.pingedLanes,E=l&268435455;if(E!==0){var R=E&~m;R!==0?d=us(R):(v&=E,v!==0&&(d=us(v)))}else E=l&~m,E!==0?d=us(E):v!==0&&(d=us(v));if(d===0)return 0;if(i!==0&&i!==d&&!(i&m)&&(m=d&-d,v=i&-i,m>=v||m===16&&(v&4194240)!==0))return i;if(d&4&&(d|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)l=31-Xt(i),m=1<<l,d|=n[l],i&=~m;return d}function sd(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ar(n,i){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,v=n.pendingLanes;0<v;){var E=31-Xt(v),R=1<<E,L=m[E];L===-1?(!(R&l)||R&d)&&(m[E]=sd(R,i)):L<=i&&(n.expiredLanes|=R),v&=~R}}function mn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ci(){var n=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),n}function cs(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function ds(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Xt(i),n[i]=l}function Qe(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-Xt(l),v=1<<m;i[m]=0,d[m]=-1,n[m]=-1,l&=~v}}function hs(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var d=31-Xt(l),m=1<<d;m&i|n[d]&i&&(n[d]|=i),l&=~m}}var Le=0;function fs(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Fl,Yi,Ul,Bl,zl,ma=!1,hr=[],Lt=null,qn=null,Hn=null,ps=new Map,Cn=new Map,fr=[],id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $l(n,i){switch(n){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":ps.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(i.pointerId)}}function nn(n,i,l,d,m,v){return n===null||n.nativeEvent!==v?(n={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[m]},i!==null&&(i=Ra(i),i!==null&&Yi(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function od(n,i,l,d,m){switch(i){case"focusin":return Lt=nn(Lt,n,i,l,d,m),!0;case"dragenter":return qn=nn(qn,n,i,l,d,m),!0;case"mouseover":return Hn=nn(Hn,n,i,l,d,m),!0;case"pointerover":var v=m.pointerId;return ps.set(v,nn(ps.get(v)||null,n,i,l,d,m)),!0;case"gotpointercapture":return v=m.pointerId,Cn.set(v,nn(Cn.get(v)||null,n,i,l,d,m)),!0}return!1}function ql(n){var i=mi(n.target);if(i!==null){var l=zn(i);if(l!==null){if(i=l.tag,i===13){if(i=oi(l),i!==null){n.blockedOn=i,zl(n.priority,function(){Ul(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=Xi(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);ni=d,l.target.dispatchEvent(d),ni=null}else return i=Ra(l),i!==null&&Yi(i),n.blockedOn=l,!1;i.shift()}return!0}function di(n,i,l){Rr(n)&&l.delete(i)}function Hl(){ma=!1,Lt!==null&&Rr(Lt)&&(Lt=null),qn!==null&&Rr(qn)&&(qn=null),Hn!==null&&Rr(Hn)&&(Hn=null),ps.forEach(di),Cn.forEach(di)}function Wn(n,i){n.blockedOn===i&&(n.blockedOn=null,ma||(ma=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hl)))}function Gn(n){function i(m){return Wn(m,n)}if(0<hr.length){Wn(hr[0],n);for(var l=1;l<hr.length;l++){var d=hr[l];d.blockedOn===n&&(d.blockedOn=null)}}for(Lt!==null&&Wn(Lt,n),qn!==null&&Wn(qn,n),Hn!==null&&Wn(Hn,n),ps.forEach(i),Cn.forEach(i),l=0;l<fr.length;l++)d=fr[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<fr.length&&(l=fr[0],l.blockedOn===null);)ql(l),l.blockedOn===null&&fr.shift()}var Nr=X.ReactCurrentBatchConfig,ms=!0;function rt(n,i,l,d){var m=Le,v=Nr.transition;Nr.transition=null;try{Le=1,ga(n,i,l,d)}finally{Le=m,Nr.transition=v}}function ad(n,i,l,d){var m=Le,v=Nr.transition;Nr.transition=null;try{Le=4,ga(n,i,l,d)}finally{Le=m,Nr.transition=v}}function ga(n,i,l,d){if(ms){var m=Xi(n,i,l,d);if(m===null)vd(n,i,d,hi,l),$l(n,d);else if(od(m,n,i,l,d))d.stopPropagation();else if($l(n,d),i&4&&-1<id.indexOf(n)){for(;m!==null;){var v=Ra(m);if(v!==null&&Fl(v),v=Xi(n,i,l,d),v===null&&vd(n,i,d,hi,l),v===m)break;m=v}m!==null&&d.stopPropagation()}else vd(n,i,d,null,l)}}var hi=null;function Xi(n,i,l,d){if(hi=null,n=Ui(d),n=mi(n),n!==null)if(i=zn(n),i===null)n=null;else if(l=i.tag,l===13){if(n=oi(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return hi=n,null}function ya(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case ai:return 1;case ls:return 4;case Pn:case fa:return 16;case Ol:return 536870912;default:return 16}default:return 16}}var gn=null,Ji=null,rn=null;function va(){if(rn)return rn;var n,i=Ji,l=i.length,d,m="value"in gn?gn.value:gn.textContent,v=m.length;for(n=0;n<l&&i[n]===m[n];n++);var E=l-n;for(d=1;d<=E&&i[l-d]===m[v-d];d++);return rn=m.slice(n,1<d?1-d:void 0)}function Zi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function _a(){return!1}function Vt(n){function i(l,d,m,v,E){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(l=n[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?pr:_a,this.isPropagationStopped=_a,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),i}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=Vt(Kn),mr=oe({},Kn,{view:0,detail:0}),ld=Vt(mr),to,Dr,gs,fi=oe({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gs&&(gs&&n.type==="mousemove"?(to=n.screenX-gs.screenX,Dr=n.screenY-gs.screenY):Dr=to=0,gs=n),to)},movementY:function(n){return"movementY"in n?n.movementY:Dr}}),no=Vt(fi),wa=oe({},fi,{dataTransfer:0}),Wl=Vt(wa),ro=oe({},mr,{relatedTarget:0}),so=Vt(ro),Gl=oe({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),jr=Vt(Gl),Kl=oe({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ql=Vt(Kl),Yl=oe({},Kn,{data:0}),Ea=Vt(Yl),io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Xl[n])?!!i[n]:!1}function gr(){return Jl}var c=oe({},mr,{key:function(n){if(n.key){var i=io[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(n){return n.type==="keypress"?Zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),y=Vt(c),w=oe({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Vt(w),B=oe({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),G=Vt(B),ie=oe({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Vt(ie),Tt=oe({},fi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Vt(Tt),Nt=[9,13,27,32],vt=h&&"CompositionEvent"in window,xn=null;h&&"documentMode"in document&&(xn=document.documentMode);var yn=h&&"TextEvent"in window&&!xn,pi=h&&(!vt||xn&&8<xn&&11>=xn),oo=" ",Tp=!1;function Ip(n,i){switch(n){case"keyup":return Nt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ao=!1;function G0(n,i){switch(n){case"compositionend":return Pp(i);case"keypress":return i.which!==32?null:(Tp=!0,oo);case"textInput":return n=i.data,n===oo&&Tp?null:n;default:return null}}function K0(n,i){if(ao)return n==="compositionend"||!vt&&Ip(n,i)?(n=va(),rn=Ji=gn=null,ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return pi&&i.locale!=="ko"?null:i.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Q0[n.type]:i==="textarea"}function xp(n,i,l,d){dr(d),i=ru(i,"onChange"),0<i.length&&(l=new eo("onChange","change",null,l,d),n.push({event:l,listeners:i}))}var Sa=null,Ta=null;function Y0(n){Hp(n,0)}function Zl(n){var i=fo(n);if(lr(i))return n}function X0(n,i){if(n==="change")return i}var kp=!1;if(h){var ud;if(h){var cd="oninput"in document;if(!cd){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),cd=typeof Ap.oninput=="function"}ud=cd}else ud=!1;kp=ud&&(!document.documentMode||9<document.documentMode)}function Rp(){Sa&&(Sa.detachEvent("onpropertychange",Np),Ta=Sa=null)}function Np(n){if(n.propertyName==="value"&&Zl(Ta)){var i=[];xp(i,Ta,n,Ui(n)),ua(Y0,i)}}function J0(n,i,l){n==="focusin"?(Rp(),Sa=i,Ta=l,Sa.attachEvent("onpropertychange",Np)):n==="focusout"&&Rp()}function Z0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zl(Ta)}function ew(n,i){if(n==="click")return Zl(i)}function tw(n,i){if(n==="input"||n==="change")return Zl(i)}function nw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Qn=typeof Object.is=="function"?Object.is:nw;function Ia(n,i){if(Qn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!p.call(i,m)||!Qn(n[m],i[m]))return!1}return!0}function Dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,i){var l=Dp(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=i&&d>=i)return{node:l,offset:i-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Dp(l)}}function bp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?bp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Op(){for(var n=window,i=Vn();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Vn(n.document)}return i}function dd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function rw(n){var i=Op(),l=n.focusedElem,d=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&bp(l.ownerDocument.documentElement,l)){if(d!==null&&dd(l)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,v=Math.min(d.start,m);d=d.end===void 0?v:Math.min(d.end,m),!n.extend&&v>d&&(m=d,d=v,v=m),m=jp(l,v);var E=jp(l,d);m&&E&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),n.removeAllRanges(),v>d?(n.addRange(i),n.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var sw=h&&"documentMode"in document&&11>=document.documentMode,lo=null,hd=null,Pa=null,fd=!1;function Lp(n,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fd||lo==null||lo!==Vn(d)||(d=lo,"selectionStart"in d&&dd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Pa&&Ia(Pa,d)||(Pa=d,d=ru(hd,"onSelect"),0<d.length&&(i=new eo("onSelect","select",null,i,l),n.push({event:i,listeners:d}),i.target=lo)))}function eu(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var uo={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},pd={},Vp={};h&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function tu(n){if(pd[n])return pd[n];if(!uo[n])return n;var i=uo[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Vp)return pd[n]=i[l];return n}var Mp=tu("animationend"),Fp=tu("animationiteration"),Up=tu("animationstart"),Bp=tu("transitionend"),zp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(n,i){zp.set(n,i),a(i,[n])}for(var md=0;md<$p.length;md++){var gd=$p[md],iw=gd.toLowerCase(),ow=gd[0].toUpperCase()+gd.slice(1);ys(iw,"on"+ow)}ys(Mp,"onAnimationEnd"),ys(Fp,"onAnimationIteration"),ys(Up,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(Bp,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function qp(n,i,l){var d=n.type||"unknown-event";n.currentTarget=l,Nl(d,i,void 0,n),n.currentTarget=null}function Hp(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],m=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var E=d.length-1;0<=E;E--){var R=d[E],L=R.instance,W=R.currentTarget;if(R=R.listener,L!==v&&m.isPropagationStopped())break e;qp(m,R,W),v=L}else for(E=0;E<d.length;E++){if(R=d[E],L=R.instance,W=R.currentTarget,R=R.listener,L!==v&&m.isPropagationStopped())break e;qp(m,R,W),v=L}}}if(Bn)throw n=ca,Bn=!1,ca=null,n}function Je(n,i){var l=i[Id];l===void 0&&(l=i[Id]=new Set);var d=n+"__bubble";l.has(d)||(Wp(i,n,2,!1),l.add(d))}function yd(n,i,l){var d=0;i&&(d|=4),Wp(l,n,d,i)}var nu="_reactListening"+Math.random().toString(36).slice(2);function xa(n){if(!n[nu]){n[nu]=!0,s.forEach(function(l){l!=="selectionchange"&&(aw.has(l)||yd(l,!1,n),yd(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[nu]||(i[nu]=!0,yd("selectionchange",!1,i))}}function Wp(n,i,l,d){switch(ya(i)){case 1:var m=rt;break;case 4:m=ad;break;default:m=ga}l=m.bind(null,i,l,n),m=void 0,!$i||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(i,l,{capture:!0,passive:m}):n.addEventListener(i,l,!0):m!==void 0?n.addEventListener(i,l,{passive:m}):n.addEventListener(i,l,!1)}function vd(n,i,l,d,m){var v=d;if(!(i&1)&&!(i&2)&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var R=d.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(E===4)for(E=d.return;E!==null;){var L=E.tag;if((L===3||L===4)&&(L=E.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;E=E.return}for(;R!==null;){if(E=mi(R),E===null)return;if(L=E.tag,L===5||L===6){d=v=E;continue e}R=R.parentNode}}d=d.return}ua(function(){var W=v,ne=Ui(l),re=[];e:{var te=zp.get(n);if(te!==void 0){var ae=eo,fe=n;switch(n){case"keypress":if(Zi(l)===0)break e;case"keydown":case"keyup":ae=y;break;case"focusin":fe="focus",ae=so;break;case"focusout":fe="blur",ae=so;break;case"beforeblur":case"afterblur":ae=so;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=G;break;case Mp:case Fp:case Up:ae=jr;break;case Bp:ae=Ke;break;case"scroll":ae=ld;break;case"wheel":ae=Ue;break;case"copy":case"cut":case"paste":ae=Ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=I}var me=(i&4)!==0,gt=!me&&n==="scroll",z=me?te!==null?te+"Capture":null:te;me=[];for(var V=W,$;V!==null;){$=V;var se=$.stateNode;if($.tag===5&&se!==null&&($=se,z!==null&&(se=mt(V,z),se!=null&&me.push(ka(V,se,$)))),gt)break;V=V.return}0<me.length&&(te=new ae(te,fe,null,l,ne),re.push({event:te,listeners:me}))}}if(!(i&7)){e:{if(te=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",te&&l!==ni&&(fe=l.relatedTarget||l.fromElement)&&(mi(fe)||fe[br]))break e;if((ae||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(fe=l.relatedTarget||l.toElement,ae=W,fe=fe?mi(fe):null,fe!==null&&(gt=zn(fe),fe!==gt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ae=null,fe=W),ae!==fe)){if(me=no,se="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(me=I,se="onPointerLeave",z="onPointerEnter",V="pointer"),gt=ae==null?te:fo(ae),$=fe==null?te:fo(fe),te=new me(se,V+"leave",ae,l,ne),te.target=gt,te.relatedTarget=$,se=null,mi(ne)===W&&(me=new me(z,V+"enter",fe,l,ne),me.target=$,me.relatedTarget=gt,se=me),gt=se,ae&&fe)t:{for(me=ae,z=fe,V=0,$=me;$;$=co($))V++;for($=0,se=z;se;se=co(se))$++;for(;0<V-$;)me=co(me),V--;for(;0<$-V;)z=co(z),$--;for(;V--;){if(me===z||z!==null&&me===z.alternate)break t;me=co(me),z=co(z)}me=null}else me=null;ae!==null&&Gp(re,te,ae,me,!1),fe!==null&&gt!==null&&Gp(re,gt,fe,me,!0)}}e:{if(te=W?fo(W):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var ge=X0;else if(Cp(te))if(kp)ge=tw;else{ge=Z0;var _e=J0}else(ae=te.nodeName)&&ae.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ge=ew);if(ge&&(ge=ge(n,W))){xp(re,ge,l,ne);break e}_e&&_e(n,te,W),n==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&is(te,"number",te.value)}switch(_e=W?fo(W):window,n){case"focusin":(Cp(_e)||_e.contentEditable==="true")&&(lo=_e,hd=W,Pa=null);break;case"focusout":Pa=hd=lo=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,Lp(re,l,ne);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":Lp(re,l,ne)}var we;if(vt)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ao?Ip(n,l)&&(Te="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(pi&&l.locale!=="ko"&&(ao||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ao&&(we=va()):(gn=ne,Ji="value"in gn?gn.value:gn.textContent,ao=!0)),_e=ru(W,Te),0<_e.length&&(Te=new Ea(Te,n,null,l,ne),re.push({event:Te,listeners:_e}),we?Te.data=we:(we=Pp(l),we!==null&&(Te.data=we)))),(we=yn?G0(n,l):K0(n,l))&&(W=ru(W,"onBeforeInput"),0<W.length&&(ne=new Ea("onBeforeInput","beforeinput",null,l,ne),re.push({event:ne,listeners:W}),ne.data=we))}Hp(re,i)})}function ka(n,i,l){return{instance:n,listener:i,currentTarget:l}}function ru(n,i){for(var l=i+"Capture",d=[];n!==null;){var m=n,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=mt(n,l),v!=null&&d.unshift(ka(n,v,m)),v=mt(n,i),v!=null&&d.push(ka(n,v,m))),n=n.return}return d}function co(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,i,l,d,m){for(var v=i._reactName,E=[];l!==null&&l!==d;){var R=l,L=R.alternate,W=R.stateNode;if(L!==null&&L===d)break;R.tag===5&&W!==null&&(R=W,m?(L=mt(l,v),L!=null&&E.unshift(ka(l,L,R))):m||(L=mt(l,v),L!=null&&E.push(ka(l,L,R)))),l=l.return}E.length!==0&&n.push({event:i,listeners:E})}var lw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function Kp(n){return(typeof n=="string"?n:""+n).replace(lw,`
`).replace(uw,"")}function su(n,i,l){if(i=Kp(i),Kp(n)!==i&&l)throw Error(t(425))}function iu(){}var _d=null,wd=null;function Ed(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,dw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(n){return Qp.resolve(null).then(n).catch(hw)}:Sd;function hw(n){setTimeout(function(){throw n})}function Td(n,i){var l=i,d=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(d===0){n.removeChild(m),Gn(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=m}while(l);Gn(i)}function vs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var ho=Math.random().toString(36).slice(2),yr="__reactFiber$"+ho,Aa="__reactProps$"+ho,br="__reactContainer$"+ho,Id="__reactEvents$"+ho,fw="__reactListeners$"+ho,pw="__reactHandles$"+ho;function mi(n){var i=n[yr];if(i)return i;for(var l=n.parentNode;l;){if(i=l[br]||l[yr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=Yp(n);n!==null;){if(l=n[yr])return l;n=Yp(n)}return i}n=l,l=n.parentNode}return null}function Ra(n){return n=n[yr]||n[br],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function fo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ou(n){return n[Aa]||null}var Pd=[],po=-1;function _s(n){return{current:n}}function Ze(n){0>po||(n.current=Pd[po],Pd[po]=null,po--)}function Xe(n,i){po++,Pd[po]=n.current,n.current=i}var ws={},$t=_s(ws),sn=_s(!1),gi=ws;function mo(n,i){var l=n.type.contextTypes;if(!l)return ws;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=i[v];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=m),m}function on(n){return n=n.childContextTypes,n!=null}function au(){Ze(sn),Ze($t)}function Xp(n,i,l){if($t.current!==ws)throw Error(t(168));Xe($t,i),Xe(sn,l)}function Jp(n,i,l){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var m in d)if(!(m in i))throw Error(t(108,Oe(n)||"Unknown",m));return oe({},l,d)}function lu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ws,gi=$t.current,Xe($t,n),Xe(sn,sn.current),!0}function Zp(n,i,l){var d=n.stateNode;if(!d)throw Error(t(169));l?(n=Jp(n,i,gi),d.__reactInternalMemoizedMergedChildContext=n,Ze(sn),Ze($t),Xe($t,n)):Ze(sn),Xe(sn,l)}var Or=null,uu=!1,Cd=!1;function em(n){Or===null?Or=[n]:Or.push(n)}function mw(n){uu=!0,em(n)}function Es(){if(!Cd&&Or!==null){Cd=!0;var n=0,i=Le;try{var l=Or;for(Le=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}Or=null,uu=!1}catch(m){throw Or!==null&&(Or=Or.slice(n+1)),Gi(ai,Es),m}finally{Le=i,Cd=!1}}return null}var go=[],yo=0,cu=null,du=0,kn=[],An=0,yi=null,Lr=1,Vr="";function vi(n,i){go[yo++]=du,go[yo++]=cu,cu=n,du=i}function tm(n,i,l){kn[An++]=Lr,kn[An++]=Vr,kn[An++]=yi,yi=n;var d=Lr;n=Vr;var m=32-Xt(d)-1;d&=~(1<<m),l+=1;var v=32-Xt(i)+m;if(30<v){var E=m-m%5;v=(d&(1<<E)-1).toString(32),d>>=E,m-=E,Lr=1<<32-Xt(i)+m|l<<m|d,Vr=v+n}else Lr=1<<v|l<<m|d,Vr=n}function xd(n){n.return!==null&&(vi(n,1),tm(n,1,0))}function kd(n){for(;n===cu;)cu=go[--yo],go[yo]=null,du=go[--yo],go[yo]=null;for(;n===yi;)yi=kn[--An],kn[An]=null,Vr=kn[--An],kn[An]=null,Lr=kn[--An],kn[An]=null}var vn=null,_n=null,st=!1,Yn=null;function nm(n,i){var l=jn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function rm(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,vn=n,_n=vs(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,vn=n,_n=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=yi!==null?{id:Lr,overflow:Vr}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=jn(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,vn=n,_n=null,!0):!1;default:return!1}}function Ad(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Rd(n){if(st){var i=_n;if(i){var l=i;if(!rm(n,i)){if(Ad(n))throw Error(t(418));i=vs(l.nextSibling);var d=vn;i&&rm(n,i)?nm(d,l):(n.flags=n.flags&-4097|2,st=!1,vn=n)}}else{if(Ad(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,vn=n}}}function sm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vn=n}function hu(n){if(n!==vn)return!1;if(!st)return sm(n),st=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Ed(n.type,n.memoizedProps)),i&&(i=_n)){if(Ad(n))throw im(),Error(t(418));for(;i;)nm(n,i),i=vs(i.nextSibling)}if(sm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){_n=vs(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}_n=null}}else _n=vn?vs(n.stateNode.nextSibling):null;return!0}function im(){for(var n=_n;n;)n=vs(n.nextSibling)}function vo(){_n=vn=null,st=!1}function Nd(n){Yn===null?Yn=[n]:Yn.push(n)}var gw=X.ReactCurrentBatchConfig;function Na(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,n));var m=d,v=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(E){var R=m.refs;E===null?delete R[v]:R[v]=E},i._stringRef=v,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function fu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function om(n){var i=n._init;return i(n._payload)}function am(n){function i(z,V){if(n){var $=z.deletions;$===null?(z.deletions=[V],z.flags|=16):$.push(V)}}function l(z,V){if(!n)return null;for(;V!==null;)i(z,V),V=V.sibling;return null}function d(z,V){for(z=new Map;V!==null;)V.key!==null?z.set(V.key,V):z.set(V.index,V),V=V.sibling;return z}function m(z,V){return z=As(z,V),z.index=0,z.sibling=null,z}function v(z,V,$){return z.index=$,n?($=z.alternate,$!==null?($=$.index,$<V?(z.flags|=2,V):$):(z.flags|=2,V)):(z.flags|=1048576,V)}function E(z){return n&&z.alternate===null&&(z.flags|=2),z}function R(z,V,$,se){return V===null||V.tag!==6?(V=Sh($,z.mode,se),V.return=z,V):(V=m(V,$),V.return=z,V)}function L(z,V,$,se){var ge=$.type;return ge===b?ne(z,V,$.props.children,se,$.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===tt&&om(ge)===V.type)?(se=m(V,$.props),se.ref=Na(z,V,$),se.return=z,se):(se=Vu($.type,$.key,$.props,null,z.mode,se),se.ref=Na(z,V,$),se.return=z,se)}function W(z,V,$,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==$.containerInfo||V.stateNode.implementation!==$.implementation?(V=Th($,z.mode,se),V.return=z,V):(V=m(V,$.children||[]),V.return=z,V)}function ne(z,V,$,se,ge){return V===null||V.tag!==7?(V=Ci($,z.mode,se,ge),V.return=z,V):(V=m(V,$),V.return=z,V)}function re(z,V,$){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Sh(""+V,z.mode,$),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ye:return $=Vu(V.type,V.key,V.props,null,z.mode,$),$.ref=Na(z,null,V),$.return=z,$;case pe:return V=Th(V,z.mode,$),V.return=z,V;case tt:var se=V._init;return re(z,se(V._payload),$)}if(Mn(V)||he(V))return V=Ci(V,z.mode,$,null),V.return=z,V;fu(z,V)}return null}function te(z,V,$,se){var ge=V!==null?V.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ge!==null?null:R(z,V,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ye:return $.key===ge?L(z,V,$,se):null;case pe:return $.key===ge?W(z,V,$,se):null;case tt:return ge=$._init,te(z,V,ge($._payload),se)}if(Mn($)||he($))return ge!==null?null:ne(z,V,$,se,null);fu(z,$)}return null}function ae(z,V,$,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get($)||null,R(V,z,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ye:return z=z.get(se.key===null?$:se.key)||null,L(V,z,se,ge);case pe:return z=z.get(se.key===null?$:se.key)||null,W(V,z,se,ge);case tt:var _e=se._init;return ae(z,V,$,_e(se._payload),ge)}if(Mn(se)||he(se))return z=z.get($)||null,ne(V,z,se,ge,null);fu(V,se)}return null}function fe(z,V,$,se){for(var ge=null,_e=null,we=V,Te=V=0,bt=null;we!==null&&Te<$.length;Te++){we.index>Te?(bt=we,we=null):bt=we.sibling;var $e=te(z,we,$[Te],se);if($e===null){we===null&&(we=bt);break}n&&we&&$e.alternate===null&&i(z,we),V=v($e,V,Te),_e===null?ge=$e:_e.sibling=$e,_e=$e,we=bt}if(Te===$.length)return l(z,we),st&&vi(z,Te),ge;if(we===null){for(;Te<$.length;Te++)we=re(z,$[Te],se),we!==null&&(V=v(we,V,Te),_e===null?ge=we:_e.sibling=we,_e=we);return st&&vi(z,Te),ge}for(we=d(z,we);Te<$.length;Te++)bt=ae(we,z,Te,$[Te],se),bt!==null&&(n&&bt.alternate!==null&&we.delete(bt.key===null?Te:bt.key),V=v(bt,V,Te),_e===null?ge=bt:_e.sibling=bt,_e=bt);return n&&we.forEach(function(Rs){return i(z,Rs)}),st&&vi(z,Te),ge}function me(z,V,$,se){var ge=he($);if(typeof ge!="function")throw Error(t(150));if($=ge.call($),$==null)throw Error(t(151));for(var _e=ge=null,we=V,Te=V=0,bt=null,$e=$.next();we!==null&&!$e.done;Te++,$e=$.next()){we.index>Te?(bt=we,we=null):bt=we.sibling;var Rs=te(z,we,$e.value,se);if(Rs===null){we===null&&(we=bt);break}n&&we&&Rs.alternate===null&&i(z,we),V=v(Rs,V,Te),_e===null?ge=Rs:_e.sibling=Rs,_e=Rs,we=bt}if($e.done)return l(z,we),st&&vi(z,Te),ge;if(we===null){for(;!$e.done;Te++,$e=$.next())$e=re(z,$e.value,se),$e!==null&&(V=v($e,V,Te),_e===null?ge=$e:_e.sibling=$e,_e=$e);return st&&vi(z,Te),ge}for(we=d(z,we);!$e.done;Te++,$e=$.next())$e=ae(we,z,Te,$e.value,se),$e!==null&&(n&&$e.alternate!==null&&we.delete($e.key===null?Te:$e.key),V=v($e,V,Te),_e===null?ge=$e:_e.sibling=$e,_e=$e);return n&&we.forEach(function(Kw){return i(z,Kw)}),st&&vi(z,Te),ge}function gt(z,V,$,se){if(typeof $=="object"&&$!==null&&$.type===b&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case ye:e:{for(var ge=$.key,_e=V;_e!==null;){if(_e.key===ge){if(ge=$.type,ge===b){if(_e.tag===7){l(z,_e.sibling),V=m(_e,$.props.children),V.return=z,z=V;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===tt&&om(ge)===_e.type){l(z,_e.sibling),V=m(_e,$.props),V.ref=Na(z,_e,$),V.return=z,z=V;break e}l(z,_e);break}else i(z,_e);_e=_e.sibling}$.type===b?(V=Ci($.props.children,z.mode,se,$.key),V.return=z,z=V):(se=Vu($.type,$.key,$.props,null,z.mode,se),se.ref=Na(z,V,$),se.return=z,z=se)}return E(z);case pe:e:{for(_e=$.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===$.containerInfo&&V.stateNode.implementation===$.implementation){l(z,V.sibling),V=m(V,$.children||[]),V.return=z,z=V;break e}else{l(z,V);break}else i(z,V);V=V.sibling}V=Th($,z.mode,se),V.return=z,z=V}return E(z);case tt:return _e=$._init,gt(z,V,_e($._payload),se)}if(Mn($))return fe(z,V,$,se);if(he($))return me(z,V,$,se);fu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,V!==null&&V.tag===6?(l(z,V.sibling),V=m(V,$),V.return=z,z=V):(l(z,V),V=Sh($,z.mode,se),V.return=z,z=V),E(z)):l(z,V)}return gt}var _o=am(!0),lm=am(!1),pu=_s(null),mu=null,wo=null,Dd=null;function jd(){Dd=wo=mu=null}function bd(n){var i=pu.current;Ze(pu),n._currentValue=i}function Od(n,i,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===l)break;n=n.return}}function Eo(n,i){mu=n,Dd=wo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(an=!0),n.firstContext=null)}function Rn(n){var i=n._currentValue;if(Dd!==n)if(n={context:n,memoizedValue:i,next:null},wo===null){if(mu===null)throw Error(t(308));wo=n,mu.dependencies={lanes:0,firstContext:n}}else wo=wo.next=n;return i}var _i=null;function Ld(n){_i===null?_i=[n]:_i.push(n)}function um(n,i,l,d){var m=i.interleaved;return m===null?(l.next=l,Ld(i)):(l.next=m.next,m.next=l),i.interleaved=l,Mr(n,d)}function Mr(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Ss=!1;function Vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Fr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(n,i,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,ze&2){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,Mr(n,l)}return m=d.interleaved,m===null?(i.next=i,Ld(d)):(i.next=m.next,m.next=i),d.interleaved=i,Mr(n,l)}function gu(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,hs(n,l)}}function dm(n,i){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=E:v=v.next=E,l=l.next}while(l!==null);v===null?m=v=i:v=v.next=i}else m=v=i;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function yu(n,i,l,d){var m=n.updateQueue;Ss=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var L=R,W=L.next;L.next=null,E===null?v=W:E.next=W,E=L;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==E&&(R===null?ne.firstBaseUpdate=W:R.next=W,ne.lastBaseUpdate=L))}if(v!==null){var re=m.baseState;E=0,ne=W=L=null,R=v;do{var te=R.lane,ae=R.eventTime;if((d&te)===te){ne!==null&&(ne=ne.next={eventTime:ae,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var fe=n,me=R;switch(te=i,ae=l,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){re=fe.call(ae,re,te);break e}re=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,te=typeof fe=="function"?fe.call(ae,re,te):fe,te==null)break e;re=oe({},re,te);break e;case 2:Ss=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,te=m.effects,te===null?m.effects=[R]:te.push(R))}else ae={eventTime:ae,lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(W=ne=ae,L=re):ne=ne.next=ae,E|=te;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;te=R,R=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(ne===null&&(L=re),m.baseState=L,m.firstBaseUpdate=W,m.lastBaseUpdate=ne,i=m.shared.interleaved,i!==null){m=i;do E|=m.lane,m=m.next;while(m!==i)}else v===null&&(m.shared.lanes=0);Si|=E,n.lanes=E,n.memoizedState=re}}function hm(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],m=d.callback;if(m!==null){if(d.callback=null,d=l,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var Da={},vr=_s(Da),ja=_s(Da),ba=_s(Da);function wi(n){if(n===Da)throw Error(t(174));return n}function Md(n,i){switch(Xe(ba,i),Xe(ja,n),Xe(vr,Da),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ee(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ee(i,n)}Ze(vr),Xe(vr,i)}function So(){Ze(vr),Ze(ja),Ze(ba)}function fm(n){wi(ba.current);var i=wi(vr.current),l=ee(i,n.type);i!==l&&(Xe(ja,n),Xe(vr,l))}function Fd(n){ja.current===n&&(Ze(vr),Ze(ja))}var at=_s(0);function vu(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ud=[];function Bd(){for(var n=0;n<Ud.length;n++)Ud[n]._workInProgressVersionPrimary=null;Ud.length=0}var _u=X.ReactCurrentDispatcher,zd=X.ReactCurrentBatchConfig,Ei=0,lt=null,It=null,Dt=null,wu=!1,Oa=!1,La=0,yw=0;function qt(){throw Error(t(321))}function $d(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Qn(n[l],i[l]))return!1;return!0}function qd(n,i,l,d,m,v){if(Ei=v,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,_u.current=n===null||n.memoizedState===null?Ew:Sw,n=l(d,m),Oa){v=0;do{if(Oa=!1,La=0,25<=v)throw Error(t(301));v+=1,Dt=It=null,i.updateQueue=null,_u.current=Tw,n=l(d,m)}while(Oa)}if(_u.current=Tu,i=It!==null&&It.next!==null,Ei=0,Dt=It=lt=null,wu=!1,i)throw Error(t(300));return n}function Hd(){var n=La!==0;return La=0,n}function _r(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?lt.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Nn(){if(It===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var i=Dt===null?lt.memoizedState:Dt.next;if(i!==null)Dt=i,It=n;else{if(n===null)throw Error(t(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Dt===null?lt.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function Va(n,i){return typeof i=="function"?i(n):i}function Wd(n){var i=Nn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var d=It,m=d.baseQueue,v=l.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}d.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,d=d.baseState;var R=E=null,L=null,W=v;do{var ne=W.lane;if((Ei&ne)===ne)L!==null&&(L=L.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:n(d,W.action);else{var re={lane:ne,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};L===null?(R=L=re,E=d):L=L.next=re,lt.lanes|=ne,Si|=ne}W=W.next}while(W!==null&&W!==v);L===null?E=d:L.next=R,Qn(d,i.memoizedState)||(an=!0),i.memoizedState=d,i.baseState=E,i.baseQueue=L,l.lastRenderedState=d}if(n=l.interleaved,n!==null){m=n;do v=m.lane,lt.lanes|=v,Si|=v,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Gd(n){var i=Nn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,v=i.memoizedState;if(m!==null){l.pending=null;var E=m=m.next;do v=n(v,E.action),E=E.next;while(E!==m);Qn(v,i.memoizedState)||(an=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,d]}function pm(){}function mm(n,i){var l=lt,d=Nn(),m=i(),v=!Qn(d.memoizedState,m);if(v&&(d.memoizedState=m,an=!0),d=d.queue,Kd(vm.bind(null,l,d,n),[n]),d.getSnapshot!==i||v||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,Ma(9,ym.bind(null,l,d,m,i),void 0,null),jt===null)throw Error(t(349));Ei&30||gm(l,i,m)}return m}function gm(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function ym(n,i,l,d){i.value=l,i.getSnapshot=d,_m(i)&&wm(n)}function vm(n,i,l){return l(function(){_m(i)&&wm(n)})}function _m(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Qn(n,l)}catch{return!0}}function wm(n){var i=Mr(n,1);i!==null&&er(i,n,1,-1)}function Em(n){var i=_r();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},i.queue=n,n=n.dispatch=ww.bind(null,lt,n),[i.memoizedState,n]}function Ma(n,i,l,d){return n={tag:n,create:i,destroy:l,deps:d,next:null},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,i.lastEffect=n)),n}function Sm(){return Nn().memoizedState}function Eu(n,i,l,d){var m=_r();lt.flags|=n,m.memoizedState=Ma(1|i,l,void 0,d===void 0?null:d)}function Su(n,i,l,d){var m=Nn();d=d===void 0?null:d;var v=void 0;if(It!==null){var E=It.memoizedState;if(v=E.destroy,d!==null&&$d(d,E.deps)){m.memoizedState=Ma(i,l,v,d);return}}lt.flags|=n,m.memoizedState=Ma(1|i,l,v,d)}function Tm(n,i){return Eu(8390656,8,n,i)}function Kd(n,i){return Su(2048,8,n,i)}function Im(n,i){return Su(4,2,n,i)}function Pm(n,i){return Su(4,4,n,i)}function Cm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function xm(n,i,l){return l=l!=null?l.concat([n]):null,Su(4,4,Cm.bind(null,i,n),l)}function Qd(){}function km(n,i){var l=Nn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&$d(i,d[1])?d[0]:(l.memoizedState=[n,i],n)}function Am(n,i){var l=Nn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&$d(i,d[1])?d[0]:(n=n(),l.memoizedState=[n,i],n)}function Rm(n,i,l){return Ei&21?(Qn(l,i)||(l=ci(),lt.lanes|=l,Si|=l,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,an=!0),n.memoizedState=l)}function vw(n,i){var l=Le;Le=l!==0&&4>l?l:4,n(!0);var d=zd.transition;zd.transition={};try{n(!1),i()}finally{Le=l,zd.transition=d}}function Nm(){return Nn().memoizedState}function _w(n,i,l){var d=xs(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Dm(n))jm(i,l);else if(l=um(n,i,l,d),l!==null){var m=en();er(l,n,d,m),bm(l,i,d)}}function ww(n,i,l){var d=xs(n),m={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dm(n))jm(i,m);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var E=i.lastRenderedState,R=v(E,l);if(m.hasEagerState=!0,m.eagerState=R,Qn(R,E)){var L=i.interleaved;L===null?(m.next=m,Ld(i)):(m.next=L.next,L.next=m),i.interleaved=m;return}}catch{}finally{}l=um(n,i,m,d),l!==null&&(m=en(),er(l,n,d,m),bm(l,i,d))}}function Dm(n){var i=n.alternate;return n===lt||i!==null&&i===lt}function jm(n,i){Oa=wu=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function bm(n,i,l){if(l&4194240){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,hs(n,l)}}var Tu={readContext:Rn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Ew={readContext:Rn,useCallback:function(n,i){return _r().memoizedState=[n,i===void 0?null:i],n},useContext:Rn,useEffect:Tm,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,Eu(4194308,4,Cm.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Eu(4194308,4,n,i)},useInsertionEffect:function(n,i){return Eu(4,2,n,i)},useMemo:function(n,i){var l=_r();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var d=_r();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=_w.bind(null,lt,n),[d.memoizedState,n]},useRef:function(n){var i=_r();return n={current:n},i.memoizedState=n},useState:Em,useDebugValue:Qd,useDeferredValue:function(n){return _r().memoizedState=n},useTransition:function(){var n=Em(!1),i=n[0];return n=vw.bind(null,n[1]),_r().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var d=lt,m=_r();if(st){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),jt===null)throw Error(t(349));Ei&30||gm(d,i,l)}m.memoizedState=l;var v={value:l,getSnapshot:i};return m.queue=v,Tm(vm.bind(null,d,v,n),[n]),d.flags|=2048,Ma(9,ym.bind(null,d,v,l,i),void 0,null),l},useId:function(){var n=_r(),i=jt.identifierPrefix;if(st){var l=Vr,d=Lr;l=(d&~(1<<32-Xt(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=La++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=yw++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Sw={readContext:Rn,useCallback:km,useContext:Rn,useEffect:Kd,useImperativeHandle:xm,useInsertionEffect:Im,useLayoutEffect:Pm,useMemo:Am,useReducer:Wd,useRef:Sm,useState:function(){return Wd(Va)},useDebugValue:Qd,useDeferredValue:function(n){var i=Nn();return Rm(i,It.memoizedState,n)},useTransition:function(){var n=Wd(Va)[0],i=Nn().memoizedState;return[n,i]},useMutableSource:pm,useSyncExternalStore:mm,useId:Nm,unstable_isNewReconciler:!1},Tw={readContext:Rn,useCallback:km,useContext:Rn,useEffect:Kd,useImperativeHandle:xm,useInsertionEffect:Im,useLayoutEffect:Pm,useMemo:Am,useReducer:Gd,useRef:Sm,useState:function(){return Gd(Va)},useDebugValue:Qd,useDeferredValue:function(n){var i=Nn();return It===null?i.memoizedState=n:Rm(i,It.memoizedState,n)},useTransition:function(){var n=Gd(Va)[0],i=Nn().memoizedState;return[n,i]},useMutableSource:pm,useSyncExternalStore:mm,useId:Nm,unstable_isNewReconciler:!1};function Xn(n,i){if(n&&n.defaultProps){i=oe({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function Yd(n,i,l,d){i=n.memoizedState,l=l(d,i),l=l==null?i:oe({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Iu={isMounted:function(n){return(n=n._reactInternals)?zn(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var d=en(),m=xs(n),v=Fr(d,m);v.payload=i,l!=null&&(v.callback=l),i=Ts(n,v,m),i!==null&&(er(i,n,m,d),gu(i,n,m))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var d=en(),m=xs(n),v=Fr(d,m);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=Ts(n,v,m),i!==null&&(er(i,n,m,d),gu(i,n,m))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=en(),d=xs(n),m=Fr(l,d);m.tag=2,i!=null&&(m.callback=i),i=Ts(n,m,d),i!==null&&(er(i,n,d,l),gu(i,n,d))}};function Om(n,i,l,d,m,v,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,v,E):i.prototype&&i.prototype.isPureReactComponent?!Ia(l,d)||!Ia(m,v):!0}function Lm(n,i,l){var d=!1,m=ws,v=i.contextType;return typeof v=="object"&&v!==null?v=Rn(v):(m=on(i)?gi:$t.current,d=i.contextTypes,v=(d=d!=null)?mo(n,m):ws),i=new i(l,v),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Iu,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=v),i}function Vm(n,i,l,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==n&&Iu.enqueueReplaceState(i,i.state,null)}function Xd(n,i,l,d){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},Vd(n);var v=i.contextType;typeof v=="object"&&v!==null?m.context=Rn(v):(v=on(i)?gi:$t.current,m.context=mo(n,v)),m.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Yd(n,i,v,l),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&Iu.enqueueReplaceState(m,m.state,null),yu(n,l,m,d),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function To(n,i){try{var l="",d=i;do l+=Ce(d),d=d.return;while(d);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:i,stack:m,digest:null}}function Jd(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function Zd(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Iw=typeof WeakMap=="function"?WeakMap:Map;function Mm(n,i,l){l=Fr(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){Nu||(Nu=!0,ph=d),Zd(n,i)},l}function Fm(n,i,l){l=Fr(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var m=i.value;l.payload=function(){return d(m)},l.callback=function(){Zd(n,i)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){Zd(n,i),typeof d!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),l}function Um(n,i,l){var d=n.pingCache;if(d===null){d=n.pingCache=new Iw;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(l)||(m.add(l),n=Mw.bind(null,n,i,l),i.then(n,n))}function Bm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function zm(n,i,l,d,m){return n.mode&1?(n.flags|=65536,n.lanes=m,n):(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Fr(-1,1),i.tag=2,Ts(l,i,1))),l.lanes|=1),n)}var Pw=X.ReactCurrentOwner,an=!1;function Zt(n,i,l,d){i.child=n===null?lm(i,null,l,d):_o(i,n.child,l,d)}function $m(n,i,l,d,m){l=l.render;var v=i.ref;return Eo(i,m),d=qd(n,i,l,d,v,m),l=Hd(),n!==null&&!an?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,Ur(n,i,m)):(st&&l&&xd(i),i.flags|=1,Zt(n,i,d,m),i.child)}function qm(n,i,l,d,m){if(n===null){var v=l.type;return typeof v=="function"&&!Eh(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=v,Hm(n,i,v,d,m)):(n=Vu(l.type,null,d,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(v=n.child,!(n.lanes&m)){var E=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ia,l(E,d)&&n.ref===i.ref)return Ur(n,i,m)}return i.flags|=1,n=As(v,d),n.ref=i.ref,n.return=i,i.child=n}function Hm(n,i,l,d,m){if(n!==null){var v=n.memoizedProps;if(Ia(v,d)&&n.ref===i.ref)if(an=!1,i.pendingProps=d=v,(n.lanes&m)!==0)n.flags&131072&&(an=!0);else return i.lanes=n.lanes,Ur(n,i,m)}return eh(n,i,l,d,m)}function Wm(n,i,l){var d=i.pendingProps,m=d.children,v=n!==null?n.memoizedState:null;if(d.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Po,wn),wn|=l;else{if(!(l&1073741824))return n=v!==null?v.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Xe(Po,wn),wn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,Xe(Po,wn),wn|=d}else v!==null?(d=v.baseLanes|l,i.memoizedState=null):d=l,Xe(Po,wn),wn|=d;return Zt(n,i,m,l),i.child}function Gm(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function eh(n,i,l,d,m){var v=on(l)?gi:$t.current;return v=mo(i,v),Eo(i,m),l=qd(n,i,l,d,v,m),d=Hd(),n!==null&&!an?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,Ur(n,i,m)):(st&&d&&xd(i),i.flags|=1,Zt(n,i,l,m),i.child)}function Km(n,i,l,d,m){if(on(l)){var v=!0;lu(i)}else v=!1;if(Eo(i,m),i.stateNode===null)Cu(n,i),Lm(i,l,d),Xd(i,l,d,m),d=!0;else if(n===null){var E=i.stateNode,R=i.memoizedProps;E.props=R;var L=E.context,W=l.contextType;typeof W=="object"&&W!==null?W=Rn(W):(W=on(l)?gi:$t.current,W=mo(i,W));var ne=l.getDerivedStateFromProps,re=typeof ne=="function"||typeof E.getSnapshotBeforeUpdate=="function";re||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==d||L!==W)&&Vm(i,E,d,W),Ss=!1;var te=i.memoizedState;E.state=te,yu(i,d,E,m),L=i.memoizedState,R!==d||te!==L||sn.current||Ss?(typeof ne=="function"&&(Yd(i,l,ne,d),L=i.memoizedState),(R=Ss||Om(i,l,R,d,te,L,W))?(re||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=L),E.props=d,E.state=L,E.context=W,d=R):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{E=i.stateNode,cm(n,i),R=i.memoizedProps,W=i.type===i.elementType?R:Xn(i.type,R),E.props=W,re=i.pendingProps,te=E.context,L=l.contextType,typeof L=="object"&&L!==null?L=Rn(L):(L=on(l)?gi:$t.current,L=mo(i,L));var ae=l.getDerivedStateFromProps;(ne=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==re||te!==L)&&Vm(i,E,d,L),Ss=!1,te=i.memoizedState,E.state=te,yu(i,d,E,m);var fe=i.memoizedState;R!==re||te!==fe||sn.current||Ss?(typeof ae=="function"&&(Yd(i,l,ae,d),fe=i.memoizedState),(W=Ss||Om(i,l,W,d,te,fe,L)||!1)?(ne||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,fe,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,fe,L)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=fe),E.props=d,E.state=fe,E.context=L,d=W):(typeof E.componentDidUpdate!="function"||R===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),d=!1)}return th(n,i,l,d,v,m)}function th(n,i,l,d,m,v){Gm(n,i);var E=(i.flags&128)!==0;if(!d&&!E)return m&&Zp(i,l,!1),Ur(n,i,v);d=i.stateNode,Pw.current=i;var R=E&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&E?(i.child=_o(i,n.child,null,v),i.child=_o(i,null,R,v)):Zt(n,i,R,v),i.memoizedState=d.state,m&&Zp(i,l,!0),i.child}function Qm(n){var i=n.stateNode;i.pendingContext?Xp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Xp(n,i.context,!1),Md(n,i.containerInfo)}function Ym(n,i,l,d,m){return vo(),Nd(m),i.flags|=256,Zt(n,i,l,d),i.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Xm(n,i,l){var d=i.pendingProps,m=at.current,v=!1,E=(i.flags&128)!==0,R;if((R=E)||(R=n!==null&&n.memoizedState===null?!1:(m&2)!==0),R?(v=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Xe(at,m&1),n===null)return Rd(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(E=d.children,n=d.fallback,v?(d=i.mode,v=i.child,E={mode:"hidden",children:E},!(d&1)&&v!==null?(v.childLanes=0,v.pendingProps=E):v=Mu(E,d,0,null),n=Ci(n,d,l,null),v.return=i,n.return=i,v.sibling=n,i.child=v,i.child.memoizedState=rh(l),i.memoizedState=nh,n):sh(i,E));if(m=n.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return Cw(n,i,E,d,R,m,l);if(v){v=d.fallback,E=i.mode,m=n.child,R=m.sibling;var L={mode:"hidden",children:d.children};return!(E&1)&&i.child!==m?(d=i.child,d.childLanes=0,d.pendingProps=L,i.deletions=null):(d=As(m,L),d.subtreeFlags=m.subtreeFlags&14680064),R!==null?v=As(R,v):(v=Ci(v,E,l,null),v.flags|=2),v.return=i,d.return=i,d.sibling=v,i.child=d,d=v,v=i.child,E=n.child.memoizedState,E=E===null?rh(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=n.childLanes&~l,i.memoizedState=nh,d}return v=n.child,n=v.sibling,d=As(v,{mode:"visible",children:d.children}),!(i.mode&1)&&(d.lanes=l),d.return=i,d.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=d,i.memoizedState=null,d}function sh(n,i){return i=Mu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Pu(n,i,l,d){return d!==null&&Nd(d),_o(i,n.child,null,l),n=sh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Cw(n,i,l,d,m,v,E){if(l)return i.flags&256?(i.flags&=-257,d=Jd(Error(t(422))),Pu(n,i,E,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(v=d.fallback,m=i.mode,d=Mu({mode:"visible",children:d.children},m,0,null),v=Ci(v,m,E,null),v.flags|=2,d.return=i,v.return=i,d.sibling=v,i.child=d,i.mode&1&&_o(i,n.child,null,E),i.child.memoizedState=rh(E),i.memoizedState=nh,v);if(!(i.mode&1))return Pu(n,i,E,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var R=d.dgst;return d=R,v=Error(t(419)),d=Jd(v,d,void 0),Pu(n,i,E,d)}if(R=(E&n.childLanes)!==0,an||R){if(d=jt,d!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(d.suspendedLanes|E)?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,Mr(n,m),er(d,n,m,-1))}return wh(),d=Jd(Error(t(421))),Pu(n,i,E,d)}return m.data==="$?"?(i.flags|=128,i.child=n.child,i=Fw.bind(null,n),m._reactRetry=i,null):(n=v.treeContext,_n=vs(m.nextSibling),vn=i,st=!0,Yn=null,n!==null&&(kn[An++]=Lr,kn[An++]=Vr,kn[An++]=yi,Lr=n.id,Vr=n.overflow,yi=i),i=sh(i,d.children),i.flags|=4096,i)}function Jm(n,i,l){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),Od(n.return,i,l)}function ih(n,i,l,d,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=m)}function Zm(n,i,l){var d=i.pendingProps,m=d.revealOrder,v=d.tail;if(Zt(n,i,d.children,l),d=at.current,d&2)d=d&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Jm(n,l,i);else if(n.tag===19)Jm(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Xe(at,d),!(i.mode&1))i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)n=l.alternate,n!==null&&vu(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),ih(i,!1,m,l,v);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&vu(n)===null){i.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}ih(i,!0,l,null,v);break;case"together":ih(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Cu(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ur(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Si|=i.lanes,!(l&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=As(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=As(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function xw(n,i,l){switch(i.tag){case 3:Qm(i),vo();break;case 5:fm(i);break;case 1:on(i.type)&&lu(i);break;case 4:Md(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,m=i.memoizedProps.value;Xe(pu,d._currentValue),d._currentValue=m;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Xe(at,at.current&1),i.flags|=128,null):l&i.child.childLanes?Xm(n,i,l):(Xe(at,at.current&1),n=Ur(n,i,l),n!==null?n.sibling:null);Xe(at,at.current&1);break;case 19:if(d=(l&i.childLanes)!==0,n.flags&128){if(d)return Zm(n,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Xe(at,at.current),d)break;return null;case 22:case 23:return i.lanes=0,Wm(n,i,l)}return Ur(n,i,l)}var eg,oh,tg,ng;eg=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},oh=function(){},tg=function(n,i,l,d){var m=n.memoizedProps;if(m!==d){n=i.stateNode,wi(vr.current);var v=null;switch(l){case"input":m=Cr(n,m),d=Cr(n,d),v=[];break;case"select":m=oe({},m,{value:void 0}),d=oe({},d,{value:void 0}),v=[];break;case"textarea":m=Zs(n,m),d=Zs(n,d),v=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=iu)}ia(l,d);var E;l=null;for(W in m)if(!d.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var R=m[W];for(E in R)R.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?v||(v=[]):(v=v||[]).push(W,null));for(W in d){var L=d[W];if(R=m!=null?m[W]:void 0,d.hasOwnProperty(W)&&L!==R&&(L!=null||R!=null))if(W==="style")if(R){for(E in R)!R.hasOwnProperty(E)||L&&L.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in L)L.hasOwnProperty(E)&&R[E]!==L[E]&&(l||(l={}),l[E]=L[E])}else l||(v||(v=[]),v.push(W,l)),l=L;else W==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,R=R?R.__html:void 0,L!=null&&R!==L&&(v=v||[]).push(W,L)):W==="children"?typeof L!="string"&&typeof L!="number"||(v=v||[]).push(W,""+L):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(L!=null&&W==="onScroll"&&Je("scroll",n),v||R===L||(v=[])):(v=v||[]).push(W,L))}l&&(v=v||[]).push("style",l);var W=v;(i.updateQueue=W)&&(i.flags|=4)}},ng=function(n,i,l,d){l!==d&&(i.flags|=4)};function Fa(n,i){if(!st)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(i)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,i}function kw(n,i,l){var d=i.pendingProps;switch(kd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(i),null;case 1:return on(i.type)&&au(),Ht(i),null;case 3:return d=i.stateNode,So(),Ze(sn),Ze($t),Bd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(hu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Yn!==null&&(yh(Yn),Yn=null))),oh(n,i),Ht(i),null;case 5:Fd(i);var m=wi(ba.current);if(l=i.type,n!==null&&i.stateNode!=null)tg(n,i,l,d,m),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return Ht(i),null}if(n=wi(vr.current),hu(i)){d=i.stateNode,l=i.type;var v=i.memoizedProps;switch(d[yr]=i,d[Aa]=v,n=(i.mode&1)!==0,l){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(m=0;m<Ca.length;m++)Je(Ca[m],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":rs(d,v),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Je("invalid",d);break;case"textarea":os(d,v),Je("invalid",d)}ia(l,v),m=null;for(var E in v)if(v.hasOwnProperty(E)){var R=v[E];E==="children"?typeof R=="string"?d.textContent!==R&&(v.suppressHydrationWarning!==!0&&su(d.textContent,R,n),m=["children",R]):typeof R=="number"&&d.textContent!==""+R&&(v.suppressHydrationWarning!==!0&&su(d.textContent,R,n),m=["children",""+R]):o.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&Je("scroll",d)}switch(l){case"input":Sn(d),xr(d,v,!0);break;case"textarea":Sn(d),ei(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=iu)}d=m,i.updateQueue=d,d!==null&&(i.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=E.createElement(l,{is:d.is}):(n=E.createElement(l),l==="select"&&(E=n,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):n=E.createElementNS(n,l),n[yr]=i,n[Aa]=d,eg(n,i,!1,!1),i.stateNode=n;e:{switch(E=oa(l,d),l){case"dialog":Je("cancel",n),Je("close",n),m=d;break;case"iframe":case"object":case"embed":Je("load",n),m=d;break;case"video":case"audio":for(m=0;m<Ca.length;m++)Je(Ca[m],n);m=d;break;case"source":Je("error",n),m=d;break;case"img":case"image":case"link":Je("error",n),Je("load",n),m=d;break;case"details":Je("toggle",n),m=d;break;case"input":rs(n,d),m=Cr(n,d),Je("invalid",n);break;case"option":m=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},m=oe({},d,{value:void 0}),Je("invalid",n);break;case"textarea":os(n,d),m=Zs(n,d),Je("invalid",n);break;default:m=d}ia(l,m),R=m;for(v in R)if(R.hasOwnProperty(v)){var L=R[v];v==="style"?ur(n,L):v==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&nt(n,L)):v==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&Rt(n,L):typeof L=="number"&&Rt(n,""+L):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?L!=null&&v==="onScroll"&&Je("scroll",n):L!=null&&H(n,v,L,E))}switch(l){case"input":Sn(n),xr(n,d,!1);break;case"textarea":Sn(n),ei(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Ne(d.value));break;case"select":n.multiple=!!d.multiple,v=d.value,v!=null?Fn(n,!!d.multiple,v,!1):d.defaultValue!=null&&Fn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=iu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ht(i),null;case 6:if(n&&i.stateNode!=null)ng(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(l=wi(ba.current),wi(vr.current),hu(i)){if(d=i.stateNode,l=i.memoizedProps,d[yr]=i,(v=d.nodeValue!==l)&&(n=vn,n!==null))switch(n.tag){case 3:su(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&su(d.nodeValue,l,(n.mode&1)!==0)}v&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[yr]=i,i.stateNode=d}return Ht(i),null;case 13:if(Ze(at),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&_n!==null&&i.mode&1&&!(i.flags&128))im(),vo(),i.flags|=98560,v=!1;else if(v=hu(i),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[yr]=i}else vo(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Ht(i),v=!1}else Yn!==null&&(yh(Yn),Yn=null),v=!0;if(!v)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,i.mode&1&&(n===null||at.current&1?Pt===0&&(Pt=3):wh())),i.updateQueue!==null&&(i.flags|=4),Ht(i),null);case 4:return So(),oh(n,i),n===null&&xa(i.stateNode.containerInfo),Ht(i),null;case 10:return bd(i.type._context),Ht(i),null;case 17:return on(i.type)&&au(),Ht(i),null;case 19:if(Ze(at),v=i.memoizedState,v===null)return Ht(i),null;if(d=(i.flags&128)!==0,E=v.rendering,E===null)if(d)Fa(v,!1);else{if(Pt!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(E=vu(n),E!==null){for(i.flags|=128,Fa(v,!1),d=E.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)v=l,n=d,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,n=E.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Xe(at,at.current&1|2),i.child}n=n.sibling}v.tail!==null&&Ye()>Co&&(i.flags|=128,d=!0,Fa(v,!1),i.lanes=4194304)}else{if(!d)if(n=vu(E),n!==null){if(i.flags|=128,d=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Fa(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!st)return Ht(i),null}else 2*Ye()-v.renderingStartTime>Co&&l!==1073741824&&(i.flags|=128,d=!0,Fa(v,!1),i.lanes=4194304);v.isBackwards?(E.sibling=i.child,i.child=E):(l=v.last,l!==null?l.sibling=E:i.child=E,v.last=E)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=Ye(),i.sibling=null,l=at.current,Xe(at,d?l&1|2:l&1),i):(Ht(i),null);case 22:case 23:return _h(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&i.mode&1?wn&1073741824&&(Ht(i),i.subtreeFlags&6&&(i.flags|=8192)):Ht(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Aw(n,i){switch(kd(i),i.tag){case 1:return on(i.type)&&au(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return So(),Ze(sn),Ze($t),Bd(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return Fd(i),null;case 13:if(Ze(at),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));vo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ze(at),null;case 4:return So(),null;case 10:return bd(i.type._context),null;case 22:case 23:return _h(),null;case 24:return null;default:return null}}var xu=!1,Wt=!1,Rw=typeof WeakSet=="function"?WeakSet:Set,de=null;function Io(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){dt(n,i,d)}else l.current=null}function ah(n,i,l){try{l()}catch(d){dt(n,i,d)}}var rg=!1;function Nw(n,i){if(_d=ms,n=Op(),dd(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var E=0,R=-1,L=-1,W=0,ne=0,re=n,te=null;t:for(;;){for(var ae;re!==l||m!==0&&re.nodeType!==3||(R=E+m),re!==v||d!==0&&re.nodeType!==3||(L=E+d),re.nodeType===3&&(E+=re.nodeValue.length),(ae=re.firstChild)!==null;)te=re,re=ae;for(;;){if(re===n)break t;if(te===l&&++W===m&&(R=E),te===v&&++ne===d&&(L=E),(ae=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=ae}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(wd={focusedElem:n,selectionRange:l},ms=!1,de=i;de!==null;)if(i=de,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,de=n;else for(;de!==null;){i=de;try{var fe=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,gt=fe.memoizedState,z=i.stateNode,V=z.getSnapshotBeforeUpdate(i.elementType===i.type?me:Xn(i.type,me),gt);z.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var $=i.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){dt(i,i.return,se)}if(n=i.sibling,n!==null){n.return=i.return,de=n;break}de=i.return}return fe=rg,rg=!1,fe}function Ua(n,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&n)===n){var v=m.destroy;m.destroy=void 0,v!==void 0&&ah(i,l,v)}m=m.next}while(m!==d)}}function ku(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function lh(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function sg(n){var i=n.alternate;i!==null&&(n.alternate=null,sg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[yr],delete i[Aa],delete i[Id],delete i[fw],delete i[pw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ig(n){return n.tag===5||n.tag===3||n.tag===4}function og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ig(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function uh(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=iu));else if(d!==4&&(n=n.child,n!==null))for(uh(n,i,l),n=n.sibling;n!==null;)uh(n,i,l),n=n.sibling}function ch(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(ch(n,i,l),n=n.sibling;n!==null;)ch(n,i,l),n=n.sibling}var Mt=null,Jn=!1;function Is(n,i,l){for(l=l.child;l!==null;)ag(n,i,l),l=l.sibling}function ag(n,i,l){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(li,l)}catch{}switch(l.tag){case 5:Wt||Io(l,i);case 6:var d=Mt,m=Jn;Mt=null,Is(n,i,l),Mt=d,Jn=m,Mt!==null&&(Jn?(n=Mt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Mt.removeChild(l.stateNode));break;case 18:Mt!==null&&(Jn?(n=Mt,l=l.stateNode,n.nodeType===8?Td(n.parentNode,l):n.nodeType===1&&Td(n,l),Gn(n)):Td(Mt,l.stateNode));break;case 4:d=Mt,m=Jn,Mt=l.stateNode.containerInfo,Jn=!0,Is(n,i,l),Mt=d,Jn=m;break;case 0:case 11:case 14:case 15:if(!Wt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var v=m,E=v.destroy;v=v.tag,E!==void 0&&(v&2||v&4)&&ah(l,i,E),m=m.next}while(m!==d)}Is(n,i,l);break;case 1:if(!Wt&&(Io(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(R){dt(l,i,R)}Is(n,i,l);break;case 21:Is(n,i,l);break;case 22:l.mode&1?(Wt=(d=Wt)||l.memoizedState!==null,Is(n,i,l),Wt=d):Is(n,i,l);break;default:Is(n,i,l)}}function lg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Rw),i.forEach(function(d){var m=Uw.bind(null,n,d);l.has(d)||(l.add(d),d.then(m,m))})}}function Zn(n,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];try{var v=n,E=i,R=E;e:for(;R!==null;){switch(R.tag){case 5:Mt=R.stateNode,Jn=!1;break e;case 3:Mt=R.stateNode.containerInfo,Jn=!0;break e;case 4:Mt=R.stateNode.containerInfo,Jn=!0;break e}R=R.return}if(Mt===null)throw Error(t(160));ag(v,E,m),Mt=null,Jn=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(W){dt(m,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ug(i,n),i=i.sibling}function ug(n,i){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zn(i,n),wr(n),d&4){try{Ua(3,n,n.return),ku(3,n)}catch(me){dt(n,n.return,me)}try{Ua(5,n,n.return)}catch(me){dt(n,n.return,me)}}break;case 1:Zn(i,n),wr(n),d&512&&l!==null&&Io(l,l.return);break;case 5:if(Zn(i,n),wr(n),d&512&&l!==null&&Io(l,l.return),n.flags&32){var m=n.stateNode;try{Rt(m,"")}catch(me){dt(n,n.return,me)}}if(d&4&&(m=n.stateNode,m!=null)){var v=n.memoizedProps,E=l!==null?l.memoizedProps:v,R=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{R==="input"&&v.type==="radio"&&v.name!=null&&Js(m,v),oa(R,E);var W=oa(R,v);for(E=0;E<L.length;E+=2){var ne=L[E],re=L[E+1];ne==="style"?ur(m,re):ne==="dangerouslySetInnerHTML"?nt(m,re):ne==="children"?Rt(m,re):H(m,ne,re,W)}switch(R){case"input":ss(m,v);break;case"textarea":as(m,v);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var ae=v.value;ae!=null?Fn(m,!!v.multiple,ae,!1):te!==!!v.multiple&&(v.defaultValue!=null?Fn(m,!!v.multiple,v.defaultValue,!0):Fn(m,!!v.multiple,v.multiple?[]:"",!1))}m[Aa]=v}catch(me){dt(n,n.return,me)}}break;case 6:if(Zn(i,n),wr(n),d&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,v=n.memoizedProps;try{m.nodeValue=v}catch(me){dt(n,n.return,me)}}break;case 3:if(Zn(i,n),wr(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Gn(i.containerInfo)}catch(me){dt(n,n.return,me)}break;case 4:Zn(i,n),wr(n);break;case 13:Zn(i,n),wr(n),m=n.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(fh=Ye())),d&4&&lg(n);break;case 22:if(ne=l!==null&&l.memoizedState!==null,n.mode&1?(Wt=(W=Wt)||ne,Zn(i,n),Wt=W):Zn(i,n),wr(n),d&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!ne&&n.mode&1)for(de=n,ne=n.child;ne!==null;){for(re=de=ne;de!==null;){switch(te=de,ae=te.child,te.tag){case 0:case 11:case 14:case 15:Ua(4,te,te.return);break;case 1:Io(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){d=te,l=te.return;try{i=d,fe.props=i.memoizedProps,fe.state=i.memoizedState,fe.componentWillUnmount()}catch(me){dt(d,l,me)}}break;case 5:Io(te,te.return);break;case 22:if(te.memoizedState!==null){hg(re);continue}}ae!==null?(ae.return=te,de=ae):hg(re)}ne=ne.sibling}e:for(ne=null,re=n;;){if(re.tag===5){if(ne===null){ne=re;try{m=re.stateNode,W?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(R=re.stateNode,L=re.memoizedProps.style,E=L!=null&&L.hasOwnProperty("display")?L.display:null,R.style.display=ti("display",E))}catch(me){dt(n,n.return,me)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=W?"":re.memoizedProps}catch(me){dt(n,n.return,me)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===n)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===n)break e;for(;re.sibling===null;){if(re.return===null||re.return===n)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Zn(i,n),wr(n),d&4&&lg(n);break;case 21:break;default:Zn(i,n),wr(n)}}function wr(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(ig(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Rt(m,""),d.flags&=-33);var v=og(n);ch(n,v,m);break;case 3:case 4:var E=d.stateNode.containerInfo,R=og(n);uh(n,R,E);break;default:throw Error(t(161))}}catch(L){dt(n,n.return,L)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Dw(n,i,l){de=n,cg(n)}function cg(n,i,l){for(var d=(n.mode&1)!==0;de!==null;){var m=de,v=m.child;if(m.tag===22&&d){var E=m.memoizedState!==null||xu;if(!E){var R=m.alternate,L=R!==null&&R.memoizedState!==null||Wt;R=xu;var W=Wt;if(xu=E,(Wt=L)&&!W)for(de=m;de!==null;)E=de,L=E.child,E.tag===22&&E.memoizedState!==null?fg(m):L!==null?(L.return=E,de=L):fg(m);for(;v!==null;)de=v,cg(v),v=v.sibling;de=m,xu=R,Wt=W}dg(n)}else m.subtreeFlags&8772&&v!==null?(v.return=m,de=v):dg(n)}}function dg(n){for(;de!==null;){var i=de;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Wt||ku(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Wt)if(l===null)d.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:Xn(i.type,l.memoizedProps);d.componentDidUpdate(m,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&hm(i,v,d);break;case 3:var E=i.updateQueue;if(E!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}hm(i,E,l)}break;case 5:var R=i.stateNode;if(l===null&&i.flags&4){l=R;var L=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var ne=W.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Gn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wt||i.flags&512&&lh(i)}catch(te){dt(i,i.return,te)}}if(i===n){de=null;break}if(l=i.sibling,l!==null){l.return=i.return,de=l;break}de=i.return}}function hg(n){for(;de!==null;){var i=de;if(i===n){de=null;break}var l=i.sibling;if(l!==null){l.return=i.return,de=l;break}de=i.return}}function fg(n){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ku(4,i)}catch(L){dt(i,l,L)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var m=i.return;try{d.componentDidMount()}catch(L){dt(i,m,L)}}var v=i.return;try{lh(i)}catch(L){dt(i,v,L)}break;case 5:var E=i.return;try{lh(i)}catch(L){dt(i,E,L)}}}catch(L){dt(i,i.return,L)}if(i===n){de=null;break}var R=i.sibling;if(R!==null){R.return=i.return,de=R;break}de=i.return}}var jw=Math.ceil,Au=X.ReactCurrentDispatcher,dh=X.ReactCurrentOwner,Dn=X.ReactCurrentBatchConfig,ze=0,jt=null,_t=null,Ft=0,wn=0,Po=_s(0),Pt=0,Ba=null,Si=0,Ru=0,hh=0,za=null,ln=null,fh=0,Co=1/0,Br=null,Nu=!1,ph=null,Ps=null,Du=!1,Cs=null,ju=0,$a=0,mh=null,bu=-1,Ou=0;function en(){return ze&6?Ye():bu!==-1?bu:bu=Ye()}function xs(n){return n.mode&1?ze&2&&Ft!==0?Ft&-Ft:gw.transition!==null?(Ou===0&&(Ou=ci()),Ou):(n=Le,n!==0||(n=window.event,n=n===void 0?16:ya(n.type)),n):1}function er(n,i,l,d){if(50<$a)throw $a=0,mh=null,Error(t(185));ds(n,l,d),(!(ze&2)||n!==jt)&&(n===jt&&(!(ze&2)&&(Ru|=l),Pt===4&&ks(n,Ft)),un(n,d),l===1&&ze===0&&!(i.mode&1)&&(Co=Ye()+500,uu&&Es()))}function un(n,i){var l=n.callbackNode;Ar(n,i);var d=ui(n,n===jt?Ft:0);if(d===0)l!==null&&ha(l),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(l!=null&&ha(l),i===1)n.tag===0?mw(mg.bind(null,n)):em(mg.bind(null,n)),dw(function(){!(ze&6)&&Es()}),l=null;else{switch(fs(d)){case 1:l=ai;break;case 4:l=ls;break;case 16:l=Pn;break;case 536870912:l=Ol;break;default:l=Pn}l=Tg(l,pg.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function pg(n,i){if(bu=-1,Ou=0,ze&6)throw Error(t(327));var l=n.callbackNode;if(xo()&&n.callbackNode!==l)return null;var d=ui(n,n===jt?Ft:0);if(d===0)return null;if(d&30||d&n.expiredLanes||i)i=Lu(n,d);else{i=d;var m=ze;ze|=2;var v=yg();(jt!==n||Ft!==i)&&(Br=null,Co=Ye()+500,Ii(n,i));do try{Lw();break}catch(R){gg(n,R)}while(!0);jd(),Au.current=v,ze=m,_t!==null?i=0:(jt=null,Ft=0,i=Pt)}if(i!==0){if(i===2&&(m=mn(n),m!==0&&(d=m,i=gh(n,m))),i===1)throw l=Ba,Ii(n,0),ks(n,d),un(n,Ye()),l;if(i===6)ks(n,d);else{if(m=n.current.alternate,!(d&30)&&!bw(m)&&(i=Lu(n,d),i===2&&(v=mn(n),v!==0&&(d=v,i=gh(n,v))),i===1))throw l=Ba,Ii(n,0),ks(n,d),un(n,Ye()),l;switch(n.finishedWork=m,n.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:Pi(n,ln,Br);break;case 3:if(ks(n,d),(d&130023424)===d&&(i=fh+500-Ye(),10<i)){if(ui(n,0)!==0)break;if(m=n.suspendedLanes,(m&d)!==d){en(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Sd(Pi.bind(null,n,ln,Br),i);break}Pi(n,ln,Br);break;case 4:if(ks(n,d),(d&4194240)===d)break;for(i=n.eventTimes,m=-1;0<d;){var E=31-Xt(d);v=1<<E,E=i[E],E>m&&(m=E),d&=~v}if(d=m,d=Ye()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*jw(d/1960))-d,10<d){n.timeoutHandle=Sd(Pi.bind(null,n,ln,Br),d);break}Pi(n,ln,Br);break;case 5:Pi(n,ln,Br);break;default:throw Error(t(329))}}}return un(n,Ye()),n.callbackNode===l?pg.bind(null,n):null}function gh(n,i){var l=za;return n.current.memoizedState.isDehydrated&&(Ii(n,i).flags|=256),n=Lu(n,i),n!==2&&(i=ln,ln=l,i!==null&&yh(i)),n}function yh(n){ln===null?ln=n:ln.push.apply(ln,n)}function bw(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var m=l[d],v=m.getSnapshot;m=m.value;try{if(!Qn(v(),m))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ks(n,i){for(i&=~hh,i&=~Ru,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Xt(i),d=1<<l;n[l]=-1,i&=~d}}function mg(n){if(ze&6)throw Error(t(327));xo();var i=ui(n,0);if(!(i&1))return un(n,Ye()),null;var l=Lu(n,i);if(n.tag!==0&&l===2){var d=mn(n);d!==0&&(i=d,l=gh(n,d))}if(l===1)throw l=Ba,Ii(n,0),ks(n,i),un(n,Ye()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Pi(n,ln,Br),un(n,Ye()),null}function vh(n,i){var l=ze;ze|=1;try{return n(i)}finally{ze=l,ze===0&&(Co=Ye()+500,uu&&Es())}}function Ti(n){Cs!==null&&Cs.tag===0&&!(ze&6)&&xo();var i=ze;ze|=1;var l=Dn.transition,d=Le;try{if(Dn.transition=null,Le=1,n)return n()}finally{Le=d,Dn.transition=l,ze=i,!(ze&6)&&Es()}}function _h(){wn=Po.current,Ze(Po)}function Ii(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,cw(l)),_t!==null)for(l=_t.return;l!==null;){var d=l;switch(kd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&au();break;case 3:So(),Ze(sn),Ze($t),Bd();break;case 5:Fd(d);break;case 4:So();break;case 13:Ze(at);break;case 19:Ze(at);break;case 10:bd(d.type._context);break;case 22:case 23:_h()}l=l.return}if(jt=n,_t=n=As(n.current,null),Ft=wn=i,Pt=0,Ba=null,hh=Ru=Si=0,ln=za=null,_i!==null){for(i=0;i<_i.length;i++)if(l=_i[i],d=l.interleaved,d!==null){l.interleaved=null;var m=d.next,v=l.pending;if(v!==null){var E=v.next;v.next=m,d.next=E}l.pending=d}_i=null}return n}function gg(n,i){do{var l=_t;try{if(jd(),_u.current=Tu,wu){for(var d=lt.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}wu=!1}if(Ei=0,Dt=It=lt=null,Oa=!1,La=0,dh.current=null,l===null||l.return===null){Pt=1,Ba=i,_t=null;break}e:{var v=n,E=l.return,R=l,L=i;if(i=Ft,R.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=L,ne=R,re=ne.tag;if(!(ne.mode&1)&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ae=Bm(E);if(ae!==null){ae.flags&=-257,zm(ae,E,R,v,i),ae.mode&1&&Um(v,W,i),i=ae,L=W;var fe=i.updateQueue;if(fe===null){var me=new Set;me.add(L),i.updateQueue=me}else fe.add(L);break e}else{if(!(i&1)){Um(v,W,i),wh();break e}L=Error(t(426))}}else if(st&&R.mode&1){var gt=Bm(E);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),zm(gt,E,R,v,i),Nd(To(L,R));break e}}v=L=To(L,R),Pt!==4&&(Pt=2),za===null?za=[v]:za.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var z=Mm(v,L,i);dm(v,z);break e;case 1:R=L;var V=v.type,$=v.stateNode;if(!(v.flags&128)&&(typeof V.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ps===null||!Ps.has($)))){v.flags|=65536,i&=-i,v.lanes|=i;var se=Fm(v,R,i);dm(v,se);break e}}v=v.return}while(v!==null)}_g(l)}catch(ge){i=ge,_t===l&&l!==null&&(_t=l=l.return);continue}break}while(!0)}function yg(){var n=Au.current;return Au.current=Tu,n===null?Tu:n}function wh(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),jt===null||!(Si&268435455)&&!(Ru&268435455)||ks(jt,Ft)}function Lu(n,i){var l=ze;ze|=2;var d=yg();(jt!==n||Ft!==i)&&(Br=null,Ii(n,i));do try{Ow();break}catch(m){gg(n,m)}while(!0);if(jd(),ze=l,Au.current=d,_t!==null)throw Error(t(261));return jt=null,Ft=0,Pt}function Ow(){for(;_t!==null;)vg(_t)}function Lw(){for(;_t!==null&&!jl();)vg(_t)}function vg(n){var i=Sg(n.alternate,n,wn);n.memoizedProps=n.pendingProps,i===null?_g(n):_t=i,dh.current=null}function _g(n){var i=n;do{var l=i.alternate;if(n=i.return,i.flags&32768){if(l=Aw(l,i),l!==null){l.flags&=32767,_t=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pt=6,_t=null;return}}else if(l=kw(l,i,wn),l!==null){_t=l;return}if(i=i.sibling,i!==null){_t=i;return}_t=i=n}while(i!==null);Pt===0&&(Pt=5)}function Pi(n,i,l){var d=Le,m=Dn.transition;try{Dn.transition=null,Le=1,Vw(n,i,l,d)}finally{Dn.transition=m,Le=d}return null}function Vw(n,i,l,d){do xo();while(Cs!==null);if(ze&6)throw Error(t(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=l.lanes|l.childLanes;if(Qe(n,v),n===jt&&(_t=jt=null,Ft=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Du||(Du=!0,Tg(Pn,function(){return xo(),null})),v=(l.flags&15990)!==0,l.subtreeFlags&15990||v){v=Dn.transition,Dn.transition=null;var E=Le;Le=1;var R=ze;ze|=4,dh.current=null,Nw(n,l),ug(l,n),rw(wd),ms=!!_d,wd=_d=null,n.current=l,Dw(l),rd(),ze=R,Le=E,Dn.transition=v}else n.current=l;if(Du&&(Du=!1,Cs=n,ju=m),v=n.pendingLanes,v===0&&(Ps=null),Ll(l.stateNode),un(n,Ye()),i!==null)for(d=n.onRecoverableError,l=0;l<i.length;l++)m=i[l],d(m.value,{componentStack:m.stack,digest:m.digest});if(Nu)throw Nu=!1,n=ph,ph=null,n;return ju&1&&n.tag!==0&&xo(),v=n.pendingLanes,v&1?n===mh?$a++:($a=0,mh=n):$a=0,Es(),null}function xo(){if(Cs!==null){var n=fs(ju),i=Dn.transition,l=Le;try{if(Dn.transition=null,Le=16>n?16:n,Cs===null)var d=!1;else{if(n=Cs,Cs=null,ju=0,ze&6)throw Error(t(331));var m=ze;for(ze|=4,de=n.current;de!==null;){var v=de,E=v.child;if(de.flags&16){var R=v.deletions;if(R!==null){for(var L=0;L<R.length;L++){var W=R[L];for(de=W;de!==null;){var ne=de;switch(ne.tag){case 0:case 11:case 15:Ua(8,ne,v)}var re=ne.child;if(re!==null)re.return=ne,de=re;else for(;de!==null;){ne=de;var te=ne.sibling,ae=ne.return;if(sg(ne),ne===W){de=null;break}if(te!==null){te.return=ae,de=te;break}de=ae}}}var fe=v.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var gt=me.sibling;me.sibling=null,me=gt}while(me!==null)}}de=v}}if(v.subtreeFlags&2064&&E!==null)E.return=v,de=E;else e:for(;de!==null;){if(v=de,v.flags&2048)switch(v.tag){case 0:case 11:case 15:Ua(9,v,v.return)}var z=v.sibling;if(z!==null){z.return=v.return,de=z;break e}de=v.return}}var V=n.current;for(de=V;de!==null;){E=de;var $=E.child;if(E.subtreeFlags&2064&&$!==null)$.return=E,de=$;else e:for(E=V;de!==null;){if(R=de,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:ku(9,R)}}catch(ge){dt(R,R.return,ge)}if(R===E){de=null;break e}var se=R.sibling;if(se!==null){se.return=R.return,de=se;break e}de=R.return}}if(ze=m,Es(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(li,n)}catch{}d=!0}return d}finally{Le=l,Dn.transition=i}}return!1}function wg(n,i,l){i=To(l,i),i=Mm(n,i,1),n=Ts(n,i,1),i=en(),n!==null&&(ds(n,1,i),un(n,i))}function dt(n,i,l){if(n.tag===3)wg(n,n,l);else for(;i!==null;){if(i.tag===3){wg(i,n,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ps===null||!Ps.has(d))){n=To(l,n),n=Fm(i,n,1),i=Ts(i,n,1),n=en(),i!==null&&(ds(i,1,n),un(i,n));break}}i=i.return}}function Mw(n,i,l){var d=n.pingCache;d!==null&&d.delete(i),i=en(),n.pingedLanes|=n.suspendedLanes&l,jt===n&&(Ft&l)===l&&(Pt===4||Pt===3&&(Ft&130023424)===Ft&&500>Ye()-fh?Ii(n,0):hh|=l),un(n,i)}function Eg(n,i){i===0&&(n.mode&1?(i=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):i=1);var l=en();n=Mr(n,i),n!==null&&(ds(n,i,l),un(n,l))}function Fw(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Eg(n,l)}function Uw(n,i){var l=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Eg(n,l)}var Sg;Sg=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||sn.current)an=!0;else{if(!(n.lanes&l)&&!(i.flags&128))return an=!1,xw(n,i,l);an=!!(n.flags&131072)}else an=!1,st&&i.flags&1048576&&tm(i,du,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Cu(n,i),n=i.pendingProps;var m=mo(i,$t.current);Eo(i,l),m=qd(null,i,d,n,m,l);var v=Hd();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,on(d)?(v=!0,lu(i)):v=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Vd(i),m.updater=Iu,i.stateNode=m,m._reactInternals=i,Xd(i,d,n,l),i=th(null,i,d,!0,v,l)):(i.tag=0,st&&v&&xd(i),Zt(null,i,m,l),i=i.child),i;case 16:d=i.elementType;e:{switch(Cu(n,i),n=i.pendingProps,m=d._init,d=m(d._payload),i.type=d,m=i.tag=zw(d),n=Xn(d,n),m){case 0:i=eh(null,i,d,n,l);break e;case 1:i=Km(null,i,d,n,l);break e;case 11:i=$m(null,i,d,n,l);break e;case 14:i=qm(null,i,d,Xn(d.type,n),l);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Xn(d,m),eh(n,i,d,m,l);case 1:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Xn(d,m),Km(n,i,d,m,l);case 3:e:{if(Qm(i),n===null)throw Error(t(387));d=i.pendingProps,v=i.memoizedState,m=v.element,cm(n,i),yu(i,d,null,l);var E=i.memoizedState;if(d=E.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){m=To(Error(t(423)),i),i=Ym(n,i,d,l,m);break e}else if(d!==m){m=To(Error(t(424)),i),i=Ym(n,i,d,l,m);break e}else for(_n=vs(i.stateNode.containerInfo.firstChild),vn=i,st=!0,Yn=null,l=lm(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(vo(),d===m){i=Ur(n,i,l);break e}Zt(n,i,d,l)}i=i.child}return i;case 5:return fm(i),n===null&&Rd(i),d=i.type,m=i.pendingProps,v=n!==null?n.memoizedProps:null,E=m.children,Ed(d,m)?E=null:v!==null&&Ed(d,v)&&(i.flags|=32),Gm(n,i),Zt(n,i,E,l),i.child;case 6:return n===null&&Rd(i),null;case 13:return Xm(n,i,l);case 4:return Md(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=_o(i,null,d,l):Zt(n,i,d,l),i.child;case 11:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Xn(d,m),$m(n,i,d,m,l);case 7:return Zt(n,i,i.pendingProps,l),i.child;case 8:return Zt(n,i,i.pendingProps.children,l),i.child;case 12:return Zt(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,m=i.pendingProps,v=i.memoizedProps,E=m.value,Xe(pu,d._currentValue),d._currentValue=E,v!==null)if(Qn(v.value,E)){if(v.children===m.children&&!sn.current){i=Ur(n,i,l);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var R=v.dependencies;if(R!==null){E=v.child;for(var L=R.firstContext;L!==null;){if(L.context===d){if(v.tag===1){L=Fr(-1,l&-l),L.tag=2;var W=v.updateQueue;if(W!==null){W=W.shared;var ne=W.pending;ne===null?L.next=L:(L.next=ne.next,ne.next=L),W.pending=L}}v.lanes|=l,L=v.alternate,L!==null&&(L.lanes|=l),Od(v.return,l,i),R.lanes|=l;break}L=L.next}}else if(v.tag===10)E=v.type===i.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(t(341));E.lanes|=l,R=E.alternate,R!==null&&(R.lanes|=l),Od(E,l,i),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===i){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}Zt(n,i,m.children,l),i=i.child}return i;case 9:return m=i.type,d=i.pendingProps.children,Eo(i,l),m=Rn(m),d=d(m),i.flags|=1,Zt(n,i,d,l),i.child;case 14:return d=i.type,m=Xn(d,i.pendingProps),m=Xn(d.type,m),qm(n,i,d,m,l);case 15:return Hm(n,i,i.type,i.pendingProps,l);case 17:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Xn(d,m),Cu(n,i),i.tag=1,on(d)?(n=!0,lu(i)):n=!1,Eo(i,l),Lm(i,d,m),Xd(i,d,m,l),th(null,i,d,!0,n,l);case 19:return Zm(n,i,l);case 22:return Wm(n,i,l)}throw Error(t(156,i.tag))};function Tg(n,i){return Gi(n,i)}function Bw(n,i,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,i,l,d){return new Bw(n,i,l,d)}function Eh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zw(n){if(typeof n=="function")return Eh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===U)return 11;if(n===ct)return 14}return 2}function As(n,i){var l=n.alternate;return l===null?(l=jn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Vu(n,i,l,d,m,v){var E=2;if(d=n,typeof n=="function")Eh(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case b:return Ci(l.children,m,v,i);case A:E=8,m|=8;break;case x:return n=jn(12,l,i,m|2),n.elementType=x,n.lanes=v,n;case N:return n=jn(13,l,i,m),n.elementType=N,n.lanes=v,n;case He:return n=jn(19,l,i,m),n.elementType=He,n.lanes=v,n;case Me:return Mu(l,m,v,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:E=10;break e;case M:E=9;break e;case U:E=11;break e;case ct:E=14;break e;case tt:E=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=jn(E,l,i,m),i.elementType=n,i.type=d,i.lanes=v,i}function Ci(n,i,l,d){return n=jn(7,n,d,i),n.lanes=l,n}function Mu(n,i,l,d){return n=jn(22,n,d,i),n.elementType=Me,n.lanes=l,n.stateNode={isHidden:!1},n}function Sh(n,i,l){return n=jn(6,n,null,i),n.lanes=l,n}function Th(n,i,l){return i=jn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function $w(n,i,l,d,m){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cs(0),this.expirationTimes=cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cs(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Ih(n,i,l,d,m,v,E,R,L){return n=new $w(n,i,l,R,L),i===1?(i=1,v===!0&&(i|=8)):i=0,v=jn(3,null,null,i),n.current=v,v.stateNode=n,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(v),n}function qw(n,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:d==null?null:""+d,children:n,containerInfo:i,implementation:l}}function Ig(n){if(!n)return ws;n=n._reactInternals;e:{if(zn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(on(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(on(l))return Jp(n,l,i)}return i}function Pg(n,i,l,d,m,v,E,R,L){return n=Ih(l,d,!0,n,m,v,E,R,L),n.context=Ig(null),l=n.current,d=en(),m=xs(l),v=Fr(d,m),v.callback=i??null,Ts(l,v,m),n.current.lanes=m,ds(n,m,d),un(n,d),n}function Fu(n,i,l,d){var m=i.current,v=en(),E=xs(m);return l=Ig(l),i.context===null?i.context=l:i.pendingContext=l,i=Fr(v,E),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=Ts(m,i,E),n!==null&&(er(n,m,E,v),gu(n,m,E)),E}function Uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Ph(n,i){Cg(n,i),(n=n.alternate)&&Cg(n,i)}var xg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ch(n){this._internalRoot=n}Bu.prototype.render=Ch.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Fu(n,i,null,null)},Bu.prototype.unmount=Ch.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ti(function(){Fu(null,n,null,null)}),i[br]=null}};function Bu(n){this._internalRoot=n}Bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Bl();n={blockedOn:null,target:n,priority:i};for(var l=0;l<fr.length&&i!==0&&i<fr[l].priority;l++);fr.splice(l,0,n),l===0&&ql(n)}};function xh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kg(){}function Hw(n,i,l,d,m){if(m){if(typeof d=="function"){var v=d;d=function(){var W=Uu(E);v.call(W)}}var E=Pg(i,d,n,0,null,!1,!1,"",kg);return n._reactRootContainer=E,n[br]=E.current,xa(n.nodeType===8?n.parentNode:n),Ti(),E}for(;m=n.lastChild;)n.removeChild(m);if(typeof d=="function"){var R=d;d=function(){var W=Uu(L);R.call(W)}}var L=Ih(n,0,!1,null,null,!1,!1,"",kg);return n._reactRootContainer=L,n[br]=L.current,xa(n.nodeType===8?n.parentNode:n),Ti(function(){Fu(i,L,l,d)}),L}function $u(n,i,l,d,m){var v=l._reactRootContainer;if(v){var E=v;if(typeof m=="function"){var R=m;m=function(){var L=Uu(E);R.call(L)}}Fu(i,E,n,m)}else E=Hw(l,i,n,m,d);return Uu(E)}Fl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=us(i.pendingLanes);l!==0&&(hs(i,l|1),un(i,Ye()),!(ze&6)&&(Co=Ye()+500,Es()))}break;case 13:Ti(function(){var d=Mr(n,1);if(d!==null){var m=en();er(d,n,1,m)}}),Ph(n,1)}},Yi=function(n){if(n.tag===13){var i=Mr(n,134217728);if(i!==null){var l=en();er(i,n,134217728,l)}Ph(n,134217728)}},Ul=function(n){if(n.tag===13){var i=xs(n),l=Mr(n,i);if(l!==null){var d=en();er(l,n,i,d)}Ph(n,i)}},Bl=function(){return Le},zl=function(n,i){var l=Le;try{return Le=n,i()}finally{Le=l}},Bi=function(n,i,l){switch(i){case"input":if(ss(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==n&&d.form===n.form){var m=ou(d);if(!m)throw Error(t(90));lr(d),ss(d,m)}}}break;case"textarea":as(n,l);break;case"select":i=l.value,i!=null&&Fn(n,!!l.multiple,i,!1)}},ri=vh,la=Ti;var Ww={usingClientEntryPoint:!1,Events:[Ra,fo,ou,dr,aa,vh]},qa={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gw={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=da(n),n===null?null:n.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{li=qu.inject(Gw),pn=qu}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww,cn.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(i))throw Error(t(200));return qw(n,i,null,l)},cn.createRoot=function(n,i){if(!xh(n))throw Error(t(299));var l=!1,d="",m=xg;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Ih(n,1,!1,null,null,l,!1,d,m),n[br]=i.current,xa(n.nodeType===8?n.parentNode:n),new Ch(i)},cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=da(i),n=n===null?null:n.stateNode,n},cn.flushSync=function(n){return Ti(n)},cn.hydrate=function(n,i,l){if(!zu(i))throw Error(t(200));return $u(null,n,i,!0,l)},cn.hydrateRoot=function(n,i,l){if(!xh(n))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,m=!1,v="",E=xg;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),i=Pg(i,null,n,1,l??null,m,!1,v,E),n[br]=i.current,xa(n),d)for(n=0;n<d.length;n++)l=d[n],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new Bu(i)},cn.render=function(n,i,l){if(!zu(i))throw Error(t(200));return $u(null,n,i,!1,l)},cn.unmountComponentAtNode=function(n){if(!zu(n))throw Error(t(40));return n._reactRootContainer?(Ti(function(){$u(null,null,n,!1,function(){n._reactRootContainer=null,n[br]=null})}),!0):!1},cn.unstable_batchedUpdates=vh,cn.unstable_renderSubtreeIntoContainer=function(n,i,l,d){if(!zu(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $u(n,i,l,!1,d)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var Lg;function nE(){if(Lg)return Rh.exports;Lg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Rh.exports=tE(),Rh.exports}var Vg;function rE(){if(Vg)return Hu;Vg=1;var r=nE();return Hu.createRoot=r.createRoot,Hu.hydrateRoot=r.hydrateRoot,Hu}var sE=rE();const iE=dv(sE);var Wa={},Mg;function oE(){if(Mg)return Wa;Mg=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.parse=u,Wa.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,C){const P=new a,D=T.length;if(D<2)return P;const j=(C==null?void 0:C.decode)||_;let q=0;do{const Q=T.indexOf("=",q);if(Q===-1)break;const H=T.indexOf(";",q),X=H===-1?D:H;if(Q>X){q=T.lastIndexOf(";",Q-1)+1;continue}const ye=h(T,q,Q),pe=p(T,Q,ye),b=T.slice(ye,pe);if(P[b]===void 0){let A=h(T,Q+1,X),x=p(T,X,A);const O=j(T.slice(A,x));P[b]=O}q=X+1}while(q<D);return P}function h(T,C,P){do{const D=T.charCodeAt(C);if(D!==32&&D!==9)return C}while(++C<P);return P}function p(T,C,P){for(;C>P;){const D=T.charCodeAt(--C);if(D!==32&&D!==9)return C+1}return P}function g(T,C,P){const D=(P==null?void 0:P.encode)||encodeURIComponent;if(!r.test(T))throw new TypeError(`argument name is invalid: ${T}`);const j=D(C);if(!e.test(j))throw new TypeError(`argument val is invalid: ${C}`);let q=T+"="+j;if(!P)return q;if(P.maxAge!==void 0){if(!Number.isInteger(P.maxAge))throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);q+="; Max-Age="+P.maxAge}if(P.domain){if(!t.test(P.domain))throw new TypeError(`option domain is invalid: ${P.domain}`);q+="; Domain="+P.domain}if(P.path){if(!s.test(P.path))throw new TypeError(`option path is invalid: ${P.path}`);q+="; Path="+P.path}if(P.expires){if(!S(P.expires)||!Number.isFinite(P.expires.valueOf()))throw new TypeError(`option expires is invalid: ${P.expires}`);q+="; Expires="+P.expires.toUTCString()}if(P.httpOnly&&(q+="; HttpOnly"),P.secure&&(q+="; Secure"),P.partitioned&&(q+="; Partitioned"),P.priority)switch(typeof P.priority=="string"?P.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${P.priority}`)}if(P.sameSite)switch(typeof P.sameSite=="string"?P.sameSite.toLowerCase():P.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${P.sameSite}`)}return q}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function S(T){return o.call(T)==="[object Date]"}return Wa}oE();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fg="popstate";function aE(r={}){function e(s,o){let{pathname:a,search:u,hash:h}=s.location;return Gh("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:al(o)}return uE(e,t,null,r)}function it(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function rr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lE(){return Math.random().toString(36).substring(2,10)}function Ug(r,e){return{usr:r.state,key:r.key,idx:e}}function Gh(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:t,key:e&&e.key||s||lE()}}function al({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Go(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function uE(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:a=!1}=s,u=o.history,h="POP",p=null,g=_();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function _(){return(u.state||{idx:null}).idx}function S(){h="POP";let j=_(),q=j==null?null:j-g;g=j,p&&p({action:h,location:D.location,delta:q})}function T(j,q){h="PUSH";let Q=Gh(D.location,j,q);g=_()+1;let H=Ug(Q,g),X=D.createHref(Q);try{u.pushState(H,"",X)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(X)}a&&p&&p({action:h,location:D.location,delta:1})}function C(j,q){h="REPLACE";let Q=Gh(D.location,j,q);g=_();let H=Ug(Q,g),X=D.createHref(Q);u.replaceState(H,"",X),a&&p&&p({action:h,location:D.location,delta:0})}function P(j){let q=o.location.origin!=="null"?o.location.origin:o.location.href,Q=typeof j=="string"?j:al(j);return Q=Q.replace(/ $/,"%20"),it(q,`No window.location.(origin|href) available to create URL for href: ${Q}`),new URL(Q,q)}let D={get action(){return h},get location(){return r(o,u)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Fg,S),p=j,()=>{o.removeEventListener(Fg,S),p=null}},createHref(j){return e(o,j)},createURL:P,encodeLocation(j){let q=P(j);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:T,replace:C,go(j){return u.go(j)}};return D}function hv(r,e,t="/"){return cE(r,e,t,!1)}function cE(r,e,t,s){let o=typeof e=="string"?Go(e):e,a=Us(o.pathname||"/",t);if(a==null)return null;let u=fv(r);dE(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let g=SE(a);h=wE(u[p],g,s)}return h}function fv(r,e=[],t=[],s=""){let o=(a,u,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(it(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=Wr([s,p.relativePath]),_=t.concat(p);a.children&&a.children.length>0&&(it(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),fv(a.children,e,_,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:vE(g,a.index),routesMeta:_})};return r.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,u);else for(let p of pv(a.path))o(a,u,p)}),e}function pv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let u=pv(s.join("/")),h=[];return h.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&h.push(...u),h.map(p=>r.startsWith("/")&&p===""?"/":p)}function dE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:_E(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var hE=/^:[\w-]+$/,fE=3,pE=2,mE=1,gE=10,yE=-2,Bg=r=>r==="*";function vE(r,e){let t=r.split("/"),s=t.length;return t.some(Bg)&&(s+=yE),e&&(s+=pE),t.filter(o=>!Bg(o)).reduce((o,a)=>o+(hE.test(a)?fE:a===""?mE:gE),s)}function _E(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function wE(r,e,t=!1){let{routesMeta:s}=r,o={},a="/",u=[];for(let h=0;h<s.length;++h){let p=s[h],g=h===s.length-1,_=a==="/"?e:e.slice(a.length)||"/",S=dc({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),T=p.route;if(!S&&g&&t&&!s[s.length-1].route.index&&(S=dc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!S)return null;Object.assign(o,S.params),u.push({params:o,pathname:Wr([a,S.pathname]),pathnameBase:CE(Wr([a,S.pathnameBase])),route:T}),S.pathnameBase!=="/"&&(a=Wr([a,S.pathnameBase]))}return u}function dc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=EE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:S},T)=>{if(_==="*"){let P=h[T]||"";u=a.slice(0,a.length-P.length).replace(/(.)\/+$/,"$1")}const C=h[T];return S&&!C?g[_]=void 0:g[_]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:u,pattern:r}}function EE(r,e=!1,t=!0){rr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,p)=>(s.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function SE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Us(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function TE(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Go(r):r;return{pathname:t?t.startsWith("/")?t:IE(t,e):e,search:xE(s),hash:kE(o)}}function IE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function jh(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ef(r){let e=PE(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Sf(r,e,t,s=!1){let o;typeof r=="string"?o=Go(r):(o={...r},it(!o.pathname||!o.pathname.includes("?"),jh("?","pathname","search",o)),it(!o.pathname||!o.pathname.includes("#"),jh("#","pathname","hash",o)),it(!o.search||!o.search.includes("#"),jh("#","search","hash",o)));let a=r===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=t;else{let S=e.length-1;if(!s&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),S-=1;o.pathname=T.join("/")}h=S>=0?e[S]:"/"}let p=TE(o,h),g=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Wr=r=>r.join("/").replace(/\/\/+/g,"/"),CE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),xE=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,kE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function AE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var mv=["POST","PUT","PATCH","DELETE"];new Set(mv);var RE=["GET",...mv];new Set(RE);var Ko=k.createContext(null);Ko.displayName="DataRouter";var Rc=k.createContext(null);Rc.displayName="DataRouterState";var gv=k.createContext({isTransitioning:!1});gv.displayName="ViewTransition";var NE=k.createContext(new Map);NE.displayName="Fetchers";var DE=k.createContext(null);DE.displayName="Await";var or=k.createContext(null);or.displayName="Navigation";var vl=k.createContext(null);vl.displayName="Location";var ar=k.createContext({outlet:null,matches:[],isDataRoute:!1});ar.displayName="Route";var Tf=k.createContext(null);Tf.displayName="RouteError";function jE(r,{relative:e}={}){it(Qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=k.useContext(or),{hash:o,pathname:a,search:u}=_l(r,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:Wr([t,a])),s.createHref({pathname:h,search:u,hash:o})}function Qo(){return k.useContext(vl)!=null}function Zr(){return it(Qo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(vl).location}var yv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vv(r){k.useContext(or).static||k.useLayoutEffect(r)}function es(){let{isDataRoute:r}=k.useContext(ar);return r?WE():bE()}function bE(){it(Qo(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(Ko),{basename:e,navigator:t}=k.useContext(or),{matches:s}=k.useContext(ar),{pathname:o}=Zr(),a=JSON.stringify(Ef(s)),u=k.useRef(!1);return vv(()=>{u.current=!0}),k.useCallback((p,g={})=>{if(rr(u.current,yv),!u.current)return;if(typeof p=="number"){t.go(p);return}let _=Sf(p,JSON.parse(a),o,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Wr([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,a,o,r])}k.createContext(null);function _v(){let{matches:r}=k.useContext(ar),e=r[r.length-1];return e?e.params:{}}function _l(r,{relative:e}={}){let{matches:t}=k.useContext(ar),{pathname:s}=Zr(),o=JSON.stringify(Ef(t));return k.useMemo(()=>Sf(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function OE(r,e){return wv(r,e)}function wv(r,e,t,s){var q;it(Qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(or),{matches:a}=k.useContext(ar),u=a[a.length-1],h=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",_=u&&u.route;{let Q=_&&_.path||"";Ev(p,!_||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let S=Zr(),T;if(e){let Q=typeof e=="string"?Go(e):e;it(g==="/"||((q=Q.pathname)==null?void 0:q.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),T=Q}else T=S;let C=T.pathname||"/",P=C;if(g!=="/"){let Q=g.replace(/^\//,"").split("/");P="/"+C.replace(/^\//,"").split("/").slice(Q.length).join("/")}let D=hv(r,{pathname:P});rr(_||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),rr(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=UE(D&&D.map(Q=>Object.assign({},Q,{params:Object.assign({},h,Q.params),pathname:Wr([g,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?g:Wr([g,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),a,t,s);return e&&j?k.createElement(vl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},j):j}function LE(){let r=HE(),e=AE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:o},t):null,u)}var VE=k.createElement(LE,null),ME=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?k.createElement(ar.Provider,{value:this.props.routeContext},k.createElement(Tf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FE({routeContext:r,match:e,children:t}){let s=k.useContext(Ko);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(ar.Provider,{value:r},t)}function UE(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,a=t==null?void 0:t.errors;if(a!=null){let p=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);it(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:_,errors:S}=t,T=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||T){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,g,_)=>{let S,T=!1,C=null,P=null;t&&(S=a&&g.route.id?a[g.route.id]:void 0,C=g.route.errorElement||VE,u&&(h<0&&_===0?(Ev("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,P=null):h===_&&(T=!0,P=g.route.hydrateFallbackElement||null)));let D=e.concat(o.slice(0,_+1)),j=()=>{let q;return S?q=C:T?q=P:g.route.Component?q=k.createElement(g.route.Component,null):g.route.element?q=g.route.element:q=p,k.createElement(FE,{match:g,routeContext:{outlet:p,matches:D,isDataRoute:t!=null},children:q})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?k.createElement(ME,{location:t.location,revalidation:t.revalidation,component:C,error:S,children:j(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):j()},null)}function If(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BE(r){let e=k.useContext(Ko);return it(e,If(r)),e}function zE(r){let e=k.useContext(Rc);return it(e,If(r)),e}function $E(r){let e=k.useContext(ar);return it(e,If(r)),e}function Pf(r){let e=$E(r),t=e.matches[e.matches.length-1];return it(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function qE(){return Pf("useRouteId")}function HE(){var s;let r=k.useContext(Tf),e=zE("useRouteError"),t=Pf("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function WE(){let{router:r}=BE("useNavigate"),e=Pf("useNavigate"),t=k.useRef(!1);return vv(()=>{t.current=!0}),k.useCallback(async(o,a={})=>{rr(t.current,yv),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...a}))},[r,e])}var zg={};function Ev(r,e,t){!e&&!zg[r]&&(zg[r]=!0,rr(!1,t))}k.memo(GE);function GE({routes:r,future:e,state:t}){return wv(r,void 0,t,e)}function ll({to:r,replace:e,state:t,relative:s}){it(Qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(or);rr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(ar),{pathname:u}=Zr(),h=es(),p=Sf(r,Ef(a),u,s==="path"),g=JSON.stringify(p);return k.useEffect(()=>{h(JSON.parse(g),{replace:e,state:t,relative:s})},[h,g,s,e,t]),null}function qe(r){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KE({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:a=!1}){it(!Qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof t=="string"&&(t=Go(t));let{pathname:p="/",search:g="",hash:_="",state:S=null,key:T="default"}=t,C=k.useMemo(()=>{let P=Us(p,u);return P==null?null:{location:{pathname:P,search:g,hash:_,state:S,key:T},navigationType:s}},[u,p,g,_,S,T,s]);return rr(C!=null,`<Router basename="${u}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:k.createElement(or.Provider,{value:h},k.createElement(vl.Provider,{children:e,value:C}))}function QE({children:r,location:e}){return OE(Kh(r),e)}function Kh(r,e=[]){let t=[];return k.Children.forEach(r,(s,o)=>{if(!k.isValidElement(s))return;let a=[...e,o];if(s.type===k.Fragment){t.push.apply(t,Kh(s.props.children,a));return}it(s.type===qe,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Kh(s.props.children,a)),t.push(u)}),t}var Zu="get",ec="application/x-www-form-urlencoded";function Nc(r){return r!=null&&typeof r.tagName=="string"}function YE(r){return Nc(r)&&r.tagName.toLowerCase()==="button"}function XE(r){return Nc(r)&&r.tagName.toLowerCase()==="form"}function JE(r){return Nc(r)&&r.tagName.toLowerCase()==="input"}function ZE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function eS(r,e){return r.button===0&&(!e||e==="_self")&&!ZE(r)}var Wu=null;function tS(){if(Wu===null)try{new FormData(document.createElement("form"),0),Wu=!1}catch{Wu=!0}return Wu}var nS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bh(r){return r!=null&&!nS.has(r)?(rr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ec}"`),null):r}function rS(r,e){let t,s,o,a,u;if(XE(r)){let h=r.getAttribute("action");s=h?Us(h,e):null,t=r.getAttribute("method")||Zu,o=bh(r.getAttribute("enctype"))||ec,a=new FormData(r)}else if(YE(r)||JE(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||h.getAttribute("action");if(s=p?Us(p,e):null,t=r.getAttribute("formmethod")||h.getAttribute("method")||Zu,o=bh(r.getAttribute("formenctype"))||bh(h.getAttribute("enctype"))||ec,a=new FormData(h,r),!tS()){let{name:g,type:_,value:S}=r;if(_==="image"){let T=g?`${g}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else g&&a.append(g,S)}}else{if(Nc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zu,s=null,o=ec,u=r}return a&&o==="text/plain"&&(u=a,a=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:a,body:u}}function Cf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function sS(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function oS(r,e,t){let s=await Promise.all(r.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await sS(a,t);return u.links?u.links():[]}return[]}));return cS(s.flat(1).filter(iS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function $g(r,e,t,s,o,a){let u=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,h=(p,g)=>{var _;return t[g].pathname!==p.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,g)=>u(p,g)||h(p,g)):a==="data"?e.filter((p,g)=>{var S;let _=s.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(u(p,g)||h(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=t[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function aS(r,e){return lS(r.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function lS(r){return[...new Set(r)]}function uS(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function cS(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let a=JSON.stringify(uS(o));return t.has(a)||(t.add(a),s.push({key:a,link:o})),s},[])}function dS(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function hS(){let r=k.useContext(Ko);return Cf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function fS(){let r=k.useContext(Rc);return Cf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var xf=k.createContext(void 0);xf.displayName="FrameworkContext";function Sv(){let r=k.useContext(xf);return Cf(r,"You must render this element inside a <HydratedRouter> element"),r}function pS(r,e){let t=k.useContext(xf),[s,o]=k.useState(!1),[a,u]=k.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:S}=e,T=k.useRef(null);k.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let D=q=>{q.forEach(Q=>{u(Q.isIntersecting)})},j=new IntersectionObserver(D,{threshold:.5});return T.current&&j.observe(T.current),()=>{j.disconnect()}}},[r]),k.useEffect(()=>{if(s){let D=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(D)}}},[s]);let C=()=>{o(!0)},P=()=>{o(!1),u(!1)};return t?r!=="intent"?[a,T,{}]:[a,T,{onFocus:Ga(h,C),onBlur:Ga(p,P),onMouseEnter:Ga(g,C),onMouseLeave:Ga(_,P),onTouchStart:Ga(S,C)}]:[!1,T,{}]}function Ga(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function mS({page:r,...e}){let{router:t}=hS(),s=k.useMemo(()=>hv(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?k.createElement(yS,{page:r,matches:s,...e}):null}function gS(r){let{manifest:e,routeModules:t}=Sv(),[s,o]=k.useState([]);return k.useEffect(()=>{let a=!1;return oS(r,e,t).then(u=>{a||o(u)}),()=>{a=!0}},[r,e,t]),s}function yS({page:r,matches:e,...t}){let s=Zr(),{manifest:o,routeModules:a}=Sv(),{loaderData:u,matches:h}=fS(),p=k.useMemo(()=>$g(r,e,h,o,s,"data"),[r,e,h,o,s]),g=k.useMemo(()=>$g(r,e,h,o,s,"assets"),[r,e,h,o,s]),_=k.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let C=new Set,P=!1;if(e.forEach(j=>{var Q;let q=o.routes[j.route.id];!q||!q.hasLoader||(!p.some(H=>H.route.id===j.route.id)&&j.route.id in u&&((Q=a[j.route.id])!=null&&Q.shouldRevalidate)||q.hasClientLoader?P=!0:C.add(j.route.id))}),C.size===0)return[];let D=dS(r);return P&&C.size>0&&D.searchParams.set("_routes",e.filter(j=>C.has(j.route.id)).map(j=>j.route.id).join(",")),[D.pathname+D.search]},[u,s,o,p,e,r,a]),S=k.useMemo(()=>aS(g,o),[g,o]),T=gS(g);return k.createElement(k.Fragment,null,_.map(C=>k.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),S.map(C=>k.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),T.map(({key:C,link:P})=>k.createElement("link",{key:C,...P})))}function vS(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tv&&(window.__reactRouterVersion="7.1.1")}catch{}function _S({basename:r,children:e,window:t}){let s=k.useRef();s.current==null&&(s.current=aE({window:t,v5Compat:!0}));let o=s.current,[a,u]=k.useState({action:o.action,location:o.location}),h=k.useCallback(p=>{k.startTransition(()=>u(p))},[u]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.createElement(KE,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:o})}var Iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=k.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:a,replace:u,state:h,target:p,to:g,preventScrollReset:_,viewTransition:S,...T},C){let{basename:P}=k.useContext(or),D=typeof g=="string"&&Iv.test(g),j,q=!1;if(typeof g=="string"&&D&&(j=g,Tv))try{let x=new URL(window.location.href),O=g.startsWith("//")?new URL(x.protocol+g):new URL(g),M=Us(O.pathname,P);O.origin===x.origin&&M!=null?g=M+O.search+O.hash:q=!0}catch{rr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=jE(g,{relative:o}),[H,X,ye]=pS(s,T),pe=TS(g,{replace:u,state:h,target:p,preventScrollReset:_,relative:o,viewTransition:S});function b(x){e&&e(x),x.defaultPrevented||pe(x)}let A=k.createElement("a",{...T,...ye,href:j||Q,onClick:q||a?e:b,ref:vS(C,X),target:p,"data-discover":!D&&t==="render"?"true":void 0});return H&&!D?k.createElement(k.Fragment,null,A,k.createElement(mS,{page:Q})):A});Ae.displayName="Link";var wS=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:a,to:u,viewTransition:h,children:p,...g},_){let S=_l(u,{relative:g.relative}),T=Zr(),C=k.useContext(Rc),{navigator:P,basename:D}=k.useContext(or),j=C!=null&&kS(S)&&h===!0,q=P.encodeLocation?P.encodeLocation(S).pathname:S.pathname,Q=T.pathname,H=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),H=H?H.toLowerCase():null,q=q.toLowerCase()),H&&D&&(H=Us(H,D)||H);const X=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ye=Q===q||!o&&Q.startsWith(q)&&Q.charAt(X)==="/",pe=H!=null&&(H===q||!o&&H.startsWith(q)&&H.charAt(q.length)==="/"),b={isActive:ye,isPending:pe,isTransitioning:j},A=ye?e:void 0,x;typeof s=="function"?x=s(b):x=[s,ye?"active":null,pe?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(b):a;return k.createElement(Ae,{...g,"aria-current":A,className:x,ref:_,style:O,to:u,viewTransition:h},typeof p=="function"?p(b):p)});wS.displayName="NavLink";var ES=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:a,method:u=Zu,action:h,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:S,...T},C)=>{let P=CS(),D=xS(h,{relative:g}),j=u.toLowerCase()==="get"?"get":"post",q=typeof h=="string"&&Iv.test(h),Q=H=>{if(p&&p(H),H.defaultPrevented)return;H.preventDefault();let X=H.nativeEvent.submitter,ye=(X==null?void 0:X.getAttribute("formmethod"))||u;P(X||H.currentTarget,{fetcherKey:e,method:ye,navigate:t,replace:o,state:a,relative:g,preventScrollReset:_,viewTransition:S})};return k.createElement("form",{ref:C,method:j,action:D,onSubmit:s?p:Q,...T,"data-discover":!q&&r==="render"?"true":void 0})});ES.displayName="Form";function SS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pv(r){let e=k.useContext(Ko);return it(e,SS(r)),e}function TS(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:a,viewTransition:u}={}){let h=es(),p=Zr(),g=_l(r,{relative:a});return k.useCallback(_=>{if(eS(_,e)){_.preventDefault();let S=t!==void 0?t:al(p)===al(g);h(r,{replace:S,state:s,preventScrollReset:o,relative:a,viewTransition:u})}},[p,h,g,t,s,e,r,o,a,u])}var IS=0,PS=()=>`__${String(++IS)}__`;function CS(){let{router:r}=Pv("useSubmit"),{basename:e}=k.useContext(or),t=qE();return k.useCallback(async(s,o={})=>{let{action:a,method:u,encType:h,formData:p,body:g}=rS(s,e);if(o.navigate===!1){let _=o.fetcherKey||PS();await r.fetch(_,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await r.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function xS(r,{relative:e}={}){let{basename:t}=k.useContext(or),s=k.useContext(ar);it(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),a={..._l(r||".",{relative:e})},u=Zr();if(r==null){a.search=u.search;let h=new URLSearchParams(a.search),p=h.getAll("index");if(p.some(_=>_==="")){h.delete("index"),p.filter(S=>S).forEach(S=>h.append("index",S));let _=h.toString();a.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Wr([t,a.pathname])),al(a)}function kS(r,e={}){let t=k.useContext(gv);it(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Pv("useViewTransitionState"),o=_l(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Us(t.currentLocation.pathname,s)||t.currentLocation.pathname,u=Us(t.nextLocation.pathname,s)||t.nextLocation.pathname;return dc(o.pathname,u)!=null||dc(o.pathname,a)!=null}new TextEncoder;var qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},AS=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=r[t++];e[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=r[t++],u=r[t++],h=r[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const a=r[t++],u=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const a=r[o],u=o+1<r.length,h=u?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,_=a>>2,S=(a&3)<<4|h>>4;let T=(h&15)<<2|g>>6,C=g&63;p||(C=64,u||(T=64)),s.push(t[_],t[S],t[T],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Cv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):AS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const a=t[r.charAt(o++)],h=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,a==null||h==null||g==null||S==null)throw new RS;const T=a<<2|h>>4;if(s.push(T),g!==64){const C=h<<4&240|g>>2;if(s.push(C),S!==64){const P=g<<6&192|S;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class RS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NS=function(r){const e=Cv(r);return xv.encodeByteArray(e,!0)},hc=function(r){return NS(r).replace(/\./g,"")},kv=function(r){try{return xv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=()=>DS().__FIREBASE_DEFAULTS__,bS=()=>{if(typeof process>"u"||typeof qg>"u")return;const r=qg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},OS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&kv(r[1]);return e&&JSON.parse(e)},Dc=()=>{try{return jS()||bS()||OS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Av=r=>{var e,t;return(t=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},LS=r=>{const e=Av(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Rv=()=>{var r;return(r=Dc())===null||r===void 0?void 0:r.config},Nv=r=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[hc(JSON.stringify(t)),hc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function US(){var r;const e=(r=Dc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qS(){const r=Yt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HS(){return!US()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WS(){try{return typeof indexedDB=="object"}catch{return!1}}function GS(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="FirebaseError";class ts extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=KS,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?QS(a,s):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new ts(o,h,s)}}function QS(r,e){return r.replace(YS,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const YS=/\{\$([^}]+)}/g;function XS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function fc(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const a=r[o],u=e[o];if(Hg(a)&&Hg(u)){if(!fc(a,u))return!1}else if(a!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Hg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ya(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,a]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Xa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function JS(r,e){const t=new ZS(r,e);return t.subscribe.bind(t)}class ZS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");eT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Oh),o.error===void 0&&(o.error=Oh),o.complete===void 0&&(o.complete=Oh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r){return r&&r._delegate?r._delegate:r}class Di{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new VS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rT(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&u.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nT(r){return r===xi?void 0:r}function rT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const iT={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},oT=je.INFO,aT={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},lT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=aT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kf{constructor(e){this.name=e,this._logLevel=oT,this._logHandler=lT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const uT=(r,e)=>e.some(t=>r instanceof t);let Wg,Gg;function cT(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dv=new WeakMap,Qh=new WeakMap,jv=new WeakMap,Lh=new WeakMap,Af=new WeakMap;function hT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{t(Ls(r.result)),o()},u=()=>{s(r.error),o()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Dv.set(t,r)}).catch(()=>{}),Af.set(e,r),e}function fT(r){if(Qh.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});Qh.set(r,e)}let Yh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||jv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ls(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pT(r){Yh=r(Yh)}function mT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Vh(this),e,...t);return jv.set(s,e.sort?e.sort():[e]),Ls(s)}:dT().includes(r)?function(...e){return r.apply(Vh(this),e),Ls(Dv.get(this))}:function(...e){return Ls(r.apply(Vh(this),e))}}function gT(r){return typeof r=="function"?mT(r):(r instanceof IDBTransaction&&fT(r),uT(r,cT())?new Proxy(r,Yh):r)}function Ls(r){if(r instanceof IDBRequest)return hT(r);if(Lh.has(r))return Lh.get(r);const e=gT(r);return e!==r&&(Lh.set(r,e),Af.set(e,r)),e}const Vh=r=>Af.get(r);function yT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:a}={}){const u=indexedDB.open(r,e),h=Ls(u);return s&&u.addEventListener("upgradeneeded",p=>{s(Ls(u.result),p.oldVersion,p.newVersion,Ls(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const vT=["get","getKey","getAll","getAllKeys","count"],_T=["put","add","delete","clear"],Mh=new Map;function Kg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Mh.get(e))return Mh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=_T.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vT.includes(t)))return;const a=async function(u,...h){const p=this.transaction(u,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),o&&p.done]))[0]};return Mh.set(e,a),a}pT(r=>({...r,get:(e,t,s)=>Kg(e,t)||r.get(e,t,s),has:(e,t)=>!!Kg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ET(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function ET(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xh="@firebase/app",Qg="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new kf("@firebase/app"),ST="@firebase/app-compat",TT="@firebase/analytics-compat",IT="@firebase/analytics",PT="@firebase/app-check-compat",CT="@firebase/app-check",xT="@firebase/auth",kT="@firebase/auth-compat",AT="@firebase/database",RT="@firebase/data-connect",NT="@firebase/database-compat",DT="@firebase/functions",jT="@firebase/functions-compat",bT="@firebase/installations",OT="@firebase/installations-compat",LT="@firebase/messaging",VT="@firebase/messaging-compat",MT="@firebase/performance",FT="@firebase/performance-compat",UT="@firebase/remote-config",BT="@firebase/remote-config-compat",zT="@firebase/storage",$T="@firebase/storage-compat",qT="@firebase/firestore",HT="@firebase/vertexai",WT="@firebase/firestore-compat",GT="firebase",KT="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",QT={[Xh]:"fire-core",[ST]:"fire-core-compat",[IT]:"fire-analytics",[TT]:"fire-analytics-compat",[CT]:"fire-app-check",[PT]:"fire-app-check-compat",[xT]:"fire-auth",[kT]:"fire-auth-compat",[AT]:"fire-rtdb",[RT]:"fire-data-connect",[NT]:"fire-rtdb-compat",[DT]:"fire-fn",[jT]:"fire-fn-compat",[bT]:"fire-iid",[OT]:"fire-iid-compat",[LT]:"fire-fcm",[VT]:"fire-fcm-compat",[MT]:"fire-perf",[FT]:"fire-perf-compat",[UT]:"fire-rc",[BT]:"fire-rc-compat",[zT]:"fire-gcs",[$T]:"fire-gcs-compat",[qT]:"fire-fst",[WT]:"fire-fst-compat",[HT]:"fire-vertex","fire-js":"fire-js",[GT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Map,YT=new Map,Zh=new Map;function Yg(r,e){try{r.container.addComponent(e)}catch(t){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Vo(r){const e=r.name;if(Zh.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,r);for(const t of pc.values())Yg(t,r);for(const t of YT.values())Yg(t,r);return!0}function Rf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function tr(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new wl("app","Firebase",XT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=KT;function bv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Jh,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Vs.create("bad-app-name",{appName:String(o)});if(t||(t=Rv()),!t)throw Vs.create("no-options");const a=pc.get(o);if(a){if(fc(t,a.options)&&fc(s,a.config))return a;throw Vs.create("duplicate-app",{appName:o})}const u=new sT(o);for(const p of Zh.values())u.addComponent(p);const h=new JT(t,s,u);return pc.set(o,h),h}function Ov(r=Jh){const e=pc.get(r);if(!e&&r===Jh&&Rv())return bv();if(!e)throw Vs.create("no-app",{appName:r});return e}function Ms(r,e,t){var s;let o=(s=QT[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(h.join(" "));return}Vo(new Di(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="firebase-heartbeat-database",eI=1,ul="firebase-heartbeat-store";let Fh=null;function Lv(){return Fh||(Fh=yT(ZT,eI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(r=>{throw Vs.create("idb-open",{originalErrorMessage:r.message})})),Fh}async function tI(r){try{const t=(await Lv()).transaction(ul),s=await t.objectStore(ul).get(Vv(r));return await t.done,s}catch(e){if(e instanceof ts)Qr.warn(e.message);else{const t=Vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(t.message)}}}async function Xg(r,e){try{const s=(await Lv()).transaction(ul,"readwrite");await s.objectStore(ul).put(e,Vv(r)),await s.done}catch(t){if(t instanceof ts)Qr.warn(t.message);else{const s=Vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Qr.warn(s.message)}}}function Vv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1024,rI=30*24*60*60*1e3;class sI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Jg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=rI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Qr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jg(),{heartbeatsToSend:s,unsentEntries:o}=iI(this._heartbeatsCache.heartbeats),a=hc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Qr.warn(t),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function iI(r,e=nI){const t=[];let s=r.slice();for(const o of r){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Zg(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class oI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WS()?GS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zg(r){return hc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(r){Vo(new Di("platform-logger",e=>new wT(e),"PRIVATE")),Vo(new Di("heartbeat",e=>new sI(e),"PRIVATE")),Ms(Xh,Qg,r),Ms(Xh,Qg,"esm2017"),Ms("fire-js","")}aI("");var lI="firebase",uI="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(lI,uI,"app");function Nf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Mv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cI=Mv,Fv=new wl("auth","Firebase",Mv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new kf("@firebase/auth");function dI(r,...e){mc.logLevel<=je.WARN&&mc.warn(`Auth (${Yo}): ${r}`,...e)}function tc(r,...e){mc.logLevel<=je.ERROR&&mc.error(`Auth (${Yo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(r,...e){throw jf(r,...e)}function nr(r,...e){return jf(r,...e)}function Df(r,e,t){const s=Object.assign(Object.assign({},cI()),{[e]:t});return new wl("auth","Firebase",s).create(e,{appName:r.name})}function Gr(r){return Df(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&On(r,"argument-error"),Df(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Fv.create(r,...e)}function Se(r,e,...t){if(!r)throw jf(e,...t)}function $r(r){const e="INTERNAL ASSERTION FAILED: "+r;throw tc(e),new Error(e)}function Yr(r,e){r||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function fI(){return ey()==="http:"||ey()==="https:"}function ey(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fI()||zS()||"connection"in navigator)?navigator.onLine:!0}function mI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yr(t>e,"Short delay should be less than long delay!"),this.isMobile=FS()||$S()}get(){return pI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(r,e){Yr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Sl(3e4,6e4);function Gs(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function ns(r,e,t,s,o={}){return Bv(r,o,async()=>{let a={},u={};s&&(e==="GET"?u=s:a={body:JSON.stringify(s)});const h=El(Object.assign({key:r.config.apiKey},u)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},a);return BS()||(g.referrerPolicy="no-referrer"),Uv.fetch()(zv(r,r.config.apiHost,t,h),g)})}async function Bv(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},gI),e);try{const o=new _I(r),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Gu(r,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(r,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Gu(r,"email-already-in-use",u);if(p==="USER_DISABLED")throw Gu(r,"user-disabled",u);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Df(r,_,g);On(r,_)}}catch(o){if(o instanceof ts)throw o;On(r,"network-request-failed",{message:String(o)})}}async function Tl(r,e,t,s,o={}){const a=await ns(r,e,t,s,o);return"mfaPendingCredential"in a&&On(r,"multi-factor-auth-required",{_serverResponse:a}),a}function zv(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?bf(r.config,o):`${r.config.apiScheme}://${o}`}function vI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _I{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(nr(this.auth,"network-request-failed")),yI.get())})}}function Gu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=nr(r,e,s);return o.customData._tokenResponse=t,o}function ty(r){return r!==void 0&&r.enterprise!==void 0}class wI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EI(r,e){return ns(r,"GET","/v2/recaptchaConfig",Gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(r,e){return ns(r,"POST","/v1/accounts:delete",e)}async function $v(r,e){return ns(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TI(r,e=!1){const t=At(r),s=await t.getIdToken(e),o=Of(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:s,authTime:nl(Uh(o.auth_time)),issuedAtTime:nl(Uh(o.iat)),expirationTime:nl(Uh(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Uh(r){return Number(r)*1e3}function Of(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const o=kv(t);return o?JSON.parse(o):(tc("Failed to decode base64 JWT payload"),null)}catch(o){return tc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ny(r){const e=Of(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ts&&II(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function II({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Mo(r,$v(t,{idToken:s}));Se(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];r._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?qv(a.providerUserInfo):[],h=xI(r.providerData,u),p=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(h!=null&&h.length),_=p?g:!1,S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new tf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(r,S)}async function CI(r){const e=At(r);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function qv(r){return r.map(e=>{var{providerId:t}=e,s=Nf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(r,e){const t=await Bv(r,{},async()=>{const s=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=r.config,u=zv(r,o,"/v1/token",`key=${a}`),h=await r._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Uv.fetch()(u,{method:"POST",headers:h,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AI(r,e){return ns(r,"POST","/v2/accounts:revokeToken",Gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:a}=await kI(e,t);this.updateTokensAndExpiration(s,o,Number(a))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:a}=t,u=new Do;return s&&(Se(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Se(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,a=Nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new tf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Mo(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TI(this,e)}reload(){return CI(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await gc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Gr(this.auth));const e=await this.getIdToken();return await Mo(this,SI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,a,u,h,p,g,_;const S=(s=t.displayName)!==null&&s!==void 0?s:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,C=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,P=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(h=t.tenantId)!==null&&h!==void 0?h:void 0,j=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,q=(g=t.createdAt)!==null&&g!==void 0?g:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:H,emailVerified:X,isAnonymous:ye,providerData:pe,stsTokenManager:b}=t;Se(H&&b,e,"internal-error");const A=Do.fromJSON(this.name,b);Se(typeof H=="string",e,"internal-error"),Ns(S,e.name),Ns(T,e.name),Se(typeof X=="boolean",e,"internal-error"),Se(typeof ye=="boolean",e,"internal-error"),Ns(C,e.name),Ns(P,e.name),Ns(D,e.name),Ns(j,e.name),Ns(q,e.name),Ns(Q,e.name);const x=new qr({uid:H,auth:e,email:T,emailVerified:X,displayName:S,isAnonymous:ye,photoURL:P,phoneNumber:C,tenantId:D,stsTokenManager:A,createdAt:q,lastLoginAt:Q});return pe&&Array.isArray(pe)&&(x.providerData=pe.map(O=>Object.assign({},O))),j&&(x._redirectEventId=j),x}static async _fromIdTokenResponse(e,t,s=!1){const o=new Do;o.updateFromServerResponse(t);const a=new qr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await gc(a),a}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?qv(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),h=new Do;h.updateFromIdToken(s);const p=new qr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;function Hr(r){Yr(r instanceof Function,"Expected a class definition");let e=ry.get(r);return e?(Yr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ry.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hv.type="NONE";const sy=Hv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(r,e,t){return`firebase:${r}:${e}:${t}`}class jo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:a}=this.auth;this.fullUserKey=nc(this.userKey,o.apiKey,a),this.fullPersistenceKey=nc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new jo(Hr(sy),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=o[0]||Hr(sy);const u=nc(s,e.config.apiKey,e.name);let h=null;for(const g of t)try{const _=await g._get(u);if(_){const S=qr._fromJSON(e,_);g!==a&&(h=S),a=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new jo(a,e,s):(a=p[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==a)try{await g._remove(u)}catch{}})),new jo(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xv(e))return"Blackberry";if(Jv(e))return"Webos";if(Gv(e))return"Safari";if((e.includes("chrome/")||Kv(e))&&!e.includes("edge/"))return"Chrome";if(Yv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Wv(r=Yt()){return/firefox\//i.test(r)}function Gv(r=Yt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kv(r=Yt()){return/crios\//i.test(r)}function Qv(r=Yt()){return/iemobile/i.test(r)}function Yv(r=Yt()){return/android/i.test(r)}function Xv(r=Yt()){return/blackberry/i.test(r)}function Jv(r=Yt()){return/webos/i.test(r)}function Lf(r=Yt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function RI(r=Yt()){var e;return Lf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NI(){return qS()&&document.documentMode===10}function Zv(r=Yt()){return Lf(r)||Yv(r)||Jv(r)||Xv(r)||/windows phone/i.test(r)||Qv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(r,e=[]){let t;switch(r){case"Browser":t=iy(Yt());break;case"Worker":t=`${iy(Yt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=a=>new Promise((u,h)=>{try{const p=e(a);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(r,e={}){return ns(r,"GET","/v2/passwordPolicy",Gs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=6;class OI{constructor(e){var t,s,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:bI,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,a,u,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oy(this),this.idTokenSubscription=new oy(this),this.beforeStateQueue=new DI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hr(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $v(this,{idToken:e}),s=await qr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Gr(this));const t=e?At(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jI(this),t=new OI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await AI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[Hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ks(r){return At(r)}class oy{constructor(e){this.auth=e,this.observer=null,this.addObserver=JS(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VI(r){jc=r}function t_(r){return jc.loadJS(r)}function MI(){return jc.recaptchaEnterpriseScript}function FI(){return jc.gapiScript}function UI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class BI{constructor(){this.enterprise=new zI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $I="recaptcha-enterprise",n_="NO_RECAPTCHA";class qI{constructor(e){this.type=$I,this.auth=Ks(e)}async verify(e="verify",t=!1){async function s(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{EI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new wI(p);return a.tenantId==null?a._agentRecaptchaConfig=g:a._tenantRecaptchaConfigs[a.tenantId]=g,u(g.siteKey)}}).catch(p=>{h(p)})})}function o(a,u,h){const p=window.grecaptcha;ty(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(g=>{u(g)}).catch(()=>{u(n_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BI().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{s(this.auth).then(h=>{if(!t&&ty(window.grecaptcha))o(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=MI();p.length!==0&&(p+=h),t_(p).then(()=>{o(h,a,u)}).catch(g=>{u(g)})}}).catch(h=>{u(h)})})}}async function ay(r,e,t,s=!1,o=!1){const a=new qI(r);let u;if(o)u=n_;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function nf(r,e,t,s,o){var a;if(!((a=r._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ay(r,e,t,t==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ay(r,e,t,t==="getOobCode");return s(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(r,e){const t=Rf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(fc(a,e??{}))return o;On(o,"already-initialized")}return t.initialize({options:e})}function WI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Hr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function GI(r,e,t){const s=Ks(r);Se(s._canInitEmulator,s,"emulator-config-failed"),Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,a=r_(e),{host:u,port:h}=KI(e),p=h===null?"":`:${h}`;s.config.emulator={url:`${a}//${u}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),QI()}function r_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function KI(r){const e=r_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const a=o[1];return{host:a,port:ly(s.substr(a.length+1))}}else{const[a,u]=s.split(":");return{host:a,port:ly(u)}}}function ly(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function QI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function YI(r,e){return ns(r,"POST","/v1/accounts:update",e)}async function XI(r,e){return ns(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e){return Tl(r,"POST","/v1/accounts:signInWithPassword",Gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e){return Tl(r,"POST","/v1/accounts:signInWithEmailLink",Gs(r,e))}async function eP(r,e){return Tl(r,"POST","/v1/accounts:signInWithEmailLink",Gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Vf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new cl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new cl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,t,"signInWithPassword",JI);case"emailLink":return ZI(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,s,"signUpPassword",XI);case"emailLink":return eP(e,{idToken:t,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(r,e){return Tl(r,"POST","/v1/accounts:signInWithIdp",Gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="http://localhost";class ji extends Vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):On("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,a=Nf(t,["providerId","signInMethod"]);if(!s||!o)return null;const u=new ji(s,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,bo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:tP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rP(r){const e=Ya(Xa(r)).link,t=e?Ya(Xa(e)).deep_link_id:null,s=Ya(Xa(r)).deep_link_id;return(s?Ya(Xa(s)).link:null)||s||t||e||r}class Mf{constructor(e){var t,s,o,a,u,h;const p=Ya(Xa(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(s=p.oobCode)!==null&&s!==void 0?s:null,S=nP((o=p.mode)!==null&&o!==void 0?o:null);Se(g&&_&&S,"argument-error"),this.apiKey=g,this.operation=S,this.code=_,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=rP(e);try{return new Mf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.providerId=Li.PROVIDER_ID}static credential(e,t){return cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Mf.parseLink(t);return Se(s,"argument-error"),cl._fromEmailAndCode(e,s.code,s.tenantId)}}Li.PROVIDER_ID="password";Li.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Il{constructor(){super("facebook.com")}static credential(e){return ji._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ji._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return zr.credential(t,s)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Il{constructor(){super("github.com")}static credential(e){return ji._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Il{constructor(){super("twitter.com")}static credential(e,t){return ji._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return bs.credential(t,s)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(r,e){return Tl(r,"POST","/v1/accounts:signUp",Gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const a=await qr._fromIdTokenResponse(e,s,o),u=uy(s);return new bi({user:a,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=uy(s);return new bi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function uy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends ts{constructor(e,t,s,o){var a;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new yc(e,t,s,o)}}function s_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?yc._fromErrorAndOperation(r,a,e,s):a})}async function iP(r,e,t=!1){const s=await Mo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return bi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(r,e,t=!1){const{auth:s}=r;if(tr(s.app))return Promise.reject(Gr(s));const o="reauthenticate";try{const a=await Mo(r,s_(s,o,e,r),t);Se(a.idToken,s,"internal-error");const u=Of(a.idToken);Se(u,s,"internal-error");const{sub:h}=u;return Se(r.uid===h,s,"user-mismatch"),bi._forOperation(r,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&On(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(r,e,t=!1){if(tr(r.app))return Promise.reject(Gr(r));const s="signIn",o=await s_(r,s,e),a=await bi._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(a.user),a}async function oP(r,e){return o_(Ks(r),e)}async function aP(r,e){return i_(At(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(r){const e=Ks(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lP(r,e,t){if(tr(r.app))return Promise.reject(Gr(r));const s=Ks(r),u=await nf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sP).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&a_(r),p}),h=await bi._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function uP(r,e,t){return tr(r.app)?Promise.reject(Gr(r)):oP(At(r),Li.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&a_(r),s})}function cP(r,e){return dP(At(r),null,e)}async function dP(r,e,t){const{auth:s}=r,a={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const u=await Mo(r,YI(s,a));await r._updateTokensIfNecessary(u,!0)}function hP(r,e,t,s){return At(r).onIdTokenChanged(e,t,s)}function fP(r,e,t){return At(r).beforeAuthStateChanged(e,t)}function l_(r,e,t,s){return At(r).onAuthStateChanged(e,t,s)}const vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=1e3,mP=10;class c_ extends u_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},a=this.storage.getItem(s);NI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mP):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},pP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}c_.type="LOCAL";const gP=c_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends u_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}d_.type="SESSION";const h_=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new bc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const h=Array.from(u).map(async g=>g(t.origin,a)),p=await yP(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((h,p)=>{const g=Uf("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(S){const T=S;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function _P(r){Er().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function wP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EP(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function SP(){return f_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="firebaseLocalStorageDb",TP=1,_c="firebaseLocalStorage",m_="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oc(r,e){return r.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function IP(){const r=indexedDB.deleteDatabase(p_);return new Pl(r).toPromise()}function rf(){const r=indexedDB.open(p_,TP);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(_c,{keyPath:m_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(_c)?e(s):(s.close(),await IP(),e(await rf()))})})}async function cy(r,e,t){const s=Oc(r,!0).put({[m_]:e,value:t});return new Pl(s).toPromise()}async function PP(r,e){const t=Oc(r,!1).get(e),s=await new Pl(t).toPromise();return s===void 0?null:s.value}function dy(r,e){const t=Oc(r,!0).delete(e);return new Pl(t).toPromise()}const CP=800,xP=3;class g_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>xP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bc._getInstance(SP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await wP(),!this.activeServiceWorker)return;this.sender=new vP(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await cy(e,vc,"1"),await dy(e,vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>cy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>PP(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Oc(o,!1).getAll();return new Pl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g_.type="LOCAL";const kP=g_;new Sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r,e){return e?Hr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Vf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AP(r){return o_(r.auth,new Bf(r),r.bypassAuthState)}function RP(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),i_(t,new Bf(r),r.bypassAuthState)}async function NP(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),iP(t,new Bf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,s,o,a=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AP;case"linkViaPopup":case"linkViaRedirect":return NP;case"reauthViaPopup":case"reauthViaRedirect":return RP;default:On(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new Sl(2e3,1e4);async function jP(r,e,t){if(tr(r.app))return Promise.reject(nr(r,"operation-not-supported-in-this-environment"));const s=Ks(r);hI(r,e,Ff);const o=y_(s,t);return new Ai(s,"signInViaPopup",e,o).executeNotNull()}class Ai extends v_{constructor(e,t,s,o,a){super(e,t,o,a),this.provider=s,this.authWindow=null,this.pollId=null,Ai.currentPopupAction&&Ai.currentPopupAction.cancel(),Ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DP.get())};e()}}Ai.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="pendingRedirect",rc=new Map;class OP extends v_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const s=await LP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LP(r,e){const t=FP(e),s=MP(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function VP(r,e){rc.set(r._key(),e)}function MP(r){return Hr(r._redirectPersistence)}function FP(r){return nc(bP,r.config.apiKey,r.name)}async function UP(r,e,t=!1){if(tr(r.app))return Promise.reject(Gr(r));const s=Ks(r),o=y_(s,e),u=await new OP(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=10*60*1e3;class zP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$P(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!__(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BP&&this.cachedEventUids.clear(),this.cachedEventUids.has(hy(e))}saveEventToCache(e){this.cachedEventUids.add(hy(e)),this.lastProcessedEventTime=Date.now()}}function hy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function __({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $P(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return __(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(r,e={}){return ns(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WP=/^https?/;async function GP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await qP(r);for(const t of e)try{if(KP(t))return}catch{}On(r,"unauthorized-domain")}function KP(r){const e=ef(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!WP.test(t))return!1;if(HP.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Sl(3e4,6e4);function fy(){const r=Er().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function YP(r){return new Promise((e,t)=>{var s,o,a;function u(){fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fy(),t(nr(r,"network-request-failed"))},timeout:QP.get()})}if(!((o=(s=Er().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Er().gapi)===null||a===void 0)&&a.load)u();else{const h=UI("iframefcb");return Er()[h]=()=>{gapi.load?u():t(nr(r,"network-request-failed"))},t_(`${FI()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw sc=null,e})}let sc=null;function XP(r){return sc=sc||YP(r),sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new Sl(5e3,15e3),ZP="__/auth/iframe",eC="emulator/auth/iframe",tC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rC(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?bf(e,eC):`https://${r.config.authDomain}/${ZP}`,s={apiKey:e.apiKey,appName:r.name,v:Yo},o=nC.get(r.config.apiHost);o&&(s.eid=o);const a=r._getFrameworks();return a.length&&(s.fw=a.join(",")),`${t}?${El(s).slice(1)}`}async function sC(r){const e=await XP(r),t=Er().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:rC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tC,dontclear:!0},s=>new Promise(async(o,a)=>{await s.restyle({setHideOnLeave:!1});const u=nr(r,"network-request-failed"),h=Er().setTimeout(()=>{a(u)},JP.get());function p(){Er().clearTimeout(h),o(s)}s.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oC=500,aC=600,lC="_blank",uC="http://localhost";class py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cC(r,e,t,s=oC,o=aC){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p=Object.assign(Object.assign({},iC),{width:s.toString(),height:o.toString(),top:a,left:u}),g=Yt().toLowerCase();t&&(h=Kv(g)?lC:t),Wv(g)&&(e=e||uC,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[C,P])=>`${T}${C}=${P},`,"");if(RI(g)&&h!=="_self")return dC(e||"",h),new py(null);const S=window.open(e||"",h,_);Se(S,r,"popup-blocked");try{S.focus()}catch{}return new py(S)}function dC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="__/auth/handler",fC="emulator/auth/handler",pC=encodeURIComponent("fac");async function my(r,e,t,s,o,a){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Yo,eventId:o};if(e instanceof Ff){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",XS(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))u[_]=S}if(e instanceof Il){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(u.scopes=_.join(","))}r.tenantId&&(u.tid=r.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await r._getAppCheckToken(),g=p?`#${pC}=${encodeURIComponent(p)}`:"";return`${mC(r)}?${El(h).slice(1)}${g}`}function mC({config:r}){return r.emulator?bf(r,fC):`https://${r.authDomain}/${hC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class gC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h_,this._completeRedirectFn=UP,this._overrideRedirectResult=VP}async _openPopup(e,t,s,o){var a;Yr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await my(e,t,s,ef(),o);return cC(e,u,Uf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const a=await my(e,t,s,ef(),o);return _P(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Yr(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await sC(e),s=new zP(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bh,{type:Bh},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Bh];u!==void 0&&t(!!u),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zv()||Gv()||Lf()}}const yC=gC;var gy="@firebase/auth",yy="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wC(r){Vo(new Di("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e_(r)},g=new LI(s,o,a,p);return WI(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Vo(new Di("auth-internal",e=>{const t=Ks(e.getProvider("auth").getImmediate());return(s=>new vC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(gy,yy,_C(r)),Ms(gy,yy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=5*60,SC=Nv("authIdTokenMaxAge")||EC;let vy=null;const TC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>SC)return;const o=t==null?void 0:t.token;vy!==o&&(vy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function IC(r=Ov()){const e=Rf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=HI(r,{popupRedirectResolver:yC,persistence:[kP,gP,h_]}),s=Nv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const u=TC(a.toString());fP(t,u,()=>u(t.currentUser)),hP(t,h=>u(h))}}const o=Av("auth");return o&&GI(t,`http://${o}`),t}function PC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}VI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const a=nr("internal-error");a.customData=o,t(a)},s.type="text/javascript",s.charset="UTF-8",PC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wC("Browser");var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,w_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function x(){}x.prototype=A.prototype,b.D=A.prototype,b.prototype=new x,b.prototype.constructor=b,b.C=function(O,M,U){for(var N=Array(arguments.length-2),He=2;He<arguments.length;He++)N[He-2]=arguments[He];return A.prototype[M].apply(O,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,A,x){x||(x=0);var O=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)O[M]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(M=0;16>M;++M)O[M]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=b.g[0],x=b.g[1],M=b.g[2];var U=b.g[3],N=A+(U^x&(M^U))+O[0]+3614090360&4294967295;A=x+(N<<7&4294967295|N>>>25),N=U+(M^A&(x^M))+O[1]+3905402710&4294967295,U=A+(N<<12&4294967295|N>>>20),N=M+(x^U&(A^x))+O[2]+606105819&4294967295,M=U+(N<<17&4294967295|N>>>15),N=x+(A^M&(U^A))+O[3]+3250441966&4294967295,x=M+(N<<22&4294967295|N>>>10),N=A+(U^x&(M^U))+O[4]+4118548399&4294967295,A=x+(N<<7&4294967295|N>>>25),N=U+(M^A&(x^M))+O[5]+1200080426&4294967295,U=A+(N<<12&4294967295|N>>>20),N=M+(x^U&(A^x))+O[6]+2821735955&4294967295,M=U+(N<<17&4294967295|N>>>15),N=x+(A^M&(U^A))+O[7]+4249261313&4294967295,x=M+(N<<22&4294967295|N>>>10),N=A+(U^x&(M^U))+O[8]+1770035416&4294967295,A=x+(N<<7&4294967295|N>>>25),N=U+(M^A&(x^M))+O[9]+2336552879&4294967295,U=A+(N<<12&4294967295|N>>>20),N=M+(x^U&(A^x))+O[10]+4294925233&4294967295,M=U+(N<<17&4294967295|N>>>15),N=x+(A^M&(U^A))+O[11]+2304563134&4294967295,x=M+(N<<22&4294967295|N>>>10),N=A+(U^x&(M^U))+O[12]+1804603682&4294967295,A=x+(N<<7&4294967295|N>>>25),N=U+(M^A&(x^M))+O[13]+4254626195&4294967295,U=A+(N<<12&4294967295|N>>>20),N=M+(x^U&(A^x))+O[14]+2792965006&4294967295,M=U+(N<<17&4294967295|N>>>15),N=x+(A^M&(U^A))+O[15]+1236535329&4294967295,x=M+(N<<22&4294967295|N>>>10),N=A+(M^U&(x^M))+O[1]+4129170786&4294967295,A=x+(N<<5&4294967295|N>>>27),N=U+(x^M&(A^x))+O[6]+3225465664&4294967295,U=A+(N<<9&4294967295|N>>>23),N=M+(A^x&(U^A))+O[11]+643717713&4294967295,M=U+(N<<14&4294967295|N>>>18),N=x+(U^A&(M^U))+O[0]+3921069994&4294967295,x=M+(N<<20&4294967295|N>>>12),N=A+(M^U&(x^M))+O[5]+3593408605&4294967295,A=x+(N<<5&4294967295|N>>>27),N=U+(x^M&(A^x))+O[10]+38016083&4294967295,U=A+(N<<9&4294967295|N>>>23),N=M+(A^x&(U^A))+O[15]+3634488961&4294967295,M=U+(N<<14&4294967295|N>>>18),N=x+(U^A&(M^U))+O[4]+3889429448&4294967295,x=M+(N<<20&4294967295|N>>>12),N=A+(M^U&(x^M))+O[9]+568446438&4294967295,A=x+(N<<5&4294967295|N>>>27),N=U+(x^M&(A^x))+O[14]+3275163606&4294967295,U=A+(N<<9&4294967295|N>>>23),N=M+(A^x&(U^A))+O[3]+4107603335&4294967295,M=U+(N<<14&4294967295|N>>>18),N=x+(U^A&(M^U))+O[8]+1163531501&4294967295,x=M+(N<<20&4294967295|N>>>12),N=A+(M^U&(x^M))+O[13]+2850285829&4294967295,A=x+(N<<5&4294967295|N>>>27),N=U+(x^M&(A^x))+O[2]+4243563512&4294967295,U=A+(N<<9&4294967295|N>>>23),N=M+(A^x&(U^A))+O[7]+1735328473&4294967295,M=U+(N<<14&4294967295|N>>>18),N=x+(U^A&(M^U))+O[12]+2368359562&4294967295,x=M+(N<<20&4294967295|N>>>12),N=A+(x^M^U)+O[5]+4294588738&4294967295,A=x+(N<<4&4294967295|N>>>28),N=U+(A^x^M)+O[8]+2272392833&4294967295,U=A+(N<<11&4294967295|N>>>21),N=M+(U^A^x)+O[11]+1839030562&4294967295,M=U+(N<<16&4294967295|N>>>16),N=x+(M^U^A)+O[14]+4259657740&4294967295,x=M+(N<<23&4294967295|N>>>9),N=A+(x^M^U)+O[1]+2763975236&4294967295,A=x+(N<<4&4294967295|N>>>28),N=U+(A^x^M)+O[4]+1272893353&4294967295,U=A+(N<<11&4294967295|N>>>21),N=M+(U^A^x)+O[7]+4139469664&4294967295,M=U+(N<<16&4294967295|N>>>16),N=x+(M^U^A)+O[10]+3200236656&4294967295,x=M+(N<<23&4294967295|N>>>9),N=A+(x^M^U)+O[13]+681279174&4294967295,A=x+(N<<4&4294967295|N>>>28),N=U+(A^x^M)+O[0]+3936430074&4294967295,U=A+(N<<11&4294967295|N>>>21),N=M+(U^A^x)+O[3]+3572445317&4294967295,M=U+(N<<16&4294967295|N>>>16),N=x+(M^U^A)+O[6]+76029189&4294967295,x=M+(N<<23&4294967295|N>>>9),N=A+(x^M^U)+O[9]+3654602809&4294967295,A=x+(N<<4&4294967295|N>>>28),N=U+(A^x^M)+O[12]+3873151461&4294967295,U=A+(N<<11&4294967295|N>>>21),N=M+(U^A^x)+O[15]+530742520&4294967295,M=U+(N<<16&4294967295|N>>>16),N=x+(M^U^A)+O[2]+3299628645&4294967295,x=M+(N<<23&4294967295|N>>>9),N=A+(M^(x|~U))+O[0]+4096336452&4294967295,A=x+(N<<6&4294967295|N>>>26),N=U+(x^(A|~M))+O[7]+1126891415&4294967295,U=A+(N<<10&4294967295|N>>>22),N=M+(A^(U|~x))+O[14]+2878612391&4294967295,M=U+(N<<15&4294967295|N>>>17),N=x+(U^(M|~A))+O[5]+4237533241&4294967295,x=M+(N<<21&4294967295|N>>>11),N=A+(M^(x|~U))+O[12]+1700485571&4294967295,A=x+(N<<6&4294967295|N>>>26),N=U+(x^(A|~M))+O[3]+2399980690&4294967295,U=A+(N<<10&4294967295|N>>>22),N=M+(A^(U|~x))+O[10]+4293915773&4294967295,M=U+(N<<15&4294967295|N>>>17),N=x+(U^(M|~A))+O[1]+2240044497&4294967295,x=M+(N<<21&4294967295|N>>>11),N=A+(M^(x|~U))+O[8]+1873313359&4294967295,A=x+(N<<6&4294967295|N>>>26),N=U+(x^(A|~M))+O[15]+4264355552&4294967295,U=A+(N<<10&4294967295|N>>>22),N=M+(A^(U|~x))+O[6]+2734768916&4294967295,M=U+(N<<15&4294967295|N>>>17),N=x+(U^(M|~A))+O[13]+1309151649&4294967295,x=M+(N<<21&4294967295|N>>>11),N=A+(M^(x|~U))+O[4]+4149444226&4294967295,A=x+(N<<6&4294967295|N>>>26),N=U+(x^(A|~M))+O[11]+3174756917&4294967295,U=A+(N<<10&4294967295|N>>>22),N=M+(A^(U|~x))+O[2]+718787259&4294967295,M=U+(N<<15&4294967295|N>>>17),N=x+(U^(M|~A))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,b.g[2]=b.g[2]+M&4294967295,b.g[3]=b.g[3]+U&4294967295}s.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var x=A-this.blockSize,O=this.B,M=this.h,U=0;U<A;){if(M==0)for(;U<=x;)o(this,b,U),U+=this.blockSize;if(typeof b=="string"){for(;U<A;)if(O[M++]=b.charCodeAt(U++),M==this.blockSize){o(this,O),M=0;break}}else for(;U<A;)if(O[M++]=b[U++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=A},s.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var x=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=x&255,x/=256;for(this.u(b),b=Array(16),A=x=0;4>A;++A)for(var O=0;32>O;O+=8)b[x++]=this.g[A]>>>O&255;return b};function a(b,A){var x=h;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=A(b)}function u(b,A){this.h=A;for(var x=[],O=!0,M=b.length-1;0<=M;M--){var U=b[M]|0;O&&U==A||(x[M]=U,O=!1)}this.g=x}var h={};function p(b){return-128<=b&&128>b?a(b,function(A){return new u([A|0],0>A?-1:0)}):new u([b|0],0>b?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return S;if(0>b)return j(g(-b));for(var A=[],x=1,O=0;b>=x;O++)A[O]=b/x|0,x*=4294967296;return new u(A,0)}function _(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return j(_(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(A,8)),O=S,M=0;M<b.length;M+=8){var U=Math.min(8,b.length-M),N=parseInt(b.substring(M,M+U),A);8>U?(U=g(Math.pow(A,U)),O=O.j(U).add(g(N))):(O=O.j(x),O=O.add(g(N)))}return O}var S=p(0),T=p(1),C=p(16777216);r=u.prototype,r.m=function(){if(D(this))return-j(this).m();for(var b=0,A=1,x=0;x<this.g.length;x++){var O=this.i(x);b+=(0<=O?O:4294967296+O)*A,A*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(D(this))return"-"+j(this).toString(b);for(var A=g(Math.pow(b,6)),x=this,O="";;){var M=X(x,A).g;x=q(x,M.j(A));var U=((0<x.g.length?x.g[0]:x.h)>>>0).toString(b);if(x=M,P(x))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function D(b){return b.h==-1}r.l=function(b){return b=q(this,b),D(b)?-1:P(b)?0:1};function j(b){for(var A=b.g.length,x=[],O=0;O<A;O++)x[O]=~b.g[O];return new u(x,~b.h).add(T)}r.abs=function(){return D(this)?j(this):this},r.add=function(b){for(var A=Math.max(this.g.length,b.g.length),x=[],O=0,M=0;M<=A;M++){var U=O+(this.i(M)&65535)+(b.i(M)&65535),N=(U>>>16)+(this.i(M)>>>16)+(b.i(M)>>>16);O=N>>>16,U&=65535,N&=65535,x[M]=N<<16|U}return new u(x,x[x.length-1]&-2147483648?-1:0)};function q(b,A){return b.add(j(A))}r.j=function(b){if(P(this)||P(b))return S;if(D(this))return D(b)?j(this).j(j(b)):j(j(this).j(b));if(D(b))return j(this.j(j(b)));if(0>this.l(C)&&0>b.l(C))return g(this.m()*b.m());for(var A=this.g.length+b.g.length,x=[],O=0;O<2*A;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<b.g.length;M++){var U=this.i(O)>>>16,N=this.i(O)&65535,He=b.i(M)>>>16,ct=b.i(M)&65535;x[2*O+2*M]+=N*ct,Q(x,2*O+2*M),x[2*O+2*M+1]+=U*ct,Q(x,2*O+2*M+1),x[2*O+2*M+1]+=N*He,Q(x,2*O+2*M+1),x[2*O+2*M+2]+=U*He,Q(x,2*O+2*M+2)}for(O=0;O<A;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=A;O<2*A;O++)x[O]=0;return new u(x,0)};function Q(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function H(b,A){this.g=b,this.h=A}function X(b,A){if(P(A))throw Error("division by zero");if(P(b))return new H(S,S);if(D(b))return A=X(j(b),A),new H(j(A.g),j(A.h));if(D(A))return A=X(b,j(A)),new H(j(A.g),A.h);if(30<b.g.length){if(D(b)||D(A))throw Error("slowDivide_ only works with positive integers.");for(var x=T,O=A;0>=O.l(b);)x=ye(x),O=ye(O);var M=pe(x,1),U=pe(O,1);for(O=pe(O,2),x=pe(x,2);!P(O);){var N=U.add(O);0>=N.l(b)&&(M=M.add(x),U=N),O=pe(O,1),x=pe(x,1)}return A=q(b,M.j(A)),new H(M,A)}for(M=S;0<=b.l(A);){for(x=Math.max(1,Math.floor(b.m()/A.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=g(x),N=U.j(A);D(N)||0<N.l(b);)x-=O,U=g(x),N=U.j(A);P(U)&&(U=T),M=M.add(U),b=q(b,N)}return new H(M,b)}r.A=function(b){return X(this,b).h},r.and=function(b){for(var A=Math.max(this.g.length,b.g.length),x=[],O=0;O<A;O++)x[O]=this.i(O)&b.i(O);return new u(x,this.h&b.h)},r.or=function(b){for(var A=Math.max(this.g.length,b.g.length),x=[],O=0;O<A;O++)x[O]=this.i(O)|b.i(O);return new u(x,this.h|b.h)},r.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),x=[],O=0;O<A;O++)x[O]=this.i(O)^b.i(O);return new u(x,this.h^b.h)};function ye(b){for(var A=b.g.length+1,x=[],O=0;O<A;O++)x[O]=b.i(O)<<1|b.i(O-1)>>>31;return new u(x,b.h)}function pe(b,A){var x=A>>5;A%=32;for(var O=b.g.length-x,M=[],U=0;U<O;U++)M[U]=0<A?b.i(U+x)>>>A|b.i(U+x+1)<<32-A:b.i(U+x);return new u(M,b.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,w_=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=_,Ni=u}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E_,Ja,S_,ic,sf,T_,I_,P_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,w){return c==Array.prototype||c==Object.prototype||(c[y]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function o(c,y){if(y)e:{var w=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var B=c[I];if(!(B in w))break e;w=w[B]}c=c[c.length-1],I=w[c],y=y(I),y!=I&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}function a(c,y){c instanceof String&&(c+="");var w=0,I=!1,B={next:function(){if(!I&&w<c.length){var G=w++;return{value:y(G,c[G]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return a(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,w){return c.call.apply(c.bind,arguments)}function S(c,y,w){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function T(c,y,w){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,T.apply(null,arguments)}function C(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function P(c,y){function w(){}w.prototype=y.prototype,c.aa=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(I,B,G){for(var ie=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ie[Ke-2]=arguments[Ke];return y.prototype[B].apply(I,ie)}}function D(c){const y=c.length;if(0<y){const w=Array(y);for(let I=0;I<y;I++)w[I]=c[I];return w}return[]}function j(c,y){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(p(I)){const B=c.length||0,G=I.length||0;c.length=B+G;for(let ie=0;ie<G;ie++)c[B+ie]=I[ie]}else c.push(I)}}class q{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Q(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function X(c){return X[" "](c),c}X[" "]=function(){};var ye=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function pe(c,y,w){for(const I in c)y.call(w,c[I],I,c)}function b(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function A(c){const y={};for(const w in c)y[w]=c[w];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,y){let w,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(w in I)c[w]=I[w];for(let G=0;G<x.length;G++)w=x[G],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function M(c){var y=1;c=c.split(":");const w=[];for(;0<y&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function U(c){h.setTimeout(()=>{throw c},0)}function N(){var c=he;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class He{constructor(){this.h=this.g=null}add(y,w){const I=ct.get();I.set(y,w),this.h?this.h.next=I:this.g=I,this.h=I}}var ct=new q(()=>new tt,c=>c.reset());class tt{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,K=!1,he=new He,oe=()=>{const c=h.Promise.resolve(void 0);Me=()=>{c.then(F)}};var F=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(w){U(w)}var y=ct;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}K=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};h.addEventListener("test",w,y),h.removeEventListener("test",w,y)}catch{}return c}();function Ce(c,y){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ye){e:{try{X(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ke[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}P(Ce,le);var ke={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function Ge(c,y,w,I,B){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!I,this.ha=B,this.key=++Ne,this.da=this.fa=!1}function ft(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Sn(c){this.src=c,this.g={},this.h=0}Sn.prototype.add=function(c,y,w,I,B){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var ie=Vn(c,y,I,B);return-1<ie?(y=c[ie],w||(y.fa=!1)):(y=new Ge(y,this.src,G,!!I,B),y.fa=w,c.push(y)),y};function lr(c,y){var w=y.type;if(w in c.g){var I=c.g[w],B=Array.prototype.indexOf.call(I,y,void 0),G;(G=0<=B)&&Array.prototype.splice.call(I,B,1),G&&(ft(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Vn(c,y,w,I){for(var B=0;B<c.length;++B){var G=c[B];if(!G.da&&G.listener==y&&G.capture==!!w&&G.ha==I)return B}return-1}var Cr="closure_lm_"+(1e6*Math.random()|0),rs={};function Js(c,y,w,I,B){if(Array.isArray(y)){for(var G=0;G<y.length;G++)Js(c,y[G],w,I,B);return null}return w=ei(w),c&&c[Oe]?c.K(y,w,g(I)?!!I.capture:!!I,B):ss(c,y,w,!1,I,B)}function ss(c,y,w,I,B,G){if(!y)throw Error("Invalid event type");var ie=g(B)?!!B.capture:!!B,Ke=os(c);if(Ke||(c[Cr]=Ke=new Sn(c)),w=Ke.add(y,w,I,ie,G),w.proxy)return w;if(I=xr(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)Ee||(B=ie),B===void 0&&(B=!1),c.addEventListener(y.toString(),I,B);else if(c.attachEvent)c.attachEvent(Fn(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function xr(){function c(w){return y.call(c.src,c.listener,w)}const y=Zs;return c}function is(c,y,w,I,B){if(Array.isArray(y))for(var G=0;G<y.length;G++)is(c,y[G],w,I,B);else I=g(I)?!!I.capture:!!I,w=ei(w),c&&c[Oe]?(c=c.i,y=String(y).toString(),y in c.g&&(G=c.g[y],w=Vn(G,w,I,B),-1<w&&(ft(G[w]),Array.prototype.splice.call(G,w,1),G.length==0&&(delete c.g[y],c.h--)))):c&&(c=os(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Vn(y,w,I,B)),(w=-1<c?y[c]:null)&&Mn(w))}function Mn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Oe])lr(y.i,c);else{var w=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(w,I,c.capture):y.detachEvent?y.detachEvent(Fn(w),I):y.addListener&&y.removeListener&&y.removeListener(I),(w=os(y))?(lr(w,c),w.h==0&&(w.src=null,y[Cr]=null)):ft(c)}}}function Fn(c){return c in rs?rs[c]:rs[c]="on"+c}function Zs(c,y){if(c.da)c=!0;else{y=new Ce(y,this);var w=c.listener,I=c.ha||c.src;c.fa&&Mn(c),c=w.call(I,y)}return c}function os(c){return c=c[Cr],c instanceof Sn?c:null}var as="__closure_events_fn_"+(1e9*Math.random()>>>0);function ei(c){return typeof c=="function"?c:(c[as]||(c[as]=function(y){return c.handleEvent(y)}),c[as])}function pt(){Y.call(this),this.i=new Sn(this),this.M=this,this.F=null}P(pt,Y),pt.prototype[Oe]=!0,pt.prototype.removeEventListener=function(c,y,w,I){is(this,c,y,w,I)};function ee(c,y){var w,I=c.F;if(I)for(w=[];I;I=I.F)w.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new le(y,c);else if(y instanceof le)y.target=y.target||c;else{var B=y;y=new le(I,c),O(y,B)}if(B=!0,w)for(var G=w.length-1;0<=G;G--){var ie=y.g=w[G];B=Fe(ie,I,!0,y)&&B}if(ie=y.g=c,B=Fe(ie,I,!0,y)&&B,B=Fe(ie,I,!1,y)&&B,w)for(G=0;G<w.length;G++)ie=y.g=w[G],B=Fe(ie,I,!1,y)&&B}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var w=c.g[y],I=0;I<w.length;I++)ft(w[I]);delete c.g[y],c.h--}}this.F=null},pt.prototype.K=function(c,y,w,I){return this.i.add(String(c),y,!1,w,I)},pt.prototype.L=function(c,y,w,I){return this.i.add(String(c),y,!0,w,I)};function Fe(c,y,w,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,G=0;G<y.length;++G){var ie=y[G];if(ie&&!ie.da&&ie.capture==w){var Ke=ie.listener,Tt=ie.ha||ie.src;ie.fa&&lr(c.i,ie),B=Ke.call(Tt,I)!==!1&&B}}return B&&!I.defaultPrevented}function nt(c,y,w){if(typeof c=="function")w&&(c=T(c,w));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(c,y||0)}function Rt(c){c.g=nt(()=>{c.g=null,c.i&&(c.i=!1,Rt(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class fn extends Y{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(c){Y.call(this),this.h=c,this.g={}}P(Tn,Y);var ti=[];function ur(c){pe(c.g,function(y,w){this.g.hasOwnProperty(w)&&Mn(y)},c),c.g={}}Tn.prototype.N=function(){Tn.aa.N.call(this),ur(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sa=h.JSON.stringify,ia=h.JSON.parse,oa=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function ni(){}ni.prototype.h=null;function Ui(c){return c.h||(c.h=c.i())}function Bi(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){le.call(this,"d")}P(cr,le);function zi(){le.call(this,"c")}P(zi,le);var dr={},aa=null;function ri(){return aa=aa||new pt}dr.La="serverreachability";function la(c){le.call(this,dr.La,c)}P(la,le);function kr(c){const y=ri();ee(y,new la(y))}dr.STAT_EVENT="statevent";function ua(c,y){le.call(this,dr.STAT_EVENT,c),this.stat=y}P(ua,le);function mt(c){const y=ri();ee(y,new ua(y,c))}dr.Ma="timingevent";function $i(c,y){le.call(this,dr.Ma,c),this.size=y}P($i,le);function Un(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function si(){this.g=!0}si.prototype.xa=function(){this.g=!1};function ii(c,y,w,I,B,G){c.info(function(){if(c.g)if(G)for(var ie="",Ke=G.split("&"),Tt=0;Tt<Ke.length;Tt++){var Ue=Ke[Tt].split("=");if(1<Ue.length){var Nt=Ue[0];Ue=Ue[1];var vt=Nt.split("_");ie=2<=vt.length&&vt[1]=="type"?ie+(Nt+"="+Ue+"&"):ie+(Nt+"=redacted&")}}else ie=null;else ie=G;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+y+`
`+w+`
`+ie})}function qi(c,y,w,I,B,G,ie){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+y+`
`+w+`
`+G+" "+ie})}function Bn(c,y,w,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+nd(c,w)+(I?" "+I:"")})}function ca(c,y){c.info(function(){return"TIMEOUT: "+y})}si.prototype.info=function(){};function nd(c,y){if(!c.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var I=w[c];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var G=B[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ie=1;ie<B.length;ie++)B[ie]=""}}}}return sa(w)}catch{return y}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function oi(){}P(oi,ni),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},zn=new oi;function $n(c,y,w,I){this.j=c,this.i=y,this.l=w,this.R=I||1,this.U=new Tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dl}function Dl(){this.i=null,this.g="",this.h=!1}var da={},Wi={};function Gi(c,y,w){c.L=1,c.v=hs(mn(y)),c.m=w,c.P=!0,ha(c,null)}function ha(c,y){c.F=Date.now(),Ye(c),c.A=mn(c.v);var w=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ps(w.i,"t",I),c.C=0,w=c.j.J,c.h=new Dl,c.g=Yl(c.j,w?y:null,!c.m),0<c.O&&(c.M=new fn(T(c.Y,c,c.g),c.O)),y=c.U,w=c.g,I=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(ti[0]=B.toString()),B=ti);for(var G=0;G<B.length;G++){var ie=Js(w,B[G],I||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),kr(),ii(c.i,c.u,c.A,c.l,c.R,c.m)}$n.prototype.ca=function(c){c=c.target;const y=this.M;y&&rn(c)==3?y.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{const vt=rn(this.g);var y=this.g.Ba();const xn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||vt!=4||y==7||(y==8||0>=xn?kr(3):kr(2)),ai(this);var w=this.g.Z();this.X=w;t:if(jl(this)){var I=va(this.g);c="";var B=I.length,G=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),ls(this);var ie="";break t}this.h.i=new h.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(I[y],{stream:!(G&&y==B-1)});I.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=w==200,qi(this.i,this.u,this.A,this.l,this.R,vt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Tt=this.g;if((Ke=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ke)){var Ue=Ke;break t}}Ue=null}if(w=Ue)Bn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fa(this,w);else{this.o=!1,this.s=3,mt(12),Pn(this),ls(this);break e}}if(this.P){w=!0;let yn;for(;!this.J&&this.C<ie.length;)if(yn=rd(this,ie),yn==Wi){vt==4&&(this.s=4,mt(14),w=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==da){this.s=4,mt(15),Bn(this.i,this.l,ie,"[Invalid Chunk]"),w=!1;break}else Bn(this.i,this.l,yn,null),fa(this,yn);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||ie.length!=0||this.h.h||(this.s=1,mt(16),w=!1),this.o=this.o&&w,!w)Bn(this.i,this.l,ie,"[Invalid Chunked Response]"),Pn(this),ls(this);else if(0<ie.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),wa(Nt),Nt.M=!0,mt(11))}}else Bn(this.i,this.l,ie,null),fa(this,ie);vt==4&&Pn(this),this.o&&!this.J&&(vt==4?so(this.j,this):(this.o=!1,Ye(this)))}else Zi(this.g),w==400&&0<ie.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Pn(this),ls(this)}}}catch{}finally{}};function jl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function rd(c,y){var w=c.C,I=y.indexOf(`
`,w);return I==-1?Wi:(w=Number(y.substring(w,I)),isNaN(w)?da:(I+=1,I+w>y.length?Wi:(y=y.slice(I,I+w),c.C=I+w,y)))}$n.prototype.cancel=function(){this.J=!0,Pn(this)};function Ye(c){c.S=Date.now()+c.I,bl(c,c.I)}function bl(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Un(T(c.ba,c),y)}function ai(c){c.B&&(h.clearTimeout(c.B),c.B=null)}$n.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ca(this.i,this.A),this.L!=2&&(kr(),mt(17)),Pn(this),this.s=2,ls(this)):bl(this,this.S-c)};function ls(c){c.j.G==0||c.J||so(c.j,c)}function Pn(c){ai(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,ur(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function fa(c,y){try{var w=c.j;if(w.G!=0&&(w.g==c||Xt(w.h,c))){if(!c.K&&Xt(w.h,c)&&w.G==3){try{var I=w.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)ro(w),Kn(w);else break e;no(w),mt(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=Un(T(w.Za,w),6e3));if(1>=Ll(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else jr(w,11)}else if((c.K||w.g==c)&&ro(w),!Q(y))for(B=w.Da.g.parse(y),y=0;y<B.length;y++){let Ue=B[y];if(w.T=Ue[0],Ue=Ue[1],w.G==2)if(Ue[0]=="c"){w.K=Ue[1],w.ia=Ue[2];const Nt=Ue[3];Nt!=null&&(w.la=Nt,w.j.info("VER="+w.la));const vt=Ue[4];vt!=null&&(w.Aa=vt,w.j.info("SVER="+w.Aa));const xn=Ue[5];xn!=null&&typeof xn=="number"&&0<xn&&(I=1.5*xn,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const yn=c.g;if(yn){const pi=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var G=I.h;G.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(pa(G,G.h),G.h=null))}if(I.D){const oo=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(I.ya=oo,Qe(I.I,I.D,oo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ie=c;if(I.qa=Ql(I,I.J?I.ia:null,I.W),ie.K){Vl(I.h,ie);var Ke=ie,Tt=I.L;Tt&&(Ke.I=Tt),Ke.B&&(ai(Ke),Ye(Ke)),I.g=ie}else fi(I);0<w.i.length&&mr(w)}else Ue[0]!="stop"&&Ue[0]!="close"||jr(w,7);else w.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?jr(w,7):Vt(w):Ue[0]!="noop"&&w.l&&w.l.ta(Ue),w.v=0)}}kr(4)}catch{}}var Ol=class{constructor(c,y){this.g=c,this.map=y}};function li(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ll(c){return c.h?1:c.g?c.g.size:0}function Xt(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function pa(c,y){c.g?c.g.add(y):c.h=y}function Vl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}li.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ml(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.D);return y}return D(c.i)}function Ki(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],w=c.length,I=0;I<w;I++)y.push(c[I]);return y}y=[],w=0;for(I in c)y[w++]=c[I];return y}function Qi(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var w=0;w<c;w++)y.push(w);return y}y=[],w=0;for(const I in c)y[w++]=I;return y}}}function us(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var w=Qi(c),I=Ki(c),B=I.length,G=0;G<B;G++)y.call(void 0,I[G],w&&w[G],c)}var ui=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sd(c,y){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var I=c[w].indexOf("="),B=null;if(0<=I){var G=c[w].substring(0,I);B=c[w].substring(I+1)}else G=c[w];y(G,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ar(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ar){this.h=c.h,ci(this,c.j),this.o=c.o,this.g=c.g,cs(this,c.s),this.l=c.l;var y=c.i,w=new hr;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),ds(this,w),this.m=c.m}else c&&(y=String(c).match(ui))?(this.h=!1,ci(this,y[1]||"",!0),this.o=Le(y[2]||""),this.g=Le(y[3]||"",!0),cs(this,y[4]),this.l=Le(y[5]||"",!0),ds(this,y[6]||"",!0),this.m=Le(y[7]||"")):(this.h=!1,this.i=new hr(null,this.h))}Ar.prototype.toString=function(){var c=[],y=this.j;y&&c.push(fs(y,Yi,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(fs(y,Yi,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(fs(w,w.charAt(0)=="/"?Bl:Ul,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",fs(w,ma)),c.join("")};function mn(c){return new Ar(c)}function ci(c,y,w){c.j=w?Le(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function cs(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function ds(c,y,w){y instanceof hr?(c.i=y,fr(c.i,c.h)):(w||(y=fs(y,zl)),c.i=new hr(y,c.h))}function Qe(c,y,w){c.i.set(y,w)}function hs(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Le(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fs(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,Fl),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Fl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yi=/[#\/\?@]/g,Ul=/[#\?:]/g,Bl=/[#\?]/g,zl=/[#\?@]/g,ma=/#/g;function hr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Lt(c){c.g||(c.g=new Map,c.h=0,c.i&&sd(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}r=hr.prototype,r.add=function(c,y){Lt(this),this.i=null,c=Cn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function qn(c,y){Lt(c),y=Cn(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Hn(c,y){return Lt(c),y=Cn(c,y),c.g.has(y)}r.forEach=function(c,y){Lt(this),this.g.forEach(function(w,I){w.forEach(function(B){c.call(y,B,I,this)},this)},this)},r.na=function(){Lt(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let I=0;I<y.length;I++){const B=c[I];for(let G=0;G<B.length;G++)w.push(y[I])}return w},r.V=function(c){Lt(this);let y=[];if(typeof c=="string")Hn(this,c)&&(y=y.concat(this.g.get(Cn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)y=y.concat(c[w])}return y},r.set=function(c,y){return Lt(this),this.i=null,c=Cn(this,c),Hn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function ps(c,y,w){qn(c,y),0<w.length&&(c.i=null,c.g.set(Cn(c,y),D(w)),c.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var I=y[w];const G=encodeURIComponent(String(I)),ie=this.V(I);for(I=0;I<ie.length;I++){var B=G;ie[I]!==""&&(B+="="+encodeURIComponent(String(ie[I]))),c.push(B)}}return this.i=c.join("&")};function Cn(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function fr(c,y){y&&!c.j&&(Lt(c),c.i=null,c.g.forEach(function(w,I){var B=I.toLowerCase();I!=B&&(qn(this,I),ps(this,B,w))},c)),c.j=y}function id(c,y){const w=new si;if(h.Image){const I=new Image;I.onload=C(nn,w,"TestLoadImage: loaded",!0,y,I),I.onerror=C(nn,w,"TestLoadImage: error",!1,y,I),I.onabort=C(nn,w,"TestLoadImage: abort",!1,y,I),I.ontimeout=C(nn,w,"TestLoadImage: timeout",!1,y,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function $l(c,y){const w=new si,I=new AbortController,B=setTimeout(()=>{I.abort(),nn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then(G=>{clearTimeout(B),G.ok?nn(w,"TestPingServer: ok",!0,y):nn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),nn(w,"TestPingServer: error",!1,y)})}function nn(c,y,w,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(w)}catch{}}function od(){this.g=new oa}function ql(c,y,w){const I=w||"";try{us(c,function(B,G){let ie=B;g(B)&&(ie=sa(B)),y.push(I+G+"="+encodeURIComponent(ie))})}catch(B){throw y.push(I+"type="+encodeURIComponent("_badmap")),B}}function Rr(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Rr,ni),Rr.prototype.g=function(){return new di(this.l,this.j)},Rr.prototype.i=function(c){return function(){return c}}({});function di(c,y){pt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(di,pt),r=di.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Gn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Wn(this):Gn(this),this.readyState==3&&Hl(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Wn(this))},r.Qa=function(c){this.g&&(this.response=c,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Gn(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Gn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nr(c){let y="";return pe(c,function(w,I){y+=I,y+=":",y+=w,y+=`\r
`}),y}function ms(c,y,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Nr(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):Qe(c,y,w))}function rt(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(rt,pt);var ad=/^https?$/i,ga=["POST","PUT"];r=rt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?Ui(this.o):Ui(zn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(G){hi(this,G);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)w.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const G of I.keys())w.set(G,I.get(G));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(G=>G.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ga,y,void 0))||I||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ie]of w)this.g.setRequestHeader(G,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ji(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){hi(this,G)}};function hi(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Xi(c),gn(c)}function Xi(c){c.A||(c.A=!0,ee(c,"complete"),ee(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ee(this,"complete"),ee(this,"abort"),gn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gn(this,!0)),rt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},r.bb=function(){ya(this)};function ya(c){if(c.h&&typeof u<"u"&&(!c.v[1]||rn(c)!=4||c.Z()!=2)){if(c.u&&rn(c)==4)nt(c.Ea,0,c);else if(ee(c,"readystatechange"),rn(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var I;if(I=ie===0){var B=String(c.D).match(ui)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),I=!ad.test(B?B.toLowerCase():"")}w=I}if(w)ee(c,"complete"),ee(c,"success");else{c.m=6;try{var G=2<rn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Xi(c)}}finally{gn(c)}}}}function gn(c,y){if(c.g){Ji(c);const w=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||ee(c,"ready");try{w.onreadystatechange=I}catch{}}}function Ji(c){c.I&&(h.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function rn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),ia(y)}};function va(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(c){const y={};c=(c.g&&2<=rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(Q(c[I]))continue;var w=M(c[I]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const G=y[B]||[];y[B]=G,G.push(w)}b(y,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function _a(c){this.Aa=0,this.i=[],this.j=new si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pr("baseRetryDelayMs",5e3,c),this.cb=pr("retryDelaySeedMs",1e4,c),this.Wa=pr("forwardChannelMaxRetries",2,c),this.wa=pr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new li(c&&c.concurrentRequestLimit),this.Da=new od,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=_a.prototype,r.la=8,r.G=1,r.connect=function(c,y,w,I){mt(0),this.W=c,this.H=y||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=Ql(this,null,this.W),mr(this)};function Vt(c){if(eo(c),c.G==3){var y=c.U++,w=mn(c.I);if(Qe(w,"SID",c.K),Qe(w,"RID",y),Qe(w,"TYPE","terminate"),Dr(c,w),y=new $n(c,c.j,y),y.L=2,y.v=hs(mn(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=y.v,w=!0),w||(y.g=Yl(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ye(y)}Kl(c)}function Kn(c){c.g&&(wa(c),c.g.cancel(),c.g=null)}function eo(c){Kn(c),c.u&&(h.clearTimeout(c.u),c.u=null),ro(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function mr(c){if(!pn(c.h)&&!c.s){c.s=!0;var y=c.Ga;Me||oe(),K||(Me(),K=!0),he.add(y,c),c.B=0}}function ld(c,y){return Ll(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Un(T(c.Ga,c,y),Gl(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new $n(this,this.j,c);let G=this.o;if(this.S&&(G?(G=A(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(B.H=G,G=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=gs(this,B,y),w=mn(this.I),Qe(w,"RID",c),Qe(w,"CVER",22),this.D&&Qe(w,"X-HTTP-Session-Id",this.D),Dr(this,w),G&&(this.O?y="headers="+encodeURIComponent(String(Nr(G)))+"&"+y:this.m&&ms(w,this.m,G)),pa(this.h,B),this.Ua&&Qe(w,"TYPE","init"),this.P?(Qe(w,"$req",y),Qe(w,"SID","null"),B.T=!0,Gi(B,w,null)):Gi(B,w,y),this.G=2}}else this.G==3&&(c?to(this,c):this.i.length==0||pn(this.h)||to(this))};function to(c,y){var w;y?w=y.l:w=c.U++;const I=mn(c.I);Qe(I,"SID",c.K),Qe(I,"RID",w),Qe(I,"AID",c.T),Dr(c,I),c.m&&c.o&&ms(I,c.m,c.o),w=new $n(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),y&&(c.i=y.D.concat(c.i)),y=gs(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pa(c.h,w),Gi(w,I,y)}function Dr(c,y){c.H&&pe(c.H,function(w,I){Qe(y,I,w)}),c.l&&us({},function(w,I){Qe(y,I,w)})}function gs(c,y,w){w=Math.min(c.i.length,w);var I=c.l?T(c.l.Na,c.l,c):null;e:{var B=c.i;let G=-1;for(;;){const ie=["count="+w];G==-1?0<w?(G=B[0].g,ie.push("ofs="+G)):G=0:ie.push("ofs="+G);let Ke=!0;for(let Tt=0;Tt<w;Tt++){let Ue=B[Tt].g;const Nt=B[Tt].map;if(Ue-=G,0>Ue)G=Math.max(0,B[Tt].g-100),Ke=!1;else try{ql(Nt,ie,"req"+Ue+"_")}catch{I&&I(Nt)}}if(Ke){I=ie.join("&");break e}}}return c=c.i.splice(0,w),y.D=c,I}function fi(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Me||oe(),K||(Me(),K=!0),he.add(y,c),c.v=0}}function no(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Un(T(c.Fa,c),Gl(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Un(T(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Kn(this),Wl(this))};function wa(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Wl(c){c.g=new $n(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=mn(c.qa);Qe(y,"RID","rpc"),Qe(y,"SID",c.K),Qe(y,"AID",c.T),Qe(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(y,"TO",c.ja),Qe(y,"TYPE","xmlhttp"),Dr(c,y),c.m&&c.o&&ms(y,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=hs(mn(y)),w.m=null,w.P=!0,ha(w,c)}r.Za=function(){this.C!=null&&(this.C=null,Kn(this),no(this),mt(19))};function ro(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function so(c,y){var w=null;if(c.g==y){ro(c),wa(c),c.g=null;var I=2}else if(Xt(c.h,y))w=y.D,Vl(c.h,y),I=1;else return;if(c.G!=0){if(y.o)if(I==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;I=ri(),ee(I,new $i(I,w)),mr(c)}else fi(c);else if(B=y.s,B==3||B==0&&0<y.X||!(I==1&&ld(c,y)||I==2&&no(c)))switch(w&&0<w.length&&(y=c.h,y.i=y.i.concat(w)),B){case 1:jr(c,5);break;case 4:jr(c,10);break;case 3:jr(c,6);break;default:jr(c,2)}}}function Gl(c,y){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*y}function jr(c,y){if(c.j.info("Error code "+y),y==2){var w=T(c.fb,c),I=c.Xa;const B=!I;I=new Ar(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ci(I,"https"),hs(I),B?id(I.toString(),w):$l(I.toString(),w)}else mt(2);c.G=0,c.l&&c.l.sa(y),Kl(c),eo(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Kl(c){if(c.G=0,c.ka=[],c.l){const y=Ml(c.h);(y.length!=0||c.i.length!=0)&&(j(c.ka,y),j(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Ql(c,y,w){var I=w instanceof Ar?mn(w):new Ar(w);if(I.g!="")y&&(I.g=y+"."+I.g),cs(I,I.s);else{var B=h.location;I=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var G=new Ar(null);I&&ci(G,I),y&&(G.g=y),B&&cs(G,B),w&&(G.l=w),I=G}return w=c.D,y=c.ya,w&&y&&Qe(I,w,y),Qe(I,"VER",c.la),Dr(c,I),I}function Yl(c,y,w){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new rt(new Rr({eb:w})):new rt(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}r=Ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function io(){}io.prototype.g=function(c,y){return new Jt(c,y)};function Jt(c,y){pt.call(this),this.g=new _a(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!Q(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Q(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new gr(this)}P(Jt,pt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Vt(this.g)},Jt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=sa(c),c=w);y.i.push(new Ol(y.Ya++,c)),y.G==3&&mr(y)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Jt.aa.N.call(this)};function Xl(c){cr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}P(Xl,cr);function Jl(){zi.call(this),this.status=1}P(Jl,zi);function gr(c){this.g=c}P(gr,Ea),gr.prototype.ua=function(){ee(this.g,"a")},gr.prototype.ta=function(c){ee(this.g,new Xl(c))},gr.prototype.sa=function(c){ee(this.g,new Jl)},gr.prototype.ra=function(){ee(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,P_=function(){return new io},I_=function(){return ri()},T_=dr,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,ic=Hi,Nl.COMPLETE="complete",S_=Nl,Bi.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ja=Bi,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,E_=rt}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});const wy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new kf("@firebase/firestore");function ko(){return Oi.logLevel}function ue(r,...e){if(Oi.logLevel<=je.DEBUG){const t=e.map(zf);Oi.debug(`Firestore (${Xo}): ${r}`,...t)}}function Xr(r,...e){if(Oi.logLevel<=je.ERROR){const t=e.map(zf);Oi.error(`Firestore (${Xo}): ${r}`,...t)}}function Fo(r,...e){if(Oi.logLevel<=je.WARN){const t=e.map(zf);Oi.warn(`Firestore (${Xo}): ${r}`,...t)}}function zf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+r;throw Xr(e),new Error(e)}function We(r,e){r||Ie()}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kt.UNAUTHENTICATED))}shutdown(){}}class xC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kC{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let a=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Kr,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string"),new C_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new Kt(e)}}class AC{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class RC{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new AC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const s=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const o=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string"),this.R=t.token,new NC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=jC(40);for(let a=0;a<o.length;++a)s.length<20&&o[a]<t&&(s+=e.charAt(o[a]%e.length))}return s}}function Ve(r,e){return r<e?-1:r>e?1:0}function Uo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Ct(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Ct(0,0))}static max(){return new Pe(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ie(),s===void 0?s=e.length-t:s>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return dl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends dl{construct(e,t,s){return new et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new et(t)}static emptyPath(){return new et([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends dl{construct(e,t,s){return new Bt(e,t,s)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const a=()=>{if(s.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(s+=h,o++):(a(),o++)}if(a(),u)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}function OC(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(s===1e9?new Ct(t+1,0):new Ct(t,s));return new Bs(o,ve.empty(),e)}function LC(r){return new Bs(r.readTime,r.key,-1)}class Bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Bs(Pe.min(),ve.empty(),-1)}static max(){return new Bs(Pe.max(),ve.empty(),-1)}}function VC(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:Ve(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==MC)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z((s,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.reject(t)}static resolve(e){return new Z((t,s)=>{t(e)})}static reject(e){return new Z((t,s)=>{s(e)})}static waitFor(e){return new Z((t,s)=>{let o=0,a=0,u=!1;e.forEach(h=>{++o,h.next(()=>{++a,u&&a===o&&t()},p=>s(p))}),u=!0,a===o&&t()})}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next(o=>o?Z.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,a)=>{s.push(t.call(this,o,a))}),this.waitFor(s)}static mapArray(e,t){return new Z((s,o)=>{const a=e.length,u=new Array(a);let h=0;for(let p=0;p<a;p++){const g=p;t(e[g]).next(_=>{u[g]=_,++h,h===a&&s(u)},_=>o(_))}})}static doWhile(e,t){return new Z((s,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):s()};a()})}}function UC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Lc.oe=-1;function Vc(r){return r==null}function wc(r){return r===0&&1/r==-1/0}function BC(r){return typeof r=="number"&&Number.isInteger(r)&&!wc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ey(e)),e=$C(r.get(t),e);return Ey(e)}function $C(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const a=r.charAt(o);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Ey(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Qs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function k_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?s(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,s,o,a){this.key=e,this.value=t,this.color=s??Ut.RED,this.left=o??Ut.EMPTY,this.right=a??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,a){return new Ut(e??this.key,t??this.value,s??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const a=s(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,s),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,s,o,a){return this}insert(e,t,s){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new En([])}unionWith(e){let t=new xt(Bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new A_("Invalid base64 string: "+a):a}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const qC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(r){if(We(!!r),typeof r=="string"){let e=0;const t=qC.exec(r);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function $s(r){return typeof r=="string"?zt.fromBase64String(r):zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Mc(r){const e=r.mapValue.fields.__previous_value__;return $f(e)?Mc(e):e}function hl(r){const e=zs(r.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t,s,o,a,u,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g}}class fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?$f(r)?4:GC(r)?9007199254740991:WC(r)?10:11:Ie()}function Ir(r,e){if(r===e)return!0;const t=qs(r);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hl(r).isEqual(hl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=zs(o.timestampValue),h=zs(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,a){return $s(o.bytesValue).isEqual($s(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,a){return yt(o.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(r,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return yt(o.integerValue)===yt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=yt(o.doubleValue),h=yt(a.doubleValue);return u===h?wc(u)===wc(h):isNaN(u)&&isNaN(h)}return!1}(r,e);case 9:return Uo(r.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},h=a.mapValue.fields||{};if(Sy(u)!==Sy(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Ir(u[p],h[p])))return!1;return!0}(r,e);default:return Ie()}}function pl(r,e){return(r.values||[]).find(t=>Ir(t,e))!==void 0}function Bo(r,e){if(r===e)return 0;const t=qs(r),s=qs(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(r.booleanValue,e.booleanValue);case 2:return function(a,u){const h=yt(a.integerValue||a.doubleValue),p=yt(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(r,e);case 3:return Iy(r.timestampValue,e.timestampValue);case 4:return Iy(hl(r),hl(e));case 5:return Ve(r.stringValue,e.stringValue);case 6:return function(a,u){const h=$s(a),p=$s(u);return h.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),p=u.split("/");for(let g=0;g<h.length&&g<p.length;g++){const _=Ve(h[g],p[g]);if(_!==0)return _}return Ve(h.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,u){const h=Ve(yt(a.latitude),yt(u.latitude));return h!==0?h:Ve(yt(a.longitude),yt(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Py(r.arrayValue,e.arrayValue);case 10:return function(a,u){var h,p,g,_;const S=a.fields||{},T=u.fields||{},C=(h=S.value)===null||h===void 0?void 0:h.arrayValue,P=(p=T.value)===null||p===void 0?void 0:p.arrayValue,D=Ve(((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0,((_=P==null?void 0:P.values)===null||_===void 0?void 0:_.length)||0);return D!==0?D:Py(C,P)}(r.mapValue,e.mapValue);case 11:return function(a,u){if(a===Yu.mapValue&&u===Yu.mapValue)return 0;if(a===Yu.mapValue)return 1;if(u===Yu.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),g=u.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let S=0;S<p.length&&S<_.length;++S){const T=Ve(p[S],_[S]);if(T!==0)return T;const C=Bo(h[p[S]],g[_[S]]);if(C!==0)return C}return Ve(p.length,_.length)}(r.mapValue,e.mapValue);default:throw Ie()}}function Iy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ve(r,e);const t=zs(r),s=zs(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function Py(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const a=Bo(t[o],s[o]);if(a)return a}return Ve(t.length,s.length)}function zo(r){return of(r)}function of(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=zs(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return $s(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ve.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const a of t.values||[])o?o=!1:s+=",",s+=of(a);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of s)a?a=!1:o+=",",o+=`${u}:${of(t.fields[u])}`;return o+"}"}(r.mapValue):Ie()}function oc(r){switch(qs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(r);return e?16+oc(e):16;case 5:return 2*r.stringValue.length;case 6:return $s(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,a)=>o+oc(a),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Qs(s.fields,(a,u)=>{o+=a.length+oc(u)}),o}(r.mapValue);default:throw Ie()}}function Cy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function af(r){return!!r&&"integerValue"in r}function qf(r){return!!r&&"arrayValue"in r}function xy(r){return!!r&&"nullValue"in r}function ky(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ac(r){return!!r&&"mapValue"in r}function WC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function rl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Qs(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=rl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function GC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=Bt.emptyPath(),s={},o=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=h.popLast()}u?s[h.lastSegment()]=rl(u):o.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,s,o)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ac(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Qs(t,(o,a)=>e[o]=a);for(const o of s)delete e[o]}clone(){return new hn(rl(this.value))}}function R_(r){const e=[];return Qs(r.fields,(t,s)=>{const o=new Bt([t]);if(ac(s)){const a=R_(s.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,s,o,a,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Qt(e,0,Pe.min(),Pe.min(),Pe.min(),hn.empty(),0)}static newFoundDocument(e,t,s,o){return new Qt(e,1,t,Pe.min(),s,o,0)}static newNoDocument(e,t){return new Qt(e,2,t,Pe.min(),Pe.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,Pe.min(),Pe.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function Ay(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const a=e[o],u=r.position[o];if(a.field.isKeyField()?s=ve.comparator(ve.fromName(u.referenceValue),t.key):s=Bo(u,t.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ry(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ir(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function KC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class Et extends N_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new YC(e,t,s):t==="array-contains"?new ZC(e,s):t==="in"?new ex(e,s):t==="not-in"?new tx(e,s):t==="array-contains-any"?new nx(e,s):new Et(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new XC(e,s):new JC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bo(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends N_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new sr(e,t)}matches(e){return D_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function D_(r){return r.op==="and"}function j_(r){return QC(r)&&D_(r)}function QC(r){for(const e of r.filters)if(e instanceof sr)return!1;return!0}function lf(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+zo(r.value);if(j_(r))return r.filters.map(e=>lf(e)).join(",");{const e=r.filters.map(t=>lf(t)).join(",");return`${r.op}(${e})`}}function b_(r,e){return r instanceof Et?function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&Ir(s.value,o.value)}(r,e):r instanceof sr?function(s,o){return o instanceof sr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((a,u,h)=>a&&b_(u,o.filters[h]),!0):!1}(r,e):void Ie()}function O_(r){return r instanceof Et?function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`}(r):r instanceof sr?function(t){return t.op.toString()+" {"+t.getFilters().map(O_).join(" ,")+"}"}(r):"Filter"}class YC extends Et{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class XC extends Et{constructor(e,t){super(e,"in",t),this.keys=L_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JC extends Et{constructor(e,t){super(e,"not-in",t),this.keys=L_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function L_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ve.fromName(s.referenceValue))}class ZC extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qf(t)&&pl(t.arrayValue,this.value)}}class ex extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class tx extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!pl(this.value.arrayValue,t)}}class nx extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>pl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t=null,s=[],o=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function Ny(r,e=null,t=[],s=[],o=null,a=null,u=null){return new rx(r,e,t,s,o,a,u)}function Hf(r){const e=xe(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>lf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),Vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>zo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>zo(s)).join(",")),e.ue=t}return e.ue}function Wf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!KC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!b_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ry(r.startAt,e.startAt)&&Ry(r.endAt,e.endAt)}function uf(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t=null,s=[],o=[],a=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sx(r,e,t,s,o,a,u,h){return new ea(r,e,t,s,o,a,u,h)}function Gf(r){return new ea(r)}function Dy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function V_(r){return r.collectionGroup!==null}function sl(r){const e=xe(r);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new xt(Bt.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new ml(a,s))}),t.has(Bt.keyField().canonicalString())||e.ce.push(new ml(Bt.keyField(),s))}return e.ce}function Sr(r){const e=xe(r);return e.le||(e.le=ix(e,sl(r))),e.le}function ix(r,e){if(r.limitType==="F")return Ny(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new ml(o.field,a)});const t=r.endAt?new Ec(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ec(r.startAt.position,r.startAt.inclusive):null;return Ny(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function cf(r,e){const t=r.filters.concat([e]);return new ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Sc(r,e,t){return new ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Fc(r,e){return Wf(Sr(r),Sr(e))&&r.limitType===e.limitType}function M_(r){return`${Hf(Sr(r))}|lt:${r.limitType}`}function Ao(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>O_(o)).join(", ")}]`),Vc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>zo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>zo(o)).join(",")),`Target(${s})`}(Sr(r))}; limitType=${r.limitType})`}function Uc(r,e){return e.isFoundDocument()&&function(s,o){const a=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ve.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(r,e)&&function(s,o){for(const a of sl(s))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const a of s.filters)if(!a.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(u,h,p){const g=Ay(u,h,p);return u.inclusive?g<=0:g<0}(s.startAt,sl(s),o)||s.endAt&&!function(u,h,p){const g=Ay(u,h,p);return u.inclusive?g>=0:g>0}(s.endAt,sl(s),o))}(r,e)}function ox(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function F_(r){return(e,t)=>{let s=!1;for(const o of sl(r)){const a=ax(o,e,t);if(a!==0)return a;s=s||o.field.isKeyField()}return 0}}function ax(r,e,t){const s=r.field.isKeyField()?ve.comparator(e.key,t.key):function(a,u,h){const p=u.data.field(a),g=h.data.field(a);return p!==null&&g!==null?Bo(p,g):Ie()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,a]of s)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(t,s)=>{for(const[o,a]of s)e(o,a)})}isEmpty(){return k_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new ut(ve.comparator);function Jr(){return lx}const U_=new ut(ve.comparator);function Za(...r){let e=U_;for(const t of r)e=e.insert(t.key,t);return e}function B_(r){let e=U_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ri(){return il()}function z_(){return il()}function il(){return new Vi(r=>r.toString(),(r,e)=>r.isEqual(e))}const ux=new ut(ve.comparator),cx=new xt(ve.comparator);function be(...r){let e=cx;for(const t of r)e=e.add(t);return e}const dx=new xt(Ve);function hx(){return dx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function $_(r){return{integerValue:""+r}}function fx(r,e){return BC(e)?$_(e):Kf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function px(r,e,t){return r instanceof Tc?function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&$f(a)&&(a=Mc(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):r instanceof gl?H_(r,e):r instanceof yl?W_(r,e):function(o,a){const u=q_(o,a),h=jy(u)+jy(o.Pe);return af(u)&&af(o.Pe)?$_(h):Kf(o.serializer,h)}(r,e)}function mx(r,e,t){return r instanceof gl?H_(r,e):r instanceof yl?W_(r,e):t}function q_(r,e){return r instanceof Ic?function(s){return af(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class Tc extends Bc{}class gl extends Bc{constructor(e){super(),this.elements=e}}function H_(r,e){const t=G_(e);for(const s of r.elements)t.some(o=>Ir(o,s))||t.push(s);return{arrayValue:{values:t}}}class yl extends Bc{constructor(e){super(),this.elements=e}}function W_(r,e){let t=G_(e);for(const s of r.elements)t=t.filter(o=>!Ir(o,s));return{arrayValue:{values:t}}}class Ic extends Bc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jy(r){return yt(r.integerValue||r.doubleValue)}function G_(r){return qf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function gx(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof gl&&o instanceof gl||s instanceof yl&&o instanceof yl?Uo(s.elements,o.elements,Ir):s instanceof Ic&&o instanceof Ic?Ir(s.Pe,o.Pe):s instanceof Tc&&o instanceof Tc}(r.transform,e.transform)}class yx{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zc{}function K_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qf(r.key,bn.none()):new Cl(r.key,r.data,bn.none());{const t=r.data,s=hn.empty();let o=new xt(Bt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?s.delete(a):s.set(a,u),o=o.add(a)}return new Ys(r.key,s,new En(o.toArray()),bn.none())}}function vx(r,e,t){r instanceof Cl?function(o,a,u){const h=o.value.clone(),p=Oy(o.fieldTransforms,a,u.transformResults);h.setAll(p),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(r,e,t):r instanceof Ys?function(o,a,u){if(!lc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const h=Oy(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(Q_(o)),p.setAll(h),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(r,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function ol(r,e,t,s){return r instanceof Cl?function(a,u,h,p){if(!lc(a.precondition,u))return h;const g=a.value.clone(),_=Ly(a.fieldTransforms,p,u);return g.setAll(_),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ys?function(a,u,h,p){if(!lc(a.precondition,u))return h;const g=Ly(a.fieldTransforms,p,u),_=u.data;return _.setAll(Q_(a)),_.setAll(g),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(S=>S.field))}(r,e,t,s):function(a,u,h){return lc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(r,e,t)}function _x(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),a=q_(s.transform,o||null);a!=null&&(t===null&&(t=hn.empty()),t.set(s.field,a))}return t||null}function by(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Uo(s,o,(a,u)=>gx(a,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Cl extends zc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ys extends zc{constructor(e,t,s,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Q_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Oy(r,e,t){const s=new Map;We(r.length===t.length);for(let o=0;o<t.length;o++){const a=r[o],u=a.transform,h=e.data.field(a.field);s.set(a.field,mx(u,h,t[o]))}return s}function Ly(r,e,t){const s=new Map;for(const o of r){const a=o.transform,u=t.data.field(o.field);s.set(o.field,px(a,u,e))}return s}class Qf extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wx extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&vx(a,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ol(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ol(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=z_();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(o.key)?null:h;const p=K_(u,h);p!==null&&s.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Pe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(t,s)=>by(t,s))&&Uo(this.baseMutations,e.baseMutations,(t,s)=>by(t,s))}}class Yf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length);let o=function(){return ux}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,s[u].version);return new Yf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Be;function Ix(r){switch(r){default:return Ie();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function Y_(r){if(r===void 0)return Xr("GRPC error has no .code"),J.UNKNOWN;switch(r){case wt.OK:return J.OK;case wt.CANCELLED:return J.CANCELLED;case wt.UNKNOWN:return J.UNKNOWN;case wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case wt.INTERNAL:return J.INTERNAL;case wt.UNAVAILABLE:return J.UNAVAILABLE;case wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case wt.NOT_FOUND:return J.NOT_FOUND;case wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case wt.ABORTED:return J.ABORTED;case wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case wt.DATA_LOSS:return J.DATA_LOSS;default:return Ie()}}(Be=wt||(wt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Ni([4294967295,4294967295],0);function Vy(r){const e=Px().encode(r),t=new w_;return t.update(e),new Uint8Array(t.digest())}function My(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ni([t,s],0),new Ni([o,a],0)]}class Xf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new el(`Invalid padding: ${t}`);if(s<0)throw new el(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new el(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ni.fromNumber(this.Te)}Ee(e,t,s){let o=e.add(t.multiply(Ni.fromNumber(s)));return o.compare(Cx)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Vy(e),[s,o]=My(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(s,o,a);if(!this.de(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Xf(a,o,t);return s.forEach(h=>u.insert(h)),u}insert(e){if(this.Te===0)return;const t=Vy(e),[s,o]=My(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(s,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,s,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $c(Pe.min(),o,new ut(Ve),Jr(),be())}}class xl{constructor(e,t,s,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new xl(s,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class X_{constructor(e,t){this.targetId=e,this.me=t}}class J_{constructor(e,t,s=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Fy{constructor(){this.fe=0,this.ge=Uy(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),s=be();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ie()}}),new xl(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=Uy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xx{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jr(),this.qe=Xu(),this.Qe=Xu(),this.Ke=new ut(Ve)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const a=o.target;if(uf(a))if(s===0){const u=new ve(a.path);this.We(t,u,Qt.newNoDocument(u,Pe.min()))}else We(s===1);else{const u=this.Ze(t);if(u!==s){const h=this.Xe(e),p=h?this.et(h,e,u):1;if(p!==0){this.He(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=t;let u,h;try{u=$s(s).toUint8Array()}catch(p){if(p instanceof A_)return Fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Xf(u,o,a)}catch(p){return Fo(p instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Te===0?null:h}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(a=>{const u=this.Le.nt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.We(t,a,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((a,u)=>{const h=this.Ye(u);if(h){if(a.current&&uf(h.target)){const p=new ve(h.target.path);this.st(p).has(u)||this.ot(u,p)||this.We(u,p,Qt.newNoDocument(p,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let s=be();this.Qe.forEach((a,u)=>{let h=!0;u.forEachWhile(p=>{const g=this.Ye(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(s=s.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const o=new $c(e,t,this.Ke,this.ke,s);return this.ke=Jr(),this.qe=Xu(),this.Qe=Xu(),this.Ke=new ut(Ve),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Fy,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new xt(Ve),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xt(Ve),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Fy),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xu(){return new ut(ve.comparator)}function Uy(){return new ut(ve.comparator)}const kx={asc:"ASCENDING",desc:"DESCENDING"},Ax={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rx={and:"AND",or:"OR"};class Nx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function df(r,e){return r.useProto3Json||Vc(e)?e:{value:e}}function Pc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Dx(r,e){return Pc(r,e.toTimestamp())}function Tr(r){return We(!!r),Pe.fromTimestamp(function(t){const s=zs(t);return new Ct(s.seconds,s.nanos)}(r))}function Jf(r,e){return hf(r,e).canonicalString()}function hf(r,e){const t=function(o){return new et(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function e0(r){const e=et.fromString(r);return We(i0(e)),e}function ff(r,e){return Jf(r.databaseId,e.path)}function zh(r,e){const t=e0(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(n0(t))}function t0(r,e){return Jf(r.databaseId,e)}function jx(r){const e=e0(r);return e.length===4?et.emptyPath():n0(e)}function pf(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function n0(r){return We(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function By(r,e,t){return{name:ff(r,e),fields:t.value.mapValue.fields}}function bx(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(g,_){return g.useProto3Json?(We(_===void 0||typeof _=="string"),zt.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),zt.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(g){const _=g.code===void 0?J.UNKNOWN:Y_(g.code);return new ce(_,g.message||"")}(u);t=new J_(s,o,a,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=zh(r,s.document.name),a=Tr(s.document.updateTime),u=s.document.createTime?Tr(s.document.createTime):Pe.min(),h=new hn({mapValue:{fields:s.document.fields}}),p=Qt.newFoundDocument(o,a,u,h),g=s.targetIds||[],_=s.removedTargetIds||[];t=new uc(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=zh(r,s.document),a=s.readTime?Tr(s.readTime):Pe.min(),u=Qt.newNoDocument(o,a),h=s.removedTargetIds||[];t=new uc([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=zh(r,s.document),a=s.removedTargetIds||[];t=new uc([],a,o,null)}else{if(!("filter"in e))return Ie();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:a}=s,u=new Tx(o,a),h=s.targetId;t=new X_(h,u)}}return t}function Ox(r,e){let t;if(e instanceof Cl)t={update:By(r,e.key,e.value)};else if(e instanceof Qf)t={delete:ff(r,e.key)};else if(e instanceof Ys)t={update:By(r,e.key,e.data),updateMask:qx(e.fieldMask)};else{if(!(e instanceof wx))return Ie();t={verify:ff(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,u){const h=u.transform;if(h instanceof Tc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof gl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof yl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ic)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Ie()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:Dx(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie()}(r,e.precondition)),t}function Lx(r,e){return r&&r.length>0?(We(e!==void 0),r.map(t=>function(o,a){let u=o.updateTime?Tr(o.updateTime):Tr(a);return u.isEqual(Pe.min())&&(u=Tr(a)),new yx(u,o.transformResults||[])}(t,e))):[]}function Vx(r,e){return{documents:[t0(r,e.path)]}}function Mx(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=t0(r,o);const a=function(g){if(g.length!==0)return s0(sr.create(g,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(g){if(g.length!==0)return g.map(_=>function(T){return{field:Ro(T.field),direction:Bx(T.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=df(r,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ct:t,parent:o}}function Fx(r){let e=jx(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(S){const T=r0(S);return T instanceof sr&&j_(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(S){return S.map(T=>function(P){return new ml(No(P.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(S){let T;return T=typeof S=="object"?S.value:S,Vc(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(S){const T=!!S.before,C=S.values||[];return new Ec(C,T)}(t.startAt));let g=null;return t.endAt&&(g=function(S){const T=!S.before,C=S.values||[];return new Ec(C,T)}(t.endAt)),sx(e,o,u,a,h,"F",p,g)}function Ux(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=No(t.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=No(t.unaryFilter.field);return Et.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=No(t.unaryFilter.field);return Et.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(r):r.fieldFilter!==void 0?function(t){return Et.create(No(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return sr.create(t.compositeFilter.filters.map(s=>r0(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(r):Ie()}function Bx(r){return kx[r]}function zx(r){return Ax[r]}function $x(r){return Rx[r]}function Ro(r){return{fieldPath:r.canonicalString()}}function No(r){return Bt.fromServerFormat(r.fieldPath)}function s0(r){return r instanceof Et?function(t){if(t.op==="=="){if(ky(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(xy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ky(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(xy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:zx(t.op),value:t.value}}}(r):r instanceof sr?function(t){const s=t.getFilters().map(o=>s0(o));return s.length===1?s[0]:{compositeFilter:{op:$x(t.op),filters:s}}}(r):Ie()}function qx(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t,s,o,a=Pe.min(),u=Pe.min(),h=zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.ht=e}}function Wx(r){const e=Fx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.ln=new Kx}addToCollectionParentIndex(e,t){return this.ln.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Bs.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class Kx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new xt(et.comparator),a=!o.has(s);return this.index[t]=o.add(s),a}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new xt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new $o(0)}static Qn(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y([r,e],[t,s]){const o=Ve(r,t);return o===0?Ve(e,s):o}class Qx{constructor(e){this.Gn=e,this.buffer=new xt($y),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();$y(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yx{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.Yn(3e5)})}}class Xx{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Lc.oe);const s=new Qx(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(zy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zy):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,a,u,h,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,u=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,h=Date.now(),this.removeTargets(e,s,t))).next(S=>(a=S,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(g=Date.now(),ko()<=je.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(h-u)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:S})))}}function Jx(r,e){return new Xx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.changes=new Vi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&ol(s.mutation,o,En.empty(),Ct.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,be()).next(()=>s))}getLocalViewOfDocuments(e,t,s=be()){const o=Ri();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(a=>{let u=Za();return a.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const s=Ri();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,be()))}populateOverlays(e,t,s){const o=[];return s.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,s,o){let a=Jr();const u=il(),h=function(){return il()}();return t.forEach((p,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof Ys)?a=a.insert(g.key,g):_!==void 0?(u.set(g.key,_.mutation.getFieldMask()),ol(_.mutation,g,_.mutation.getFieldMask(),Ct.now())):u.set(g.key,En.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((g,_)=>u.set(g,_)),t.forEach((g,_)=>{var S;return h.set(g,new e1(_,(S=u.get(g))!==null&&S!==void 0?S:null))}),h))}recalculateAndSaveOverlays(e,t){const s=il();let o=new ut((u,h)=>u-h),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let _=s.get(p)||En.empty();_=h.applyToLocalView(g,_),s.set(p,_);const S=(o.get(h.batchId)||be()).add(p);o=o.insert(h.batchId,S)})}).next(()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,_=p.value,S=z_();_.forEach(T=>{if(!a.has(T)){const C=K_(t.get(T),s.get(T));C!==null&&S.set(T,C),a=a.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,S))}return Z.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):V_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-a.size):Z.resolve(Ri());let h=-1,p=a;return u.next(g=>Z.forEach(g,(_,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(_)?Z.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{p=p.insert(_,T)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,p,g,be())).next(_=>({batchId:h,changes:B_(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(s=>{let o=Za();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const a=t.collectionGroup;let u=Za();return this.indexManager.getCollectionParents(e,a).next(h=>Z.forEach(h,p=>{const g=function(S,T){return new ea(T,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(_=>{_.forEach((S,T)=>{u=u.insert(S,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,s,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a,o))).next(u=>{a.forEach((p,g)=>{const _=g.getKey();u.get(_)===null&&(u=u.insert(_,Qt.newInvalidDocument(_)))});let h=Za();return u.forEach((p,g)=>{const _=a.get(p);_!==void 0&&ol(_.mutation,g,En.empty(),Ct.now()),Uc(t,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Z.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Tr(o.createTime)}}(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:Wx(o.bundledQuery),readTime:Tr(o.readTime)}}(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.overlays=new ut(ve.comparator),this.Er=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ri();return Z.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&s.set(o,a)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,a)=>{this.Tt(e,t,a)}),Z.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Er.get(s);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const o=Ri(),a=t.length+1,u=new ve(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>s&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let a=new ut((g,_)=>g-_);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=a.get(g.largestBatchId);_===null&&(_=Ri(),a=a.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const h=Ri(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>h.set(g,_)),!(h.size()>=o)););return Z.resolve(h)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.Er.get(o.largestBatchId).delete(s.key);this.Er.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new Sx(t,s));let a=this.Er.get(t);a===void 0&&(a=be(),this.Er.set(t,a)),this.Er.set(t,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this.dr=new xt(Ot.Ar),this.Rr=new xt(Ot.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new Ot(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new Ot(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new ve(new et([])),s=new Ot(t,e),o=new Ot(t,e+1),a=[];return this.Rr.forEachInRange([s,o],u=>{this.gr(u),a.push(u.key)}),a}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ve(new et([])),s=new Ot(t,e),o=new Ot(t,e+1);let a=be();return this.Rr.forEachInRange([s,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ot(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ot{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ve.comparator(e.key,t.key)||Ve(e.br,t.br)}static Vr(e,t){return Ve(e.br,t.br)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new xt(Ot.Ar)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Ex(a,t,s,o);this.mutationQueue.push(u);for(const h of o)this.vr=this.vr.add(new Ot(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Z.resolve(u)}lookupMutationBatch(e,t){return Z.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),a=o<0?0:o;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([s,o],u=>{const h=this.Cr(u.br);a.push(h)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new xt(Ve);return t.forEach(o=>{const a=new Ot(o,0),u=new Ot(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,u],h=>{s=s.add(h.br)})}),Z.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let a=s;ve.isDocumentKey(a)||(a=a.child(""));const u=new Ot(new ve(a),0);let h=new xt(Ve);return this.vr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(h=h.add(p.br)),!0)},u),Z.resolve(this.Mr(h))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){We(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return Z.forEach(t.mutations,o=>{const a=new Ot(o.key,t.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new Ot(t,0),o=this.vr.firstAfterOrEqual(s);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.Nr=e,this.docs=function(){return new ut(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),a=o?o.size:0,u=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let s=Jr();return t.forEach(o=>{const a=this.docs.get(o);s=s.insert(o,a?a.document.mutableCopy():Qt.newInvalidDocument(o))}),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let a=Jr();const u=t.path,h=new ve(u.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||VC(LC(_),s)<=0||(o.has(_.key)||Uc(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,s,o){Ie()}Lr(e,t){return Z.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new a1(this)}getSize(e){return Z.resolve(this.size)}}class a1 extends Zx{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),Z.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.persistence=e,this.Br=new Vi(t=>Hf(t),Wf),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.kr=0,this.qr=new Zf,this.targetCount=0,this.Qr=$o.qn()}forEachTarget(e,t){return this.Br.forEach((s,o)=>t(o)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),Z.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new $o(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Un(t),Z.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let o=0;const a=[];return this.Br.forEach((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.Br.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),Z.waitFor(a).next(()=>o)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Lc(0),this.Ur=!1,this.Ur=!0,this.Wr=new s1,this.referenceDelegate=e(this),this.Gr=new l1(this),this.indexManager=new Gx,this.remoteDocumentCache=function(o){return new o1(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new Hx(t),this.jr=new n1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new i1(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new u1(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(e,t){return Z.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class u1 extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Zr=new Zf,this.Xr=null}static ei(e){return new ep(e)}get ti(){if(this.Xr)return this.Xr;throw Ie()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ti,s=>{const o=ve.fromPath(s);return this.ni(e,o).next(a=>{a||t.removeEntry(o,Pe.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return Z.or([()=>Z.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Cc{constructor(e,t){this.persistence=e,this.ri=new Vi(s=>zC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=Jx(this,t)}static ei(e,t){return new Cc(e,t)}Hr(){}Jr(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return Z.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(a=>a?Z.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Lr(e,u=>this.ir(e,u,t).next(h=>{h||(s++,a.removeEntry(u,Pe.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Z.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oc(e.data.value)),t}ir(e,t,s){return Z.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=be(),o=be();for(const a of t.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new tp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return HS()?8:UC(Yt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const a={result:null};return this.Xi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.es(e,t,o,s).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new c1;return this.ts(e,t,u).next(h=>{if(a.result=h,this.Hi)return this.ns(e,t,u,h.size)})}).next(()=>a.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(ko()<=je.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Z.resolve()):(ko()<=je.DEBUG&&ue("QueryEngine","Query:",Ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(ko()<=je.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):Z.resolve())}Xi(e,t){if(Dy(t))return Z.resolve(null);let s=Sr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Sc(t,null,"F"),s=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const u=be(...a);return this.Zi.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.rs(t,h);return this.ss(t,g,u,p.readTime)?this.Xi(e,Sc(t,null,"F")):this.os(e,g,t,p)}))})))}es(e,t,s,o){return Dy(t)||o.isEqual(Pe.min())?Z.resolve(null):this.Zi.getDocuments(e,s).next(a=>{const u=this.rs(t,a);return this.ss(t,u,s,o)?Z.resolve(null):(ko()<=je.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.os(e,u,t,OC(o,-1)).next(h=>h))})}rs(e,t){let s=new xt(F_(e));return t.forEach((o,a)=>{Uc(e,a)&&(s=s.add(a))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(e,t,s){return ko()<=je.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.Zi.getDocumentsMatchingQuery(e,t,Bs.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new ut(Ve),this.cs=new Vi(a=>Hf(a),Wf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t1(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function f1(r,e,t,s){return new h1(r,e,t,s)}async function a0(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(a=>(o=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(a=>{const u=[],h=[];let p=be();for(const g of o){u.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of a){h.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Ts:g,removedBatchIds:u,addedBatchIds:h}))})})}function p1(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(h,p,g,_){const S=g.batch,T=S.keys();let C=Z.resolve();return T.forEach(P=>{C=C.next(()=>_.getEntry(p,P)).next(D=>{const j=g.docVersions.get(P);We(j!==null),D.version.compareTo(j)<0&&(S.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),_.addEntry(D)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(p,S))}(t,s,e,a).next(()=>a.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(h){let p=be();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function l0(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function m1(r,e){const t=xe(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const h=[];e.targetChanges.forEach((_,S)=>{const T=o.get(S);if(!T)return;h.push(t.Gr.removeMatchingKeys(a,_.removedDocuments,S).next(()=>t.Gr.addMatchingKeys(a,_.addedDocuments,S)));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(S)!==null?C=C.withResumeToken(zt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,s)),o=o.insert(S,C),function(D,j,q){return D.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(T,C,_)&&h.push(t.Gr.updateTargetData(a,C))});let p=Jr(),g=be();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),h.push(g1(a,u,e.documentUpdates).next(_=>{p=_.Is,g=_.Es})),!s.isEqual(Pe.min())){const _=t.Gr.getLastRemoteSnapshotVersion(a).next(S=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,s));h.push(_)}return Z.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,g)).next(()=>p)}).then(a=>(t.us=o,a))}function g1(r,e,t){let s=be(),o=be();return t.forEach(a=>s=s.add(a)),e.getEntries(r,s).next(a=>{let u=Jr();return t.forEach((h,p)=>{const g=a.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):ue("LocalStore","Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{Is:u,Es:o}})}function y1(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function v1(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(a=>a?(o=a,Z.resolve(o)):t.Gr.allocateTargetId(s).next(u=>(o=new Os(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function mf(r,e,t){const s=xe(r),o=s.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",a,u=>s.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!Zo(u))throw u;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function qy(r,e,t){const s=xe(r);let o=Pe.min(),a=be();return s.persistence.runTransaction("Execute query","readwrite",u=>function(p,g,_){const S=xe(p),T=S.cs.get(_);return T!==void 0?Z.resolve(S.us.get(T)):S.Gr.getTargetData(g,_)}(s,u,Sr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(u,h.targetId).next(p=>{a=p})}).next(()=>s._s.getDocumentsMatchingQuery(u,e,t?o:Pe.min(),t?a:be())).next(h=>(_1(s,ox(e),h),{documents:h,ds:a})))}function _1(r,e,t){let s=r.ls.get(e)||Pe.min();t.forEach((o,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),r.ls.set(e,s)}class Hy{constructor(){this.activeTargetIds=hx()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w1{constructor(){this._o=new Hy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Hy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function $h(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class I1 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,s,o,a,u){const h=$h(),p=this.No(t,s.toUriEncodedString());ue("RestConnection",`Sending RPC '${t}' ${h}:`,p,o);const g={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(g,a,u),this.Bo(t,p,g,o).then(_=>(ue("RestConnection",`Received RPC '${t}' ${h}: `,_),_),_=>{throw Fo("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",p,"request:",o),_})}ko(t,s,o,a,u,h){return this.Oo(t,s,o,a,u)}Lo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,u)=>t[u]=a),o&&o.headers.forEach((a,u)=>t[u]=a)}No(t,s){const o=S1[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,o){const a=$h();return new Promise((u,h)=>{const p=new E_;p.setWithCredentials(!0),p.listenOnce(S_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ic.NO_ERROR:const _=p.getResponseJson();ue(Gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case ic.TIMEOUT:ue(Gt,`RPC '${e}' ${a} timed out`),h(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const S=p.getStatus();if(ue(Gt,`RPC '${e}' ${a} failed with status:`,S,"response text:",p.getResponseText()),S>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const P=function(j){const q=j.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(q)>=0?q:J.UNKNOWN}(C.status);h(new ce(P,C.message))}else h(new ce(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ue(Gt,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(o);ue(Gt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",g,s,15)})}qo(e,t,s){const o=$h(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=P_(),h=I_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const _=a.join("");ue(Gt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const S=u.createWebChannel(_,p);let T=!1,C=!1;const P=new T1({Eo:j=>{C?ue(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(T||(ue(Gt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),T=!0),ue(Gt,`RPC '${e}' stream ${o} sending:`,j),S.send(j))},Ao:()=>S.close()}),D=(j,q,Q)=>{j.listen(q,H=>{try{Q(H)}catch(X){setTimeout(()=>{throw X},0)}})};return D(S,Ja.EventType.OPEN,()=>{C||(ue(Gt,`RPC '${e}' stream ${o} transport opened.`),P.So())}),D(S,Ja.EventType.CLOSE,()=>{C||(C=!0,ue(Gt,`RPC '${e}' stream ${o} transport closed`),P.Do())}),D(S,Ja.EventType.ERROR,j=>{C||(C=!0,Fo(Gt,`RPC '${e}' stream ${o} transport errored:`,j),P.Do(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),D(S,Ja.EventType.MESSAGE,j=>{var q;if(!C){const Q=j.data[0];We(!!Q);const H=Q,X=(H==null?void 0:H.error)||((q=H[0])===null||q===void 0?void 0:q.error);if(X){ue(Gt,`RPC '${e}' stream ${o} received error:`,X);const ye=X.status;let pe=function(x){const O=wt[x];if(O!==void 0)return Y_(O)}(ye),b=X.message;pe===void 0&&(pe=J.INTERNAL,b="Unknown error status: "+ye+" with message "+X.message),C=!0,P.Do(new ce(pe,b)),S.close()}else ue(Gt,`RPC '${e}' stream ${o} received:`,Q),P.vo(Q)}}),D(h,T_.STAT_EVENT,j=>{j.stat===sf.PROXY?ue(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===sf.NOPROXY&&ue(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.bo()},0),P}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(r){return new Nx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,s=1e3,o=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t,s,o,a,u,h,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new u0(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.E_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P1 extends c0{constructor(e,t,s,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=a}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=bx(this.serializer,e),s=function(a){if(!("targetChange"in a))return Pe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?Tr(u.readTime):Pe.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=pf(this.serializer),t.addTarget=function(a,u){let h;const p=u.target;if(h=uf(p)?{documents:Vx(a,p)}:{query:Mx(a,p).ct},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Z_(a,u.resumeToken);const g=df(a,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(Pe.min())>0){h.readTime=Pc(a,u.snapshotVersion.toTimestamp());const g=df(a,u.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const s=Ux(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.c_(t)}}class C1 extends c0{constructor(e,t,s,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Lx(e.writeResults,e.commitTime),s=Tr(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=pf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ox(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Oo(e,hf(t,s),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())})}ko(e,t,s,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.ko(e,hf(t,s),o,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class k1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Xr(t),this.C_=!1):ue("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t,s,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(u=>{s.enqueueAndForget(async()=>{Mi(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(p){const g=xe(p);g.k_.add(4),await kl(g),g.K_.set("Unknown"),g.k_.delete(4),await Hc(g)}(this))})}),this.K_=new k1(s,o)}}async function Hc(r){if(Mi(r))for(const e of r.q_)await e(!0)}async function kl(r){for(const e of r.q_)await e(!1)}function d0(r,e){const t=xe(r);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),ip(t)?sp(t):ta(t).s_()&&rp(t,e))}function np(r,e){const t=xe(r),s=ta(t);t.B_.delete(e),s.s_()&&h0(t,e),t.B_.size===0&&(s.s_()?s.a_():Mi(t)&&t.K_.set("Unknown"))}function rp(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(r).V_(e)}function h0(r,e){r.U_.xe(e),ta(r).m_(e)}function sp(r){r.U_=new xx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.B_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),ta(r).start(),r.K_.F_()}function ip(r){return Mi(r)&&!ta(r).i_()&&r.B_.size>0}function Mi(r){return xe(r).k_.size===0}function f0(r){r.U_=void 0}async function R1(r){r.K_.set("Online")}async function N1(r){r.B_.forEach((e,t)=>{rp(r,e)})}async function D1(r,e){f0(r),ip(r)?(r.K_.O_(e),sp(r)):r.K_.set("Unknown")}async function j1(r,e,t){if(r.K_.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const h of a.targetIds)o.B_.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.B_.delete(h),o.U_.removeTarget(h))}(r,e)}catch(s){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xc(r,s)}else if(e instanceof uc?r.U_.$e(e):e instanceof X_?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Pe.min()))try{const s=await l0(r.localStore);t.compareTo(s)>=0&&await function(a,u){const h=a.U_.it(u);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.B_.get(g);_&&a.B_.set(g,_.withResumeToken(p.resumeToken,u))}}),h.targetMismatches.forEach((p,g)=>{const _=a.B_.get(p);if(!_)return;a.B_.set(p,_.withResumeToken(zt.EMPTY_BYTE_STRING,_.snapshotVersion)),h0(a,p);const S=new Os(_.target,p,g,_.sequenceNumber);rp(a,S)}),a.remoteSyncer.applyRemoteEvent(h)}(r,t)}catch(s){ue("RemoteStore","Failed to raise snapshot:",s),await xc(r,s)}}async function xc(r,e,t){if(!Zo(e))throw e;r.k_.add(1),await kl(r),r.K_.set("Offline"),t||(t=()=>l0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Hc(r)})}function p0(r,e){return e().catch(t=>xc(r,t,e))}async function Wc(r){const e=xe(r),t=Hs(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;b1(e);)try{const o=await y1(e.localStore,s);if(o===null){e.L_.length===0&&t.a_();break}s=o.batchId,O1(e,o)}catch(o){await xc(e,o)}m0(e)&&g0(e)}function b1(r){return Mi(r)&&r.L_.length<10}function O1(r,e){r.L_.push(e);const t=Hs(r);t.s_()&&t.f_&&t.g_(e.mutations)}function m0(r){return Mi(r)&&!Hs(r).i_()&&r.L_.length>0}function g0(r){Hs(r).start()}async function L1(r){Hs(r).w_()}async function V1(r){const e=Hs(r);for(const t of r.L_)e.g_(t.mutations)}async function M1(r,e,t){const s=r.L_.shift(),o=Yf.from(s,e,t);await p0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Wc(r)}async function F1(r,e){e&&Hs(r).f_&&await async function(s,o){if(function(u){return Ix(u)&&u!==J.ABORTED}(o.code)){const a=s.L_.shift();Hs(s).__(),await p0(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Wc(s)}}(r,e),m0(r)&&g0(r)}async function Gy(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const s=Mi(t);t.k_.add(3),await kl(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Hc(t)}async function U1(r,e){const t=xe(r);e?(t.k_.delete(2),await Hc(t)):e||(t.k_.add(2),await kl(t),t.K_.set("Unknown"))}function ta(r){return r.W_||(r.W_=function(t,s,o){const a=xe(t);return a.b_(),new P1(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(r.datastore,r.asyncQueue,{Ro:R1.bind(null,r),mo:N1.bind(null,r),po:D1.bind(null,r),R_:j1.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),ip(r)?sp(r):r.K_.set("Unknown")):(await r.W_.stop(),f0(r))})),r.W_}function Hs(r){return r.G_||(r.G_=function(t,s,o){const a=xe(t);return a.b_(),new C1(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:L1.bind(null,r),po:F1.bind(null,r),p_:V1.bind(null,r),y_:M1.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Wc(r)):(await r.G_.stop(),r.L_.length>0&&(ue("RemoteStore",`Stopping write stream with ${r.L_.length} pending writes`),r.L_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,s,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=a,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,a){const u=Date.now()+s,h=new op(e,t,u,o,a);return h.start(s),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(r,e){if(Xr("AsyncQueue",`${e}: ${r}`),Zo(r))return new ce(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Za(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.z_=new ut(ve.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ie():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class qo{constructor(e,t,s,o,a,u,h,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,a){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new qo(e,t,Oo.emptySet(t),u,s,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class z1{constructor(){this.queries=Qy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=xe(t),a=o.queries;o.queries=Qy(),a.forEach((u,h)=>{for(const p of h.J_)p.onError(s)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function Qy(){return new Vi(r=>M_(r),Fc)}async function y0(r,e){const t=xe(r);let s=3;const o=e.query;let a=t.queries.get(o);a?!a.Y_()&&e.Z_()&&(s=2):(a=new B1,s=e.Z_()?0:1);try{switch(s){case 0:a.H_=await t.onListen(o,!0);break;case 1:a.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const h=ap(u,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&lp(t)}async function v0(r,e){const t=xe(r),s=e.query;let o=3;const a=t.queries.get(s);if(a){const u=a.J_.indexOf(e);u>=0&&(a.J_.splice(u,1),a.J_.length===0?o=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function $1(r,e){const t=xe(r);let s=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const h of u.J_)h.ta(o)&&(s=!0);u.H_=o}}s&&lp(t)}function q1(r,e,t){const s=xe(r),o=s.queries.get(e);if(o)for(const a of o.J_)a.onError(t);s.queries.delete(e)}function lp(r){r.X_.forEach(e=>{e.next()})}var gf,Yy;(Yy=gf||(gf={})).na="default",Yy.Cache="cache";class _0{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new qo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.key=e}}class E0{constructor(e){this.key=e}}class H1{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=be(),this.mutatedKeys=be(),this.Va=F_(e),this.ma=new Oo(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new Ky,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,S)=>{const T=o.get(_),C=Uc(this.query,S)?S:null,P=!!T&&this.mutatedKeys.has(T.key),D=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let j=!1;T&&C?T.data.isEqual(C.data)?P!==D&&(s.track({type:3,doc:C}),j=!0):this.ya(T,C)||(s.track({type:2,doc:C}),j=!0,(p&&this.Va(C,p)>0||g&&this.Va(C,g)<0)&&(h=!0)):!T&&C?(s.track({type:0,doc:C}),j=!0):T&&!C&&(s.track({type:1,doc:T}),j=!0,(p||g)&&(h=!0)),j&&(C?(u=u.add(C),a=D?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),s.track({type:1,doc:_})}return{ma:u,pa:s,ss:h,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const u=e.pa.j_();u.sort((_,S)=>function(C,P){const D=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return D(C)-D(P)}(_.type,S.type)||this.Va(_.doc,S.doc)),this.wa(s),o=o!=null&&o;const h=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,g=p!==this.Aa;return this.Aa=p,u.length!==0||g?{snapshot:new qo(this.query,e.ma,a,u,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:h}:{ba:h}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Ky,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=be(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new E0(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new w0(s))}),t}va(e){this.da=e.ds,this.Ra=be();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return qo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class W1{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class G1{constructor(e){this.key=e,this.Fa=!1}}class K1{constructor(e,t,s,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ma={},this.xa=new Vi(h=>M_(h),Fc),this.Oa=new Map,this.Na=new Set,this.La=new ut(ve.comparator),this.Ba=new Map,this.ka=new Zf,this.qa={},this.Qa=new Map,this.Ka=$o.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Q1(r,e,t=!0){const s=x0(r);let o;const a=s.xa.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=await S0(s,e,t,!0),o}async function Y1(r,e){const t=x0(r);await S0(t,e,!0,!1)}async function S0(r,e,t,s){const o=await v1(r.localStore,Sr(e)),a=o.targetId,u=r.sharedClientState.addLocalQueryTarget(a,t);let h;return s&&(h=await X1(r,e,a,u==="current",o.resumeToken)),r.isPrimaryClient&&t&&d0(r.remoteStore,o),h}async function X1(r,e,t,s,o){r.Ua=(S,T,C)=>async function(D,j,q,Q){let H=j.view.ga(q);H.ss&&(H=await qy(D.localStore,j.query,!1).then(({documents:b})=>j.view.ga(b,H)));const X=Q&&Q.targetChanges.get(j.targetId),ye=Q&&Q.targetMismatches.get(j.targetId)!=null,pe=j.view.applyChanges(H,D.isPrimaryClient,X,ye);return Jy(D,j.targetId,pe.ba),pe.snapshot}(r,S,T,C);const a=await qy(r.localStore,e,!0),u=new H1(e,a.ds),h=u.ga(a.documents),p=xl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),g=u.applyChanges(h,r.isPrimaryClient,p);Jy(r,t,g.ba);const _=new W1(e,t,u);return r.xa.set(e,_),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),g.snapshot}async function J1(r,e,t){const s=xe(r),o=s.xa.get(e),a=s.Oa.get(o.targetId);if(a.length>1)return s.Oa.set(o.targetId,a.filter(u=>!Fc(u,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await mf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&np(s.remoteStore,o.targetId),yf(s,o.targetId)}).catch(Jo)):(yf(s,o.targetId),await mf(s.localStore,o.targetId,!0))}async function Z1(r,e){const t=xe(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),np(t.remoteStore,s.targetId))}async function ek(r,e,t){const s=ak(r);try{const o=await function(u,h){const p=xe(u),g=Ct.now(),_=h.reduce((C,P)=>C.add(P.key),be());let S,T;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let P=Jr(),D=be();return p.hs.getEntries(C,_).next(j=>{P=j,P.forEach((q,Q)=>{Q.isValidDocument()||(D=D.add(q))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,P)).next(j=>{S=j;const q=[];for(const Q of h){const H=_x(Q,S.get(Q.key).overlayedDocument);H!=null&&q.push(new Ys(Q.key,H,R_(H.value.mapValue),bn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,q,h)}).next(j=>{T=j;const q=j.applyToLocalDocumentSet(S,D);return p.documentOverlayCache.saveOverlays(C,j.batchId,q)})}).then(()=>({batchId:T.batchId,changes:B_(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(u,h,p){let g=u.qa[u.currentUser.toKey()];g||(g=new ut(Ve)),g=g.insert(h,p),u.qa[u.currentUser.toKey()]=g}(s,o.batchId,t),await Al(s,o.changes),await Wc(s.remoteStore)}catch(o){const a=ap(o,"Failed to persist write");t.reject(a)}}async function T0(r,e){const t=xe(r);try{const s=await m1(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Ba.get(a);u&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.Fa=!0:o.modifiedDocuments.size>0?We(u.Fa):o.removedDocuments.size>0&&(We(u.Fa),u.Fa=!1))}),await Al(t,s,e)}catch(s){await Jo(s)}}function Xy(r,e,t){const s=xe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((a,u)=>{const h=u.view.ea(e);h.snapshot&&o.push(h.snapshot)}),function(u,h){const p=xe(u);p.onlineState=h;let g=!1;p.queries.forEach((_,S)=>{for(const T of S.J_)T.ea(h)&&(g=!0)}),g&&lp(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tk(r,e,t){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ba.get(e),a=o&&o.key;if(a){let u=new ut(ve.comparator);u=u.insert(a,Qt.newNoDocument(a,Pe.min()));const h=be().add(a),p=new $c(Pe.min(),new Map,new ut(Ve),u,h);await T0(s,p),s.La=s.La.remove(a),s.Ba.delete(e),up(s)}else await mf(s.localStore,e,!1).then(()=>yf(s,e,t)).catch(Jo)}async function nk(r,e){const t=xe(r),s=e.batch.batchId;try{const o=await p1(t.localStore,e);P0(t,s,null),I0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Al(t,o)}catch(o){await Jo(o)}}async function rk(r,e,t){const s=xe(r);try{const o=await function(u,h){const p=xe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,h).next(S=>(We(S!==null),_=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(s.localStore,e);P0(s,e,t),I0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Al(s,o)}catch(o){await Jo(o)}}function I0(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function P0(r,e,t){const s=xe(r);let o=s.qa[s.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function yf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||C0(r,s)})}function C0(r,e){r.Na.delete(e.path.canonicalString());const t=r.La.get(e);t!==null&&(np(r.remoteStore,t),r.La=r.La.remove(e),r.Ba.delete(t),up(r))}function Jy(r,e,t){for(const s of t)s instanceof w0?(r.ka.addReference(s.key,e),sk(r,s)):s instanceof E0?(ue("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||C0(r,s.key)):Ie()}function sk(r,e){const t=e.key,s=t.path.canonicalString();r.La.get(t)||r.Na.has(s)||(ue("SyncEngine","New document in limbo: "+t),r.Na.add(s),up(r))}function up(r){for(;r.Na.size>0&&r.La.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new ve(et.fromString(e)),s=r.Ka.next();r.Ba.set(s,new G1(t)),r.La=r.La.insert(t,s),d0(r.remoteStore,new Os(Sr(Gf(t.path)),s,"TargetPurposeLimboResolution",Lc.oe))}}async function Al(r,e,t){const s=xe(r),o=[],a=[],u=[];s.xa.isEmpty()||(s.xa.forEach((h,p)=>{u.push(s.Ua(p,e,t).then(g=>{var _;if((g||t)&&s.isPrimaryClient){const S=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){o.push(g);const S=tp.zi(p.targetId,g);a.push(S)}}))}),await Promise.all(u),s.Ma.R_(o),await async function(p,g){const _=xe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Z.forEach(g,T=>Z.forEach(T.Wi,C=>_.persistence.referenceDelegate.addReference(S,T.targetId,C)).next(()=>Z.forEach(T.Gi,C=>_.persistence.referenceDelegate.removeReference(S,T.targetId,C)))))}catch(S){if(!Zo(S))throw S;ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of g){const T=S.targetId;if(!S.fromCache){const C=_.us.get(T),P=C.snapshotVersion,D=C.withLastLimboFreeSnapshotVersion(P);_.us=_.us.insert(T,D)}}}(s.localStore,a))}async function ik(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const s=await a0(t.localStore,e);t.currentUser=e,function(a,u){a.Qa.forEach(h=>{h.forEach(p=>{p.reject(new ce(J.CANCELLED,u))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Al(t,s.Ts)}}function ok(r,e){const t=xe(r),s=t.Ba.get(e);if(s&&s.Fa)return be().add(s.key);{let o=be();const a=t.Oa.get(e);if(!a)return o;for(const u of a){const h=t.xa.get(u);o=o.unionWith(h.view.fa)}return o}}function x0(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=T0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ok.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tk.bind(null,e),e.Ma.R_=$1.bind(null,e.eventManager),e.Ma.Wa=q1.bind(null,e.eventManager),e}function ak(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rk.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return f1(this.persistence,new d1,e.initialUser,this.serializer)}ja(e){return new o0(ep.ei,this.serializer)}za(e){return new w1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class lk extends kc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){We(this.persistence.referenceDelegate instanceof Cc);const s=this.persistence.referenceDelegate.garbageCollector;return new Yx(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new o0(s=>Cc.ei(s,t),this.serializer)}}class vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Xy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ik.bind(null,this.syncEngine),await U1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z1}()}createDatastore(e){const t=qc(e.databaseInfo.databaseId),s=function(a){return new I1(a)}(e.databaseInfo);return function(a,u,h,p){return new x1(a,u,h,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,a,u,h){return new A1(s,o,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Xy(this.syncEngine,t,0),function(){return Wy.p()?new Wy:new E1}())}createSyncEngine(e,t){return function(o,a,u,h,p,g,_){const S=new K1(o,a,u,h,p,g);return _&&(S.$a=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=xe(o);ue("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await kl(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,s,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Kt.UNAUTHENTICATED,this.clientId=x_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async u=>{ue("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(ue("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ap(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Hh(r,e){r.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await a0(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Zy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await ck(r);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Gy(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Gy(e.remoteStore,o)),r._onlineComponents=e}async function ck(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Fo("Error using user provided cache. Falling back to memory cache: "+t),await Hh(r,new kc)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Hh(r,new lk(void 0));return r._offlineComponents}async function A0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await Zy(r,r._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await Zy(r,new vf))),r._onlineComponents}function dk(r){return A0(r).then(e=>e.syncEngine)}async function R0(r){const e=await A0(r),t=e.eventManager;return t.onListen=Q1.bind(null,e.syncEngine),t.onUnlisten=J1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z1.bind(null,e.syncEngine),t}function hk(r,e,t={}){const s=new Kr;return r.asyncQueue.enqueueAndForget(async()=>function(a,u,h,p,g){const _=new k0({next:T=>{_.eu(),u.enqueueAndForget(()=>v0(a,S));const C=T.docs.has(h);!C&&T.fromCache?g.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?g.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),S=new _0(Gf(h.path),_,{includeMetadataChanges:!0,ua:!0});return y0(a,S)}(await R0(r),r.asyncQueue,e,t,s)),s.promise}function fk(r,e,t={}){const s=new Kr;return r.asyncQueue.enqueueAndForget(async()=>function(a,u,h,p,g){const _=new k0({next:T=>{_.eu(),u.enqueueAndForget(()=>v0(a,S)),T.fromCache&&p.source==="server"?g.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),S=new _0(h,_,{includeMetadataChanges:!0,ua:!0});return y0(a,S)}(await R0(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(r,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function pk(r,e,t,s){if(e===!0&&s===!0)throw new ce(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function tv(r){if(!ve.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function nv(r){if(ve.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ie()}function ir(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gc(r);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rv(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new CC;switch(s.type){case"firstParty":return new RC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=ev.get(t);s&&(ue("ComponentProvider","Removing Datastore"),ev.delete(t),s.terminate())}(this),Promise.resolve()}}function mk(r,e,t,s={}){var o;const a=(r=ir(r,Kc))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),s.mockUserToken){let h,p;if(typeof s.mockUserToken=="string")h=s.mockUserToken,p=Kt.MOCK_USER;else{h=MS(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Kt(g)}r._authCredentials=new xC(new C_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class tn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class Fs extends Xs{constructor(e,t,s){super(e,t,Gf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new ve(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function ot(r,e,...t){if(r=At(r),D0("collection","path",e),r instanceof Kc){const s=et.fromString(e,...t);return nv(s),new Fs(r,null,s)}{if(!(r instanceof tn||r instanceof Fs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...t));return nv(s),new Fs(r.firestore,null,s)}}function ht(r,e,...t){if(r=At(r),arguments.length===1&&(e=x_.newId()),D0("doc","path",e),r instanceof Kc){const s=et.fromString(e,...t);return tv(s),new tn(r,null,new ve(s))}{if(!(r instanceof tn||r instanceof Fs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...t));return tv(s),new tn(r.firestore,r instanceof Fs?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new u0(this,"async_queue_retry"),this.fu=()=>{const s=qh();s&&ue("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Kr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Zo(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(s);throw Xr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=op.createAndSchedule(this,e,t,s,a=>this.Su(a));return this.du.push(o),o}pu(){this.Au&&Ie()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Fi extends Kc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new sv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sv(e),this._firestoreClient=void 0,await e}}}function gk(r,e){const t=typeof r=="object"?r:Ov(),s=typeof r=="string"?r:"(default)",o=Rf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const a=LS("firestore");a&&mk(o,...a)}return o}function cp(r){if(r._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yk(r),r._firestoreClient}function yk(r){var e,t,s;const o=r._freezeSettings(),a=function(h,p,g,_){return new HC(h,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,N0(_.experimentalLongPollingOptions),_.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new uk(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(zt.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ho(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^__.*__$/;class _k{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class j0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class pp{constructor(e,t,s,o,a,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Lu(e),o}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ac(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(b0(this.Mu)&&vk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class wk{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||qc(e)}$u(e,t,s,o=!1){return new pp({Mu:e,methodName:t,Ku:s,path:Bt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(r){const e=r._freezeSettings(),t=qc(r._databaseId);return new wk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function O0(r,e,t,s,o,a={}){const u=r.$u(a.merge||a.mergeFields?2:0,e,t,o);mp("Data must be an object, but it was:",u,s);const h=L0(s,u);let p,g;if(a.merge)p=new En(u.fieldMask),g=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const S of a.mergeFields){const T=_f(e,S,t);if(!u.contains(T))throw new ce(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);M0(_,T)||_.push(T)}p=new En(_),g=u.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=u.fieldTransforms;return new _k(new hn(h),p,g)}class Xc extends dp{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xc}}function Ek(r,e,t,s){const o=r.$u(1,e,t);mp("Data must be an object, but it was:",o,s);const a=[],u=hn.empty();Qs(s,(p,g)=>{const _=gp(e,p,t);g=At(g);const S=o.Bu(_);if(g instanceof Xc)a.push(_);else{const T=Rl(g,S);T!=null&&(a.push(_),u.set(_,T))}});const h=new En(a);return new j0(u,h,o.fieldTransforms)}function Sk(r,e,t,s,o,a){const u=r.$u(1,e,t),h=[_f(e,s,t)],p=[o];if(a.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(_f(e,a[T])),p.push(a[T+1]);const g=[],_=hn.empty();for(let T=h.length-1;T>=0;--T)if(!M0(g,h[T])){const C=h[T];let P=p[T];P=At(P);const D=u.Bu(C);if(P instanceof Xc)g.push(C);else{const j=Rl(P,D);j!=null&&(g.push(C),_.set(C,j))}}const S=new En(g);return new j0(_,S,u.fieldTransforms)}function Tk(r,e,t,s=!1){return Rl(t,r.$u(s?4:3,e))}function Rl(r,e){if(V0(r=At(r)))return mp("Unsupported field value:",e,r),L0(r,e);if(r instanceof dp)return function(s,o){if(!b0(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const a=[];let u=0;for(const h of s){let p=Rl(h,o.ku(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}}(r,e)}return function(s,o){if((s=At(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return fx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Ct.fromDate(s);return{timestampValue:Pc(o.serializer,a)}}if(s instanceof Ct){const a=new Ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,a)}}if(s instanceof hp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ho)return{bytesValue:Z_(o.serializer,s._byteString)};if(s instanceof tn){const a=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(a))throw o.qu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof fp)return function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.qu("VectorValues must only contain numeric values.");return Kf(h.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${Gc(s)}`)}(r,e)}function L0(r,e){const t={};return k_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(r,(s,o)=>{const a=Rl(o,e.Ou(s));a!=null&&(t[s]=a)}),{mapValue:{fields:t}}}function V0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ct||r instanceof hp||r instanceof Ho||r instanceof tn||r instanceof dp||r instanceof fp)}function mp(r,e,t){if(!V0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=Gc(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function _f(r,e,t){if((e=At(e))instanceof Qc)return e._internalPath;if(typeof e=="string")return gp(r,e);throw Ac("Field path arguments must be of type string or ",r,!1,void 0,t)}const Ik=new RegExp("[~\\*/\\[\\]]");function gp(r,e,t){if(e.search(Ik)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ac(r,e,t,s,o){const a=s&&!s.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${s}`),u&&(p+=` in document ${o}`),p+=")"),new ce(J.INVALID_ARGUMENT,h+r+p)}function M0(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t,s,o,a){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Pk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Pk extends F0{data(){return super.data()}}function Jc(r,e){return typeof e=="string"?gp(r,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yp{}class vp extends yp{}function Ln(r,e,...t){let s=[];e instanceof yp&&s.push(e),s=s.concat(t),function(a){const u=a.filter(p=>p instanceof _p).length,h=a.filter(p=>p instanceof Zc).length;if(u>1||u>0&&h>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Zc extends vp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Zc(e,t,s)}_apply(e){const t=this._parse(e);return U0(e._query,t),new Xs(e.firestore,e.converter,cf(e._query,t))}_parse(e){const t=Yc(e.firestore);return function(a,u,h,p,g,_,S){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){ov(S,_);const C=[];for(const P of S)C.push(iv(p,a,P));T={arrayValue:{values:C}}}else T=iv(p,a,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||ov(S,_),T=Tk(h,u,S,_==="in"||_==="not-in");return Et.create(g,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Pr(r,e,t){const s=e,o=Jc("where",r);return Zc._create(o,s,t)}class _p extends yp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _p(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const h=a.getFlattenedFilters();for(const p of h)U0(u,p),u=cf(u,p)}(e._query,t),new Xs(e.firestore,e.converter,cf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wp extends vp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wp(e,t)}_apply(e){const t=function(o,a,u){if(o.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ml(a,u)}(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,function(o,a){const u=o.explicitOrderBy.concat([a]);return new ea(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function xk(r,e="asc"){const t=e,s=Jc("orderBy",r);return wp._create(s,t)}class Ep extends vp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ep(e,t,s)}_apply(e){return new Xs(e.firestore,e.converter,Sc(e._query,this._limit,this._limitType))}}function kk(r){return Ep._create("limit",r,"F")}function iv(r,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&t.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(et.fromString(t));if(!ve.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cy(r,new ve(s))}if(t instanceof tn)return Cy(r,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(t)}.`)}function ov(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U0(r,e){const t=function(o,a){for(const u of o)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ak{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Qs(e,(o,a)=>{s[o]=this.convertValue(a,t)}),s}convertVectorValue(e){var t,s,o;const a=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(u=>yt(u.doubleValue));return new fp(a)}convertGeoPoint(e){return new hp(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Mc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=zs(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=et.fromString(e);We(i0(s));const o=new fl(s.get(1),s.get(3)),a=new ve(s.popFirst(5));return o.isEqual(t)||Xr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class z0 extends F0{constructor(e,t,s,o,a,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Jc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class cc extends z0{data(e={}){return super.data(e)}}class Rk{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new cc(this._firestore,this._userDataWriter,s.key,s,new tl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(h=>{const p=new cc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new tl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const p=new cc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new tl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:Nk(h.type),doc:p,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Nk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(r){r=ir(r,tn);const e=ir(r.firestore,Fi);return hk(cp(e),r._key).then(t=>jk(e,r,t))}class $0 extends Ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}function St(r){r=ir(r,Xs);const e=ir(r.firestore,Fi),t=cp(e),s=new $0(e);return Ck(r._query),fk(t,r._query).then(o=>new Rk(e,s,r,o))}function Lo(r,e,t){r=ir(r,tn);const s=ir(r.firestore,Fi),o=B0(r.converter,e,t);return ed(s,[O0(Yc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,bn.none())])}function Wo(r,e,t,...s){r=ir(r,tn);const o=ir(r.firestore,Fi),a=Yc(o);let u;return u=typeof(e=At(e))=="string"||e instanceof Qc?Sk(a,"updateDoc",r._key,e,t,s):Ek(a,"updateDoc",r._key,e),ed(o,[u.toMutation(r._key,bn.exists(!0))])}function Sp(r){return ed(ir(r.firestore,Fi),[new Qf(r._key,bn.none())])}function Dk(r,e){const t=ir(r.firestore,Fi),s=ht(r),o=B0(r.converter,e);return ed(t,[O0(Yc(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,bn.exists(!1))]).then(()=>s)}function ed(r,e){return function(s,o){const a=new Kr;return s.asyncQueue.enqueueAndForget(async()=>ek(await dk(s),o,a)),a.promise}(cp(r),e)}function jk(r,e,t){const s=t.docs.get(e._key),o=new $0(r);return new z0(r,o,e._key,s,new tl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Xo=o})(Yo),Vo(new Di("firestore",(s,{instanceIdentifier:o,options:a})=>{const u=s.getProvider("app").getImmediate(),h=new Fi(new kC(s.getProvider("auth-internal")),new DC(s.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(g.options.projectId,_)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Ms(wy,"4.7.5",e),Ms(wy,"4.7.5","esm2017")})();const bk={apiKey:"AIzaSyBrrfnNfsXnnKFzbaEkYSxMpduywR6nyNY",authDomain:"ssd-projectupt.firebaseapp.com",databaseURL:"https://ssd-projectupt-default-rtdb.europe-west1.firebasedatabase.app",projectId:"ssd-projectupt",storageBucket:"ssd-projectupt.firebasestorage.app",messagingSenderId:"887894143853",appId:"1:887894143853:web:94ce211f6eefd30436a064",measurementId:"G-NKZRK5MKNY"},q0=bv(bk),kt=IC(q0),De=gk(q0),Ok=new zr,Lk=({email:r})=>{const e=es(),t=()=>{kt.signOut().then(()=>{e("/login")}).catch(s=>{console.error("Error logging out:",s)})};return f.jsxs("div",{className:"account-card",children:[f.jsxs("p",{children:["Email: ",r]}),f.jsx("button",{onClick:()=>e("/account"),className:"account-card-button",children:"Settings"}),f.jsx("button",{onClick:t,className:"account-card-button",children:"Logout"})]})},Vk="/assets/logo-SKH17Jt5.svg",Mk="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'%20?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20version='1.1'%20width='1080'%20height='1080'%20viewBox='0%200%201080%201080'%20xml:space='preserve'%3e%3cdesc%3eCreated%20with%20Fabric.js%205.2.4%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20transform='matrix(1%200%200%201%20540%20540)'%20id='447ebb11-53fe-4f0b-ba5c-00fd987bab1f'%20%3e%3crect%20style='stroke:%20none;%20stroke-width:%201;%20stroke-dasharray:%20none;%20stroke-linecap:%20butt;%20stroke-dashoffset:%200;%20stroke-linejoin:%20miter;%20stroke-miterlimit:%204;%20fill:%20rgb(255,255,255);%20fill-rule:%20nonzero;%20opacity:%201;%20visibility:%20hidden;'%20vector-effect='non-scaling-stroke'%20x='-540'%20y='-540'%20rx='0'%20ry='0'%20width='1080'%20height='1080'%20/%3e%3c/g%3e%3cg%20transform='matrix(1%200%200%201%20540%20540)'%20id='2257c5ce-1bd9-4854-ba17-b2592ae97650'%20%3e%3c/g%3e%3cg%20transform='matrix(1%200%200%201%20540%20584.57)'%20id='235f099d-7b73-477e-96b2-13d0f61b552e'%20%3e%3cpath%20style='stroke:%20rgb(0,0,0);%20stroke-width:%200;%20stroke-dasharray:%20none;%20stroke-linecap:%20butt;%20stroke-dashoffset:%200;%20stroke-linejoin:%20miter;%20stroke-miterlimit:%204;%20fill:%20rgb(212,212,212);%20fill-rule:%20nonzero;%20opacity:%201;'%20vector-effect='non-scaling-stroke'%20transform='%20translate(-212.25,%20-221)'%20d='M%20400.5%20201.5%20L%20126%20246.5%20C%20100.5%20269%20127.504%20288.5%20127.504%20288.5%20L%20396%20290%20L%20396%20327.5%20L%20100.5%20324.5%20C%2088.5%20317%2079.508%20293%2076.5%20272%20C%2073.5%20251%2096%20228.5%2096%20228.5%20L%2049.508%2053%20L%2024%2053%20L%2018%2020%20L%2082.504%2020%20L%2099%2074%20L%20406.5%2072.5%20L%20400.5%20201.5%20z%20M%20153%20341%20C%20175.367%20341%20193.5%20359.129%20193.5%20381.5%20C%20193.5%20403.867%20175.367%20422%20153%20422%20C%20130.629%20422%20112.50399999999999%20403.867%20112.50399999999999%20381.5%20C%20112.504%20359.129%20130.629%20341%20153%20341%20z%20M%20351%20341%20C%20373.375%20341%20391.5%20359.129%20391.5%20381.5%20C%20391.5%20403.867%20373.375%20422%20351%20422%20C%20328.637%20422%20310.5%20403.867%20310.5%20381.5%20C%20310.5%20359.129%20328.637%20341%20351%20341%20z'%20stroke-linecap='round'%20/%3e%3c/g%3e%3c/svg%3e",Fk="/assets/account-CaAshNGu.svg",Uk="/assets/account-logged-DzDvTs3D.svg",Bk="/assets/database-C28WwEO-.svg",ki=["qghgRT4yUFNSIFQBsnXVORbOTt13","oorrtEJxlQPG6XYUxGMDNDb2ZI62"],zk=()=>{const[r,e]=k.useState(""),[t,s]=k.useState(null),[o,a]=k.useState(!1),u=es();k.useEffect(()=>{const _=kt.onAuthStateChanged(S=>{s(S||null)});return()=>_()},[]);const h=_=>{e(_.target.value)},p=_=>{_.preventDefault(),u(`/search?query=${r}`)},g=_=>{t||(_.preventDefault(),u("/login"))};return f.jsx("nav",{className:"MainMenu-navbar",children:f.jsxs("ul",{className:"MainMenu-navbar-menu",children:[f.jsx("li",{children:f.jsx(Ae,{to:"/home",children:f.jsx("img",{src:Vk,alt:"ProjectSSD Logo",className:"MainMenu-navbar-logo"})})}),f.jsx("li",{children:f.jsx("form",{onSubmit:p,children:f.jsx("input",{type:"text",placeholder:"Search...",className:"MainMenu-searchbar",value:r,onChange:h})})}),f.jsx("div",{className:"MainMenu-spacer"}),f.jsx("li",{children:f.jsx(Ae,{to:"/basket",children:f.jsx("img",{src:Mk,alt:"Basket Icon",className:"MainMenu-navbar-basket"})})}),f.jsxs("li",{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[f.jsx(Ae,{to:t?"/account":"/login",onClick:g,children:f.jsx("img",{src:t?Uk:Fk,alt:"Account Icon",className:"MainMenu-navbar-account",title:t?t.email:"Account"})}),t&&o&&f.jsx(Lk,{email:t.email})]}),t&&ki.includes(t.uid)&&f.jsx("li",{children:f.jsx(Ae,{to:"/database",children:f.jsx("img",{src:Bk,alt:"Database Icon",className:"MainMenu-navbar-database"})})})]})})},$k=()=>{const[r,e]=k.useState(!1),t=()=>{e(!r)};return f.jsx("nav",{className:"SecondaryMenu-navbar",children:f.jsxs("ul",{className:"SecondaryMenu-navbar-menu",children:[f.jsxs("li",{onMouseEnter:t,onMouseLeave:t,children:[f.jsx(Ae,{to:"#",children:"Products"}),r&&f.jsxs("ul",{className:"dropdown-menu",children:[f.jsx("li",{children:f.jsx(Ae,{to:"/internal-ssds",children:"Internal SSDs"})}),f.jsx("li",{children:f.jsx(Ae,{to:"/external-ssds",children:"External SSDs"})}),f.jsx("li",{children:f.jsx(Ae,{to:"/ssd-accessories",children:"SSD Accesories"})}),f.jsx("li",{children:f.jsx(Ae,{to:"/ssd-software",children:"Software Products"})})]})]}),f.jsx("li",{children:f.jsx(Ae,{to:"/special-deals",children:"Special Deals"})}),f.jsx("li",{children:f.jsx(Ae,{to:"/info",children:"Info"})}),f.jsx("li",{children:f.jsx(Ae,{to:"/contact",children:"Contact"})}),f.jsx("li",{children:f.jsx(Ae,{to:"/customer-support",children:"Customer Support"})})]})})};function qk({children:r}){const[e,t]=k.useState(0),[s,o]=k.useState(!0),[a,u]=k.useState(null);k.useEffect(()=>{s&&(o(!1),u(setTimeout(()=>{h(),o(!0)},1e4)))},[s]);const h=()=>{t(S=>S>=r.length-1?0:S+1)},p=()=>{t(S=>S<=0?r.length-1:S-1)},g=()=>{a>0&&(clearTimeout(a),o(!1))},_=()=>{s||o(!0)};return f.jsxs("div",{className:"container__slider",onMouseEnter:g,onMouseLeave:_,children:[r.map((S,T)=>f.jsx("div",{className:"slider__item slider__item-active-"+(e+1),children:S},T)),f.jsx("div",{className:"container__slider__links",children:r.map((S,T)=>f.jsx("button",{className:e===T?"container__slider__links-small container__slider__links-small-active":"container__slider__links-small",onClick:C=>{C.preventDefault(),t(T)}},T))}),f.jsx("button",{className:"slider__btn-next",onClick:S=>{S.preventDefault(),h()},children:">"}),f.jsx("button",{className:"slider__btn-prev",onClick:S=>{S.preventDefault(),p()},children:"<"})]})}const Hk={"Internal SSDs":"internal-ssds","External SSDs":"external-ssds",Software:"ssd-software","SSD Accessories":"ssd-accessories"},Wk=({id:r,image:e="https://via.placeholder.com/200",title:t="Default Product",inStock:s=!1,price:o="0.00",oldPrice:a="0.00",category:u="internal",addToCart:h})=>{const p=Hk[u]||u,g=_=>{s?(_.preventDefault(),h(r)):_.preventDefault()};return f.jsxs(Ae,{to:`/${p}/${r}`,className:"ProductCardHome-product-card",children:[f.jsx("img",{src:e,alt:t,className:"ProductCardHome-product-image"}),f.jsx("h2",{className:"ProductCardHome-product-title",children:t}),a>0&&f.jsxs("p",{className:"ProductCardHome-product-old-price",children:["$",a]}),f.jsxs("p",{className:"ProductCardHome-product-price",children:["$",o]}),f.jsx("p",{className:`ProductCardHome-product-stock ${s?"in-stock":"out-of-stock"}`,children:s?"In Stock":"Out of Stock"}),f.jsx("button",{onClick:g,className:`ProductCardHome-add-to-cart-button ${s?"":"disabled"}`,children:"Add to Cart"})]})},H0=k.createContext(),td=()=>k.useContext(H0),Gk=({children:r})=>{const[e,t]=k.useState([]),[s,o]=k.useState(0),a=async p=>{const g=kt.currentUser;if(!g){alert("You need to log in to add items to your cart.");return}try{const _=ht(De,"basket",g.uid),S=ot(_,"basket"),T=ht(S,p.id),C=await Ws(T);if(C.exists()){const P=C.data();await Wo(T,{quantity:P.quantity+1}),t(D=>D.map(j=>j.id===p.id?{...j,quantity:j.quantity+1}:j))}else await Lo(T,{...p,quantity:1}),t(P=>[...P,{...p,quantity:1}]);alert("Product added to cart!")}catch(_){console.error("Error adding product to cart: ",_),alert("Failed to add product to cart.")}},u=async p=>{const g=kt.currentUser;if(!g){alert("You need to log in to remove items from your cart.");return}try{const _=ht(De,"basket",g.uid),S=ot(_,"basket"),T=ht(S,p);await Sp(T),t(C=>C.filter(P=>P.id!==p)),window.location.reload()}catch(_){console.error("Error removing product from cart: ",_),alert("Failed to remove product from cart.")}},h=async(p,g)=>{const _=kt.currentUser;if(!_){alert("You need to log in to update item quantities.");return}try{const S=ht(De,"basket",_.uid),T=ot(S,"basket"),C=ht(T,p);(await Ws(C)).exists()&&(await Wo(C,{quantity:g}),t(D=>D.map(j=>j.id===p?{...j,quantity:g}:j)),window.location.reload())}catch(S){console.error("Error updating product quantity: ",S),alert("Failed to update product quantity.")}};return f.jsx(H0.Provider,{value:{basket:e,addToCart:a,removeFromCart:u,updateQuantity:h,refreshKey:s},children:r})};function Kk(){const[r,e]=k.useState([]),{addToCart:t}=td();return k.useEffect(()=>{(async()=>{const o=Ln(ot(De,"products"),Pr("oldPrice",">",0)),h=(await St(o)).docs.map(p=>({id:p.id,...p.data()})).filter(p=>p.inStock).map(p=>({...p,discount:p.oldPrice-p.price})).sort((p,g)=>g.discount-p.discount).slice(0,5);e(h)})()},[]),f.jsxs("div",{className:"ProductCatalogHome-product-catalog",children:[f.jsx("h1",{className:"ProductCatalogHome-heading",children:"Best Deals"}),f.jsx("div",{className:"ProductCatalogHome-product-grid",children:r.map(s=>f.jsx(Wk,{id:s.id,image:s.image,title:s.title,inStock:s.inStock,price:s.price,oldPrice:s.oldPrice,category:s.category,addToCart:()=>t(s)},s.id))})]})}const Qk="/assets/prom1-DfoqBOYB.jpg",Yk="/assets/prom2-B-skkQtP.jpg",Xk="/assets/prom3-CjcqEYHx.jpg",Jk=[{imgURL:Qk,imgAlt:"Promotion 1"},{imgURL:Yk,imgAlt:"Promotion 2"},{imgURL:Xk,imgAlt:"Promotion 3"}];function av(){return f.jsxs("div",{className:"Home",children:[f.jsx("div",{className:"Home-card",children:f.jsx(qk,{children:Jk.map((r,e)=>f.jsx("img",{src:r.imgURL,alt:r.imgAlt},e))})}),f.jsx("div",{className:"Home-card",children:f.jsx(Kk,{})})]})}const Zk={"Internal SSDs":"internal-ssds","External SSDs":"external-ssds",Software:"ssd-software","SSD Accessories":"ssd-accessories"},eA=({id:r,image:e="https://via.placeholder.com/200",title:t="Default Product",inStock:s=!1,price:o=0,oldPrice:a=0,category:u="internal",quantity:h=1,removeFromCart:p,updateQuantity:g})=>{const[_,S]=k.useState(h),T=()=>{const j=_+1;S(j),g(r,j)},C=()=>{if(_>1){const j=_-1;S(j),g(r,j)}},P=Zk[u]||u,D=(o*_).toFixed(2);return f.jsxs("div",{className:"ProductCardBasket-product-card",children:[f.jsx("img",{src:e,alt:t,className:"ProductCardBasket-product-image"}),f.jsxs("div",{className:"ProductCardBasket-details",children:[f.jsx(Ae,{to:`/${P}/${r}`,className:"ProductCardBasket-product-link",children:f.jsx("h2",{className:"ProductCardBasket-product-title",children:t})}),f.jsx("p",{className:`ProductCardBasket-product-stock ${s?"in-stock":"out-of-stock"}`,children:s?"In Stock":"Out of Stock"})]}),f.jsxs("div",{className:"ProductCardBasket-price-container",children:[a>0&&f.jsxs("p",{className:"ProductCardBasket-product-old-price",children:["$",a.toFixed(2)]}),f.jsxs("p",{className:"ProductCardBasket-product-price",children:["$",D]}),f.jsxs("div",{className:"ProductCardBasket-quantity-container",children:[f.jsx("button",{onClick:C,className:"ProductCardBasket-quantity-button",children:"-"}),f.jsx("span",{className:"ProductCardBasket-quantity",children:_}),f.jsx("button",{onClick:T,className:"ProductCardBasket-quantity-button",children:"+"})]}),f.jsx("button",{onClick:j=>{j.preventDefault(),p(r)},className:"ProductCardBasket-remove-from-cart-button",children:"Remove"})]})]})},tA=({initialProducts:r=[],onQuantityChange:e})=>{const{removeFromCart:t,updateQuantity:s}=td(),[o,a]=k.useState(r),u=(h,p)=>{a(g=>g.map(_=>_.id===h?{..._,quantity:p}:_)),s(h,p),e(o)};return k.useEffect(()=>{a(r)},[r]),f.jsx("div",{className:"BasketProductList",children:o.map(h=>f.jsx(eA,{id:h.id,image:h.image,title:h.title,inStock:h.inStock,price:h.price,oldPrice:h.oldPrice,category:h.category,quantity:h.quantity,removeFromCart:()=>t(h.id),updateQuantity:u},h.id))})},lv={UPT10:10,UPT25:25,UPT50:50},nA=({products:r,onQuantityChange:e,shippingCost:t=15})=>{const[s,o]=k.useState(""),[a,u]=k.useState(""),[h,p]=k.useState(0),g=es(),_=()=>r.reduce((H,X)=>H+X.price*X.quantity,0),[S,T]=k.useState(_());k.useEffect(()=>{T(_())},[r]);const C=S>50?0:t,P=S*(h/100),D=(S-P).toFixed(2),j=()=>{if(lv[s]){const H=Math.min(lv[s],90);p(H),u(s)}else alert("Invalid discount code"),p(0),u("")},q=()=>{o(""),u(""),p(0)},Q=async()=>{const H=kt.currentUser;if(H)try{const X=ht(De,"basket",H.uid);(await Ws(X)).exists()||await Lo(X,{}),await Wo(X,{cost:parseFloat(D),discount:parseFloat(P),shippingcost:parseFloat(C.toFixed(2))}),g("/order-details")}catch(X){console.error("Error updating cost and shipping cost: ",X),alert("Failed to proceed to checkout")}else g("/order-details")};return f.jsxs("div",{className:"BasketSummaryMenu",children:[f.jsx("h2",{children:"Summary"}),f.jsxs("p",{children:["Item(s): $",D]}),h>0&&f.jsxs("p",{className:"discounted-amount",children:["Discount: -$",P.toFixed(2)]}),f.jsxs("p",{children:["Shipping:",f.jsx("span",{className:C===0?"free-shipping":"",children:C===0?" Free":` $${C.toFixed(2)}`})]}),a&&f.jsxs("p",{className:"current-code",onClick:q,children:["Code: ",a," (Click to remove)"]}),f.jsxs("div",{className:"discount-code-container",children:[f.jsx("input",{type:"text",placeholder:"Enter ClientDealCode",value:s,onChange:H=>o(H.target.value)}),f.jsx("button",{onClick:j,children:"Apply"})]}),f.jsx("button",{className:"checkout-button",onClick:Q,children:"Proceed to checkout"})]})},rA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState(!0);k.useEffect(()=>{const u=async p=>{try{const g=ht(De,"basket",p.uid),_=ot(g,"basket"),S=Ln(_),C=(await St(S)).docs.map(P=>({id:P.id,...P.data()}));e(C)}catch(g){console.error("Error fetching basket products: ",g),e([])}finally{s(!1)}},h=l_(kt,p=>{p?u(p):s(!1)});return()=>h()},[]);const o=u=>{e(u)};if(t)return f.jsx("p",{children:"Loading..."});if(r.length===0)return f.jsxs("div",{className:"Basket-empty",children:[f.jsx("h1",{children:"Your basket is empty"}),f.jsx(Ae,{to:"/",className:"Basket-home-link",children:f.jsx("button",{children:"Go to Home"})})]});const a=r.filter(u=>u.inStock);return f.jsxs("div",{className:"Basket-container",children:[f.jsxs("div",{className:"Basket-product-list",children:[f.jsx("h1",{children:"Shopping Basket"}),f.jsx(tA,{initialProducts:a,onQuantityChange:o})]}),f.jsx("div",{className:"Basket-summary",children:f.jsx(nA,{products:a,onQuantityChange:o})})]})},sA=()=>{const[r,e]=k.useState(""),[t,s]=k.useState(""),[o,a]=k.useState(""),[u,h]=k.useState(""),[p,g]=k.useState(""),[_,S]=k.useState(""),[T,C]=k.useState(""),P=kt.currentUser;k.useEffect(()=>{(async()=>{if(P){const q=ht(De,"users",P.uid);try{const Q=await Ws(q);if(Q.exists()){const H=Q.data();e(H.firstName||""),s(H.lastName||""),a(H.address||""),h(H.phone||""),g(H.email||"")}else console.log("No such document!")}catch(Q){console.error("Error fetching document:",Q),S("Failed to load your personal details.")}}})()},[P]);const D=async j=>{if(j.preventDefault(),!P){S("User not logged in.");return}const q=ht(De,"users",P.uid);try{await Lo(q,{firstName:r,lastName:t,address:o,phone:u,email:p},{merge:!0}),C("Personal details updated successfully!"),S("")}catch(Q){console.error("Error updating document:",Q),S("Failed to update your personal details."),C("")}};return f.jsxs("div",{className:"personalDetails-container",children:[f.jsx("h1",{children:"Personal Details"}),f.jsxs("form",{onSubmit:D,children:[f.jsxs("div",{className:"personalDetails-form-group",children:[f.jsxs("label",{children:[f.jsx("h2",{children:"First Name"}),f.jsx("input",{type:"text",value:r,onChange:j=>e(j.target.value)})]}),f.jsxs("label",{children:[f.jsx("h2",{children:"Last Name"}),f.jsx("input",{type:"text",value:t,onChange:j=>s(j.target.value)})]})]}),f.jsx("div",{className:"personalDetails-form-group",children:f.jsxs("label",{children:[f.jsx("h2",{children:"Address"}),f.jsx("input",{type:"text",value:o,onChange:j=>a(j.target.value)})]})}),f.jsx("div",{className:"personalDetails-form-group",children:f.jsxs("label",{children:[f.jsx("h2",{children:"Phone"}),f.jsx("input",{type:"text",value:u,onChange:j=>h(j.target.value)})]})}),f.jsx("div",{className:"personalDetails-form-group",children:f.jsxs("label",{children:[f.jsx("h2",{children:"Email"}),f.jsx("input",{type:"email",value:p,onChange:j=>g(j.target.value)})]})}),_&&f.jsx("p",{className:"error-message",children:_}),T&&f.jsx("p",{className:"success-message",children:T}),f.jsx("button",{type:"submit",className:"personalDetails-submit-button",children:"Save Changes"})]})]})},iA=({accountData:r})=>{const e=es(),t=()=>{e("/orders")},s=()=>{e("/security-options")};return f.jsx("div",{className:"Account-container",children:f.jsxs("div",{className:"Account-details",children:[f.jsxs("div",{className:"Account-buttons",children:[f.jsx("button",{onClick:t,className:"account-button",children:"My Orders"}),f.jsx("button",{onClick:s,className:"account-button",children:"Security Options"})]}),f.jsx(sA,{accountData:r})]})})},oA=({basketProducts:r,shippingCost:e=-1,orderCost:t=-1,discount:s=-1})=>{const[o,a]=k.useState(""),[u,h]=k.useState(""),[p,g]=k.useState(""),[_,S]=k.useState(""),[T,C]=k.useState(!1),[P,D]=k.useState(""),[j,q]=k.useState(""),[Q,H]=k.useState(0),[X,ye]=k.useState(""),[pe,b]=k.useState(""),[A,x]=k.useState(""),[O,M]=k.useState(""),[U,N]=k.useState(""),He=kt.currentUser;k.useEffect(()=>{(async()=>{if(He){const he=ht(De,"users",He.uid);try{const oe=await Ws(he);if(oe.exists()){const F=oe.data(),Y=F.firstName||"",le=F.lastName||"",Ee=F.address||"",Ce=F.phone||"",ke=F.email||"";ye(Y),b(le),x(Ee),M(Ce),N(ke),g(Ee)}else console.log("No such document!")}catch(oe){console.error("Error fetching document:",oe)}}})()},[He]),k.useEffect(()=>{(async()=>{try{const he=ot(De,"orders"),oe=Ln(he,xk("id","desc"),kk(1)),F=await St(oe);if(!F.empty){const le=F.docs[0].data().id.replace("ORD",""),Ee=parseInt(le,16);H(Ee)}}catch(he){console.error("Error fetching last order number:",he)}})()},[]);const ct=()=>`ORD${(Q+1).toString(16).padStart(6,"0").toUpperCase()}`,tt=async()=>{if(!o||!p||!T&&!_||!P||!X||!pe||!O||!U){q("Please fill in all required fields.");return}if(o==="Home delivery"&&!u){q("Please select a courier for Home delivery.");return}const K=kt.currentUser;if(K){const he={id:ct(),userId:K.uid,date:new Date().toISOString().split("T")[0],totalValue:e+t,orderCost:t,shippingCost:e,discount:s,deliveryOption:o,deliveryAddress:p,billingAddress:T?p:_,paymentMethod:P,status:2,products:r,courierChoice:o==="Home delivery"?u:"Pick-up box",customerDetails:{firstName:X,lastName:pe,phone:O,email:U}},oe=ot(De,"basket",K.uid,"basket"),Y=(await St(oe)).docs.map(le=>Sp(le.ref));await Promise.all(Y);try{await Dk(ot(De,"orders"),he),alert("Order placed successfully!"),a(""),h(""),g(""),S(""),C(!1),D(""),q(""),H(le=>le+1)}catch(le){q("Failed to place order. Please try again."),console.error("Error adding order: ",le)}}else q("You must be logged in to place an order.")},Me=()=>{S(T?p:"")};return f.jsxs("div",{className:"orderForm-container",children:[f.jsx("h2",{children:"Order Summary"}),f.jsxs("table",{className:"orderForm-product-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Product Image"}),f.jsx("th",{children:"Product Title"}),f.jsx("th",{children:"Quantity"}),f.jsx("th",{children:"Price"})]})}),f.jsx("tbody",{children:r.map(K=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx("img",{src:K.image,alt:K.title,className:"orderForm-product-image"})}),f.jsx("td",{children:K.title}),f.jsx("td",{children:K.quantity}),f.jsxs("td",{children:["$",K.price.toFixed(2)*K.quantity]})]},K.id))})]}),f.jsx("h3",{children:"Delivery Options"}),f.jsxs("div",{className:"orderForm-delivery-options",children:[f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"deliveryOption",value:"Home delivery",checked:o==="Home delivery",onChange:K=>a(K.target.value)}),"Home delivery"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"deliveryOption",value:"Pick-up box",checked:o==="Pick-up box",onChange:K=>a(K.target.value)}),"Pick-up box"]})]}),o==="Home delivery"&&f.jsxs(f.Fragment,{children:[f.jsx("h3",{children:"Courier Choice"}),f.jsxs("div",{className:"orderForm-courier-choice",children:[f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"courier",value:"FastTrack Delivery",checked:u==="FastTrack Delivery",onChange:K=>h(K.target.value)}),"FastTrack Delivery"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"courier",value:"QuickShip Express",checked:u==="QuickShip Express",onChange:K=>h(K.target.value)}),"QuickShip Express"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"courier",value:"Speedy Couriers",checked:u==="Speedy Couriers",onChange:K=>h(K.target.value)}),"Speedy Couriers"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"courier",value:"Reliable Delivery Co.",checked:u==="Reliable Delivery Co.",onChange:K=>h(K.target.value)}),"Reliable Delivery Co."]})]})]}),f.jsxs("div",{className:"orderForm-personal-details",children:[f.jsx("h3",{children:"Your Details"}),f.jsxs("label",{children:["First Name:",f.jsx("input",{type:"text",value:X,onChange:K=>ye(K.target.value),className:"orderForm-input"})]}),f.jsxs("label",{children:["Last Name:",f.jsx("input",{type:"text",value:pe,onChange:K=>b(K.target.value),className:"orderForm-input"})]}),f.jsxs("label",{children:["Phone:",f.jsx("input",{type:"text",value:O,onChange:K=>M(K.target.value),className:"orderForm-input"})]}),f.jsxs("label",{children:["Email:",f.jsx("input",{type:"email",value:U,onChange:K=>N(K.target.value),className:"orderForm-input"})]})]}),f.jsx("h3",{children:"Delivery Address"}),f.jsx("textarea",{value:A,onChange:K=>{x(K.target.value),g(K.target.value)},placeholder:"",className:"orderForm-textarea"}),f.jsx("h3",{children:"Billing Address"}),f.jsxs("label",{className:"orderForm-checkbox-label",children:[f.jsx("input",{type:"checkbox",checked:T,onChange:K=>{C(K.target.checked),Me()}}),f.jsx("span",{className:"orderForm-custom-checkbox"}),"Same as Delivery Address"]}),f.jsx("textarea",{value:T?p:_,onChange:K=>S(K.target.value),placeholder:"Enter Billing Address",disabled:T,className:"orderForm-textarea"}),f.jsx("h3",{children:"Payment Method"}),f.jsxs("div",{className:"orderForm-payment-methods",children:[f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"paymentMethod",value:"Cash on Delivery",checked:P==="Cash on Delivery",onChange:K=>D(K.target.value)}),"Cash on Delivery"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"paymentMethod",value:"Credit Card (Visa, MasterCard)",checked:P==="Credit Card (Visa, MasterCard)",onChange:K=>D(K.target.value)}),"Credit Card (Visa, MasterCard)"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"paymentMethod",value:"Bank Transfer",checked:P==="Bank Transfer",onChange:K=>D(K.target.value)}),"Bank Transfer"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"paymentMethod",value:"PayPal",checked:P==="PayPal",onChange:K=>D(K.target.value)}),"PayPal"]}),f.jsxs("label",{children:[f.jsx("input",{type:"radio",name:"paymentMethod",value:"Financing Options",checked:P==="Financing Options",onChange:K=>D(K.target.value)}),"Financing Options (split the payment over multiple months)"]})]}),j&&f.jsx("p",{className:"orderForm-error-message",children:j}),f.jsx("button",{onClick:tt,className:"orderForm-submit-button",children:"Order"})]})},aA=({products:r})=>{const[e,t]=k.useState(0),[s,o]=k.useState(0),[a,u]=k.useState(0),[h,p]=k.useState(!0);if(k.useEffect(()=>{(async()=>{const S=kt.currentUser;if(S)try{const T=ht(De,"basket",S.uid),C=await Ws(T);C.exists()&&(t(C.data().cost||0),o(C.data().shippingcost||0),u(C.data().discount||0))}catch(T){console.error("Error fetching order summary: ",T)}finally{p(!1)}})()},[]),h)return f.jsx("p",{children:"Loading..."});const g=e;return f.jsxs("div",{className:"OrderSummary",children:[f.jsx("h2",{children:"Summary"}),f.jsxs("p",{children:["Item(s): $",g.toFixed(2)]}),a>0&&f.jsxs("p",{className:"order-discounted-amount",children:["Discount: -$",a.toFixed(2)]}),f.jsxs("p",{children:["Shipping:",f.jsx("span",{className:s===0?"order-free-shipping":"",children:s===0?" Free":` $${s.toFixed(2)}`})]})]})},lA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState(!0),[o,a]=k.useState(0),[u,h]=k.useState(0),[p,g]=k.useState(0);return k.useEffect(()=>{const _=async T=>{try{const C=ht(De,"basket",T.uid),P=ot(C,"basket"),D=Ln(P),q=(await St(D)).docs.map(H=>({id:H.id,...H.data()}));e(q);const Q=await Ws(C);Q.exists()&&(a(Q.data().cost||0),h(Q.data().shippingcost||0),g(Q.data().discount||0))}catch(C){console.error("Error fetching basket products: ",C),e([])}finally{s(!1)}},S=l_(kt,T=>{T?_(T):s(!1)});return()=>S()},[]),t?f.jsx("p",{children:"Loading..."}):r.length===0?f.jsx("p",{children:"Your basket is empty"}):f.jsxs("div",{className:"OrderDetails-container",children:[f.jsx("div",{className:"OrderDetails-form",children:f.jsx(oA,{basketProducts:r,shippingCost:u,orderCost:o,discount:p})}),f.jsx("div",{className:"OrderDetails-summary",children:f.jsx(aA,{products:r})})]})},uA=({date:r,totalValue:e})=>f.jsxs("div",{className:"orderBasicInfo-container",children:[f.jsxs("div",{className:"orderBasicInfo-item",children:[f.jsx("h3",{children:"Order Date:"}),f.jsx("p",{children:r})]}),f.jsxs("div",{className:"orderBasicInfo-item",children:[f.jsx("h3",{children:"Total Value:"}),f.jsxs("p",{children:["$",e.toFixed(2)]})]})]}),cA={"Internal SSDs":"internal-ssds","External SSDs":"external-ssds",Software:"ssd-software","SSD Accessories":"ssd-accessories"},dA=({id:r,image:e="https://via.placeholder.com/200",title:t="Default Product",quantity:s=1,price:o="0.00",category:a="internal"})=>{const u=(o*s).toFixed(2),h=cA[a]||a;return f.jsxs("div",{className:"ProductCardOrder-product-card",children:[f.jsx(Ae,{to:`/${h}/${r}`,className:"ProductCardOrder-product-image-link",children:f.jsx("img",{src:e,alt:t,className:"ProductCardOrder-product-image"})}),f.jsxs("div",{className:"ProductCardOrder-details",children:[f.jsx("h2",{className:"ProductCardOrder-product-title",children:t}),f.jsxs("div",{className:"ProductCardOrder-price-container",children:[f.jsxs("p",{className:"ProductCardOrder-product-price",children:["$",u]}),f.jsxs("p",{className:"ProductCardOrder-product-quantity",children:["Qty: ",s]})]})]})]})},hA=({deliveryOption:r,courierChoice:e,deliveryAddress:t,billingAddress:s,paymentMethod:o,products:a,shippingCost:u,discount:h,orderCost:p,firstName:g,lastName:_,phone:S,email:T,totalValue:C})=>f.jsxs("div",{className:"orderInfo-container",children:[f.jsxs("div",{className:"orderInfo-details",children:[f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Delivery Option:"}),f.jsx("p",{children:r})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Courier Choice:"}),f.jsx("p",{children:e})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"First Name:"}),f.jsx("p",{children:g||"/"})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Last Name:"}),f.jsx("p",{children:_||"/"})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Phone:"}),f.jsx("p",{children:S||"/"})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Email:"}),f.jsx("p",{children:T||"/"})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Delivery Address:"}),f.jsx("p",{children:t||"/"})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Billing Address:"}),f.jsx("p",{children:s||"/"})]}),f.jsxs("div",{className:"orderInfo-item",children:[f.jsx("h3",{children:"Payment Method:"}),f.jsx("p",{children:o})]})]}),f.jsx("div",{className:"orderInfo-products",children:a.map(P=>f.jsx(dA,{...P},P.id))}),f.jsxs("div",{className:"orderInfo-cost",children:[f.jsx("h3",{children:"Order Cost :"}),f.jsxs("p",{children:["$",(p+h).toFixed(2)]})]}),f.jsxs("div",{className:"orderInfo-shipping",children:[f.jsx("h3",{children:"Shipping Fees:"}),f.jsxs("p",{children:["$",u.toFixed(2)]})]}),h>0&&f.jsxs("div",{className:"orderInfo-discount",children:[f.jsx("h3",{children:"Discount :"}),f.jsxs("p",{children:["-$",h.toFixed(2)]})]}),f.jsxs("div",{className:"orderInfo-total",children:[f.jsx("h3",{children:"Total Value:"}),f.jsxs("p",{children:["$",C.toFixed(2)]})]})]}),fA=()=>{const{orderId:r}=_v(),[e,t]=k.useState(null),[s,o]=k.useState(!0),[a,u]=k.useState("");return k.useEffect(()=>{(async()=>{try{const p=kt.currentUser;if(!p){u("You need to be logged in to view this page"),o(!1);return}const g=Ln(ot(De,"orders"),Pr("id","==",r)),_=await St(g);if(_.empty)u(`Order not found: ${r}`);else{const S=_.docs[0],T={id:S.id,...S.data()};T.userId===p.uid||ki.includes(p.uid)?t(T):u("Order not found")}}catch(p){u(`Failed to fetch order: ${r}`),console.error("Error fetching order:",p)}finally{o(!1)}})()},[r]),s?f.jsx("p",{children:"Loading..."}):a?f.jsx(ll,{to:"/not-found"}):e?f.jsxs("div",{className:"orderPage-container",children:[f.jsxs("h1",{children:["Order #",e.id]}),f.jsx(uA,{date:e.date,totalValue:e.totalValue}),f.jsxs("h2",{children:["Products shipped by: ",e.courierChoice]}),f.jsx(hA,{deliveryOption:e.deliveryOption,courierChoice:e.courierChoice,deliveryAddress:e.deliveryAddress,billingAddress:e.billingAddress,paymentMethod:e.paymentMethod,products:e.products,shippingCost:e.shippingCost||0,discount:e.discount||0,orderCost:e.orderCost,totalValue:e.totalValue,firstName:e.customerDetails.firstName,lastName:e.customerDetails.lastName,phone:e.customerDetails.phone,email:e.customerDetails.email})]}):f.jsx(ll,{to:"/not-found"})},pA=()=>{const[r,e]=k.useState(""),[t,s]=k.useState(""),[o,a]=k.useState(""),[u,h]=k.useState(""),p=async g=>{g.preventDefault();const _=kt.currentUser;if(!_){h("No user is logged in.");return}if(t!==o){h("New passwords do not match.");return}const S=Li.credential(_.email,r);try{await aP(_,S),await cP(_,t),alert("Password changed successfully!"),e(""),s(""),a(""),h("")}catch(T){console.error("Error changing password:",T),T.code==="auth/wrong-password"||T.code==="auth/invalid-credential"?h("Old password is incorrect."):T.code==="auth/weak-password"?h("New password should be at least 6 characters long."):h("An unexpected error occurred. Please try again.")}};return f.jsxs("div",{className:"passwordForm-container",children:[f.jsx("h1",{children:"Change Password"}),f.jsxs("form",{onSubmit:p,children:[f.jsx("div",{className:"passwordForm-form-group",children:f.jsxs("label",{children:["Old Password",f.jsx("input",{type:"password",value:r,onChange:g=>e(g.target.value)})]})}),f.jsx("div",{className:"passwordForm-form-group",children:f.jsxs("label",{children:["New Password",f.jsx("input",{type:"password",value:t,onChange:g=>s(g.target.value)})]})}),f.jsx("div",{className:"passwordForm-form-group",children:f.jsxs("label",{children:["Confirm New Password",f.jsx("input",{type:"password",value:o,onChange:g=>a(g.target.value)})]})}),u&&f.jsx("p",{className:"passwordForm-error-message",children:u}),f.jsx("button",{type:"submit",className:"passwordForm-submit-button",children:"Change Password"})]})]})},mA=({accountPassword:r})=>f.jsx("div",{className:"securityPage-container",children:f.jsx("div",{className:"securityPage-card",children:f.jsx(pA,{accountPassword:r})})}),W0=({filterOrders:r})=>{const[e,t]=k.useState(""),[s,o]=k.useState(""),a=()=>{r(e,s)};return f.jsxs("div",{className:"orderFilterMenu-container",children:[f.jsx("h3",{children:"Filter Orders by Date"}),f.jsx("div",{className:"orderFilterMenu-form-group",children:f.jsxs("label",{children:["After Date",f.jsx("input",{type:"date",value:e,onChange:u=>t(u.target.value)})]})}),f.jsx("div",{className:"orderFilterMenu-form-group",children:f.jsxs("label",{children:["Before Date",f.jsx("input",{type:"date",value:s,onChange:u=>o(u.target.value)})]})}),f.jsx("button",{onClick:a,className:"orderFilterMenu-submit-button",children:"Apply Filters"})]})},gA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]),[o,a]=k.useState({key:null,direction:"ascending"}),[u,h]=k.useState("");k.useEffect(()=>{(async()=>{const P=kt.currentUser;if(!P){h("User not logged in.");return}try{const D=Ln(ot(De,"orders"),Pr("userId","==",P.uid)),q=(await St(D)).docs.map(Q=>({id:Q.id,...Q.data()}));e(q),s(q)}catch(D){console.error("Error fetching orders:",D),h("Failed to load orders. Please try again later.")}})()},[]);const p=(C,P)=>{const D=r.filter(j=>{const q=new Date(j.date),Q=C?new Date(C):null,H=P?new Date(P):null;return(!Q||q>=Q)&&(!H||q<=H)});s(D)},g=C=>{let P="ascending";o.key===C&&o.direction==="ascending"&&(P="descending");const D=[...t].sort((j,q)=>j[C]<q[C]?P==="ascending"?-1:1:j[C]>q[C]?P==="ascending"?1:-1:0);s(D),a({key:C,direction:P})},_=C=>o.key===C?o.direction==="ascending"?" ":" ":"",S=C=>{switch(C){case 1:return"order-status-canceled";case 2:return"order-status-ongoing";case 3:return"order-status-delivered";default:return"order-status-unknown"}},T=C=>{switch(C){case 1:return"Canceled";case 2:return"Ongoing";case 3:return"Delivered";default:return"Unknown"}};return f.jsxs("div",{className:"orderList-container",children:[f.jsx("h1",{children:"My Orders"}),u&&f.jsx("p",{className:"error-message",children:u}),f.jsx(W0,{filterOrders:p}),t.length>0?f.jsxs("table",{className:"orderList-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsxs("th",{onClick:()=>g("crt"),children:["Num",_("crt")]}),f.jsxs("th",{onClick:()=>g("id"),children:["Order #",_("id")]}),f.jsxs("th",{onClick:()=>g("date"),children:["Date",_("date")]}),f.jsxs("th",{onClick:()=>g("totalValue"),children:["Value",_("totalValue")]}),f.jsxs("th",{onClick:()=>g("status"),children:["Status",_("status")]}),f.jsxs("th",{onClick:()=>g("courierChoice"),children:["Delivery Details",_("courierChoice")]})]})}),f.jsx("tbody",{children:t.map((C,P)=>f.jsxs("tr",{children:[f.jsx("td",{children:P+1}),f.jsx("td",{children:f.jsx(Ae,{to:`/order/${C.id}`,children:C.id})}),f.jsx("td",{children:C.date}),f.jsxs("td",{children:["$",C.totalValue.toFixed(2)]}),f.jsx("td",{className:S(C.status),children:T(C.status)}),f.jsx("td",{children:C.courierChoice})]},C.id))})]}):f.jsx("p",{children:"No orders to display."})]})},yA=()=>f.jsx("div",{className:"ordersPage-container",children:f.jsx("div",{className:"ordersPage-card",children:f.jsx(gA,{})})}),na=({products:r,brands:e,types:t,sizes:s,colors:o,uses:a,onFilterChange:u})=>{const[h,p]=k.useState({inStock:!1,priceFrom:"",priceTo:"",selectedBrands:[],selectedTypes:[],selectedSizes:[],selectedColors:[],selectedUses:[]}),[g,_]=k.useState({brands:{},types:{},sizes:{},colors:{},uses:{},inStock:0});k.useEffect(()=>{S()},[r]);const S=()=>{const H={},X={},ye={},pe={},b={};let A=0;r.forEach(x=>{x.inStock&&A++,x.brand&&x.brand!=="None"&&(H[x.brand]?H[x.brand]++:H[x.brand]=1),x.type&&x.type!=="None"&&(X[x.type]?X[x.type]++:X[x.type]=1),x.size&&x.size!=="None"&&(ye[x.size]?ye[x.size]++:ye[x.size]=1),x.color&&x.color!=="None"&&(pe[x.color]?pe[x.color]++:pe[x.color]=1),x.use&&x.use!=="None"&&(b[x.use]?b[x.use]++:b[x.use]=1)}),_({brands:H,types:X,sizes:ye,colors:pe,uses:b,inStock:A})},T=H=>{const{name:X,value:ye,type:pe,checked:b}=H.target;if(pe==="checkbox"&&X!=="inStock"){const A=b?[...h[X],ye]:h[X].filter(x=>x!==ye);p({...h,[X]:A})}else p(X==="inStock"?{...h,inStock:b}:{...h,[X]:ye})},C=()=>{u(h)},P=Object.keys(g.brands).sort((H,X)=>g.brands[X]-g.brands[H]),D=Object.keys(g.types).sort((H,X)=>g.types[X]-g.types[H]),j=Object.keys(g.sizes).sort((H,X)=>g.sizes[X]-g.sizes[H]),q=Object.keys(g.colors).sort((H,X)=>g.colors[X]-g.colors[H]),Q=Object.keys(g.uses).sort((H,X)=>g.uses[X]-g.uses[H]);return f.jsxs("div",{className:"filter-menu",children:[f.jsx("h2",{children:"Filter Products"}),f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Availability"}),f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",name:"inStock",checked:h.inStock,onChange:T}),"In Stock ",f.jsxs("span",{className:"count",children:["(",g.inStock,")"]})]})]}),f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Price"}),f.jsx("input",{type:"number",name:"priceFrom",placeholder:"From $",value:h.priceFrom,onChange:T}),f.jsx("input",{type:"number",name:"priceTo",placeholder:"To $",value:h.priceTo,onChange:T})]}),P.length>0&&f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Brands"}),P.map((H,X)=>f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",name:"selectedBrands",value:H,checked:h.selectedBrands.includes(H),onChange:T}),H," ",f.jsxs("span",{className:"count",children:["(",g.brands[H]||0,")"]})]},X))]}),D.length>0&&f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Product Type"}),D.map((H,X)=>f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",name:"selectedTypes",value:H,checked:h.selectedTypes.includes(H),onChange:T}),H," ",f.jsxs("span",{className:"count",children:["(",g.types[H]||0,")"]})]},X))]}),j.length>0&&f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Size"}),j.map((H,X)=>f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",name:"selectedSizes",value:H,checked:h.selectedSizes.includes(H),onChange:T}),H," ",f.jsxs("span",{className:"count",children:["(",g.sizes[H]||0,")"]})]},X))]}),q.length>0&&f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Color"}),q.map((H,X)=>f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",name:"selectedColors",value:H,checked:h.selectedColors.includes(H),onChange:T}),H," ",f.jsxs("span",{className:"count",children:["(",g.colors[H]||0,")"]})]},X))]}),Q.length>0&&f.jsxs("div",{className:"filter-section",children:[f.jsx("label",{children:"Uses"}),Q.map((H,X)=>f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",name:"selectedUses",value:H,checked:h.selectedUses.includes(H),onChange:T}),H," ",f.jsxs("span",{className:"count",children:["(",g.uses[H]||0,")"]})]},X))]}),f.jsx("button",{onClick:C,children:"Apply Filters"})]})},vA={"Internal SSDs":"internal-ssds","External SSDs":"external-ssds",Software:"ssd-software","SSD Accessories":"ssd-accessories"},_A=({id:r,image:e="https://via.placeholder.com/200",title:t="Default Product",inStock:s=!1,price:o="0.00",oldPrice:a="0.00",category:u="internal",addToCart:h})=>{const p=vA[u]||u;return f.jsxs(Ae,{to:`/${p}/${r}`,className:"product-main-card",children:[f.jsx("img",{src:e,alt:t,className:"product-main-image"}),f.jsx("h2",{className:"product-main-title",children:t}),a>0&&f.jsxs("p",{className:"product-main-old-price",children:["$",a]}),f.jsxs("p",{className:"product-main-price",children:["$",o]}),f.jsx("p",{className:`product-main-stock ${s?"in-stock":"out-of-stock"}`,children:s?"In Stock":"Out of Stock"}),f.jsx("button",{onClick:g=>{s&&(g.preventDefault(),h(r))},className:`product-main-add-to-cart-button ${s?"":"disabled"}`,children:"Add to Cart"})]})},ra=({title:r,products:e,category:t})=>{const[s,o]=k.useState(e),[a,u]=k.useState("name-asc"),{addToCart:h}=td();k.useEffect(()=>{g(a)},[a,e]);const p=_=>{u(_.target.value)},g=_=>{let S=[...e];const T=S.filter(P=>P.inStock),C=S.filter(P=>!P.inStock);_==="price-asc"?T.sort((P,D)=>P.price-D.price):_==="price-desc"?T.sort((P,D)=>D.price-P.price):_==="name-asc"?T.sort((P,D)=>P.title.localeCompare(D.title)):_==="name-desc"&&T.sort((P,D)=>D.title.localeCompare(P.title)),S=[...T,...C],o(S)};return f.jsxs("div",{className:"product-catalog",children:[f.jsx("h1",{children:r}),f.jsx("div",{className:"filter",children:f.jsxs("select",{id:"sort",value:a,onChange:p,children:[f.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),f.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),f.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),f.jsx("option",{value:"price-desc",children:"Price (High to Low)"})]})}),f.jsx("div",{className:"product-grid",children:s.map((_,S)=>f.jsx(_A,{id:_.id,image:_.image,title:_.title,inStock:_.inStock,price:_.price,oldPrice:_.oldPrice,category:_.category,addToCart:()=>h(_)},S))})]})},wA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]);k.useEffect(()=>{(async()=>{const u=Ln(ot(De,"products"),Pr("category","==","External SSDs")),p=(await St(u)).docs.map(g=>({id:g.id,...g.data()}));s(p),e(p)})()},[]);const o=a=>{let u=t;a.inStock&&(u=u.filter(h=>h.inStock)),a.priceFrom&&(u=u.filter(h=>h.price>=parseFloat(a.priceFrom))),a.priceTo&&(u=u.filter(h=>h.price<=parseFloat(a.priceTo))),a.selectedBrands.length>0&&(u=u.filter(h=>a.selectedBrands.includes(h.brand))),a.selectedTypes.length>0&&(u=u.filter(h=>a.selectedTypes.includes(h.type))),a.selectedSizes.length>0&&(u=u.filter(h=>a.selectedSizes.includes(h.size))),a.selectedColors.length>0&&(u=u.filter(h=>a.selectedColors.includes(h.color))),a.selectedUses.length>0&&(u=u.filter(h=>a.selectedUses.includes(h.use))),e(u)};return f.jsxs("div",{className:"product-page",children:[f.jsx(na,{products:t,onFilterChange:o}),f.jsx("div",{className:"product-list",children:f.jsx(ra,{title:"External SSDs",products:r,category:"external-ssds"})})]})},EA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]);k.useEffect(()=>{(async()=>{const u=Ln(ot(De,"products"),Pr("category","==","Internal SSDs")),p=(await St(u)).docs.map(g=>({id:g.id,...g.data()}));s(p),e(p)})()},[]);const o=a=>{let u=t;a.inStock&&(u=u.filter(h=>h.inStock)),a.priceFrom&&(u=u.filter(h=>h.price>=parseFloat(a.priceFrom))),a.priceTo&&(u=u.filter(h=>h.price<=parseFloat(a.priceTo))),a.selectedBrands.length>0&&(u=u.filter(h=>a.selectedBrands.includes(h.brand))),a.selectedTypes.length>0&&(u=u.filter(h=>a.selectedTypes.includes(h.type))),a.selectedSizes.length>0&&(u=u.filter(h=>a.selectedSizes.includes(h.size))),a.selectedColors.length>0&&(u=u.filter(h=>a.selectedColors.includes(h.color))),a.selectedUses.length>0&&(u=u.filter(h=>a.selectedUses.includes(h.use))),e(u)};return f.jsxs("div",{className:"product-page",children:[f.jsx(na,{products:t,onFilterChange:o}),f.jsx("div",{className:"product-list",children:f.jsx(ra,{title:"Internal SSDs",products:r,category:"internal-ssds"})})]})},SA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]);k.useEffect(()=>{(async()=>{const u=Ln(ot(De,"products"),Pr("category","==","SSD Accessories")),p=(await St(u)).docs.map(g=>({id:g.id,...g.data()}));s(p),e(p)})()},[]);const o=a=>{let u=t;a.inStock&&(u=u.filter(h=>h.inStock)),a.priceFrom&&(u=u.filter(h=>h.price>=parseFloat(a.priceFrom))),a.priceTo&&(u=u.filter(h=>h.price<=parseFloat(a.priceTo))),a.selectedBrands.length>0&&(u=u.filter(h=>a.selectedBrands.includes(h.brand))),a.selectedTypes.length>0&&(u=u.filter(h=>a.selectedTypes.includes(h.type))),a.selectedSizes.length>0&&(u=u.filter(h=>a.selectedSizes.includes(h.size))),a.selectedColors.length>0&&(u=u.filter(h=>a.selectedColors.includes(h.color))),a.selectedUses.length>0&&(u=u.filter(h=>a.selectedUses.includes(h.use))),e(u)};return f.jsxs("div",{className:"product-page",children:[f.jsx(na,{products:t,onFilterChange:o}),f.jsx("div",{className:"product-list",children:f.jsx(ra,{title:"SSD Accessories",products:r,category:"ssd-accessories"})})]})},TA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]);k.useEffect(()=>{(async()=>{const u=Ln(ot(De,"products"),Pr("category","==","Software")),p=(await St(u)).docs.map(g=>({id:g.id,...g.data()}));s(p),e(p)})()},[]);const o=a=>{let u=t;a.inStock&&(u=u.filter(h=>h.inStock)),a.priceFrom&&(u=u.filter(h=>h.price>=parseFloat(a.priceFrom))),a.priceTo&&(u=u.filter(h=>h.price<=parseFloat(a.priceTo))),a.selectedBrands.length>0&&(u=u.filter(h=>a.selectedBrands.includes(h.brand))),a.selectedTypes.length>0&&(u=u.filter(h=>a.selectedTypes.includes(h.type))),a.selectedSizes.length>0&&(u=u.filter(h=>a.selectedSizes.includes(h.size))),a.selectedColors.length>0&&(u=u.filter(h=>a.selectedColors.includes(h.color))),a.selectedUses.length>0&&(u=u.filter(h=>a.selectedUses.includes(h.use))),e(u)};return f.jsxs("div",{className:"product-page",children:[f.jsx(na,{products:t,onFilterChange:o}),f.jsx("div",{className:"product-list",children:f.jsx(ra,{title:"Software Products",products:r,category:"ssd-software"})})]})},Wh={"Internal SSDs":"internal-ssds","External SSDs":"external-ssds",Software:"ssd-software","SSD Accessories":"ssd-accessories"},IA=({product:r,siblings:e})=>{const{addToCart:t}=td(),s=es(),[o,a]=k.useState(r.color),[u,h]=k.useState(r.size),p=P=>{const D=e.find(j=>j.color===P&&j.size===u);D&&(a(P),s(`/${Wh[D.category]||D.category}/${D.id}`))},g=P=>{const D=e.find(j=>j.size===P&&j.color===o);D&&(h(P),s(`/${Wh[D.category]||D.category}/${D.id}`))},_=P=>e.filter(D=>D[P]&&D[P]!==r[P]&&D.size===u).map(D=>f.jsx("button",{className:"Product-Menu-sibling-button",onClick:()=>s(`/${Wh[D.category]||D.category}/${D.id}`),children:D[P]},D.id)),S=e.filter(P=>P.size&&P.size!==u&&P.color===o).reduce((P,D)=>(P.some(j=>j.key===D.size)||P.push(f.jsx("button",{className:"Product-Menu-sibling-button",onClick:()=>g(D.size),children:D.size},D.size)),P),[]),T=e.filter(P=>P.color&&P.color!==o).reduce((P,D)=>(P.some(j=>j.key===D.color)||P.push(f.jsx("button",{className:"Product-Menu-sibling-button",onClick:()=>p(D.color),children:D.color},D.color)),P),[]),C=_("use");return f.jsxs("div",{className:"Product-Menu-menu",children:[r.oldPrice>0&&f.jsxs("p",{className:"Product-Menu-old-price",children:["$",r.oldPrice.toFixed(2)]}),f.jsxs("p",{className:"Product-Menu-price",children:["$",r.price.toFixed(2)]}),f.jsx("p",{className:`Product-Menu-stock ${r.inStock?"in-stock":"out-of-stock"}`,children:r.inStock?"In Stock":"Out of Stock"}),f.jsx("button",{className:`Product-Menu-add-to-cart-button ${r.inStock?"":"disabled"}`,onClick:()=>{r.inStock&&t(r)},children:"Add to Basket"}),T.length>0&&f.jsxs("div",{className:"Product-Menu-sibling-buttons",children:[f.jsx("h3",{children:"Other Colors"}),T]}),S.length>0&&f.jsxs("div",{className:"Product-Menu-sibling-buttons",children:[f.jsx("h3",{children:"Other Sizes"}),S]}),C.length>0&&f.jsxs("div",{className:"Product-Menu-sibling-buttons",children:[f.jsx("h3",{children:"Other Uses"}),C]})]})},PA=({description:r})=>f.jsxs("div",{className:"product-description",children:[f.jsx("h2",{children:"Description"}),f.jsx("p",{children:r})]}),CA=({specs:r})=>f.jsxs("div",{className:"product-specs",children:[f.jsx("h2",{children:"Specifications"}),f.jsx("ul",{children:r.map((e,t)=>f.jsx("li",{children:e},t))})]}),Ka=()=>{const{id:r}=_v(),[e,t]=k.useState(null),[s,o]=k.useState([]),[a,u]=k.useState(!0),[h,p]=k.useState("");return k.useEffect(()=>{(async()=>{if(!r){p("Product ID is missing"),u(!1);return}try{const _=ht(De,"products",r),S=await Ws(_);if(S.exists()){const T=S.data();t(T);const C=Ln(ot(De,"products"),Pr("model","==",T.model),Pr("__name__","!=",r)),D=(await St(C)).docs.map(j=>({id:j.id,...j.data()}));o(D)}else p(`Product not found: ${r}`)}catch(_){p(`Failed to fetch product: ${r}`),console.error("Error fetching product:",_)}finally{u(!1)}})()},[r]),a?f.jsx("p",{children:"Loading..."}):h?f.jsx("p",{children:h}):e?f.jsx("div",{className:"ProductPage-page",children:f.jsxs("div",{className:"ProductPage-card",children:[f.jsx("h1",{className:"ProductPage-title",children:e.title}),f.jsxs("div",{className:"ProductPage-content",children:[f.jsx("div",{className:"ProductPage-photo",children:f.jsx("img",{src:e.image,alt:e.title})}),f.jsx(IA,{product:e,siblings:s})]}),f.jsx(PA,{description:e.description||"No description available"}),f.jsx(CA,{specs:e.specs||["No specifications available"]})]})}):f.jsx("p",{children:"No product data available."})},xA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]);k.useEffect(()=>{(async()=>{const u=Ln(ot(De,"products"),Pr("oldPrice",">",0)),p=(await St(u)).docs.map(g=>({id:g.id,...g.data()}));s(p),e(p)})()},[]);const o=a=>{let u=t;a.inStock&&(u=u.filter(h=>h.inStock)),a.priceFrom&&(u=u.filter(h=>h.price>=parseFloat(a.priceFrom))),a.priceTo&&(u=u.filter(h=>h.price<=parseFloat(a.priceTo))),a.selectedBrands.length>0&&(u=u.filter(h=>a.selectedBrands.includes(h.brand))),a.selectedTypes.length>0&&(u=u.filter(h=>a.selectedTypes.includes(h.type))),a.selectedSizes.length>0&&(u=u.filter(h=>a.selectedSizes.includes(h.size))),a.selectedColors.length>0&&(u=u.filter(h=>a.selectedColors.includes(h.color))),a.selectedUses.length>0&&(u=u.filter(h=>a.selectedUses.includes(h.use))),e(u)};return f.jsxs("div",{className:"product-page",children:[f.jsx(na,{products:t,onFilterChange:o}),f.jsx("div",{className:"product-list",children:f.jsx(ra,{title:"Special Deals",products:r,category:"special-deals"})})]})},kA=()=>f.jsx("h1",{children:"Customer Support Page"}),AA=()=>f.jsxs("div",{className:"info-page",children:[f.jsx("h1",{children:"Info Page"}),f.jsxs("section",{className:"contact-us",children:[f.jsx("h2",{children:"Contact Us"}),f.jsx("h3",{children:"Contact"}),f.jsxs("p",{children:["For all contact information, please visit our ",f.jsx("a",{href:"/contact",children:"Contact Page"}),". Our contact page provides detailed information on how to reach us for various needs."]}),f.jsx("h3",{children:"Departments"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Sales Department"}),f.jsx("li",{children:"Customer Support Department"}),f.jsx("li",{children:"Billing Department"})]}),f.jsxs("p",{children:["For detailed contact information for each department, please visit our ",f.jsx("a",{href:"/contact",children:"Contact Page"}),"."]})]}),f.jsxs("section",{className:"orders",children:[f.jsx("h2",{children:"Orders"}),f.jsx("h3",{children:"Order Status"}),f.jsx("p",{children:"Check the status of your order by logging into your account and visiting the order history section."}),f.jsx("h3",{children:"Delivery Times"}),f.jsx("p",{children:"Delivery times may vary (usually 1-3 working days). You will be able to see the progress of your delivery in the order history section."}),f.jsx("h3",{children:"Canceling an Order"}),f.jsx("p",{children:"To cancel an order, please contact our customer support as soon as possible."}),f.jsx("h3",{children:"How to Order"}),f.jsx("p",{children:"To place an order, simply add items to your cart, proceed to checkout, and follow the prompts."}),f.jsx("h3",{children:"Extended Warranty"}),f.jsx("p",{children:"We offer extended warranty options for many of our products. Please see the product page for details."}),f.jsx("h3",{children:"Product Stock"}),f.jsx("p",{children:"Product availability is updated in real-time on our website. Out-of-stock items will be marked accordingly."}),f.jsx("h3",{children:"Special Deals"}),f.jsxs("p",{children:["Check our ",f.jsx("a",{href:"/special-deals",children:"Special Deals"})," section regularly for exclusive offers and discounts."]})]}),f.jsxs("section",{className:"returns-warranties",children:[f.jsx("h2",{children:"Returns and Warranties"}),f.jsx("h3",{children:"Return Policy"}),f.jsx("p",{children:"Our return policy allows returns within 14 days of product arrival. Please ensure the product is in its original condition."}),f.jsx("h3",{children:"Warranty Policy"}),f.jsx("p",{children:"Certain products, such as software, may not come with a warranty. To process a warranty claim, you will need the Warranty Certificate and a Purchase Bill or Receipt."}),f.jsx("h3",{children:"How to Start a Return or Warranty Process"}),f.jsxs("p",{children:["To start a return or warranty process, please visit our ",f.jsx("a",{href:"/customer-support",children:"Customer Support"})," page and submit a ticket through our system."]})]}),f.jsxs("section",{className:"delivery",children:[f.jsx("h2",{children:"Delivery"}),f.jsx("h3",{children:"Methods"}),f.jsx("p",{children:"We offer various delivery methods including home delivery and delivery to pick-up boxes."}),f.jsx("h3",{children:"Costs"}),f.jsx("p",{children:"Shipping fees are calculated at checkout based on your location and the delivery method chosen. Orders over 50$ benefit of free delivery"}),f.jsx("h3",{children:'"Open the Package at Delivery" Service'}),f.jsx("p",{children:'We offer an "Open the Package at Delivery" service to ensure you receive your items in perfect condition.'}),f.jsx("h3",{children:"Courier List"}),f.jsx("p",{children:"We work with several couriers, including:"}),f.jsxs("ul",{children:[f.jsx("li",{children:"FastTrack Delivery"}),f.jsx("li",{children:"QuickShip Express"}),f.jsx("li",{children:"Speedy Couriers"}),f.jsx("li",{children:"Reliable Delivery Co."})]})]}),f.jsxs("section",{className:"payment-methods",children:[f.jsx("h2",{children:"Payment Methods"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Cash on Delivery"}),f.jsx("li",{children:"Credit Card (Visa, MasterCard)"}),f.jsx("li",{children:"Bank Transfer"}),f.jsx("li",{children:"PayPal"}),f.jsx("li",{children:"Financing Options (split the payment over multiple months)"})]})]})]}),RA=()=>f.jsxs("div",{className:"contact-page",children:[f.jsx("h1",{children:"Contact Page"}),f.jsx("section",{className:"description",children:f.jsx("p",{children:"Welcome to our Contact Page. Here, you can find all the necessary details to reach out to us for various needs, whether it's sales inquiries, customer support, or general information about our store. Our team is dedicated to providing you with excellent service and support."})}),f.jsxs("section",{className:"store-hours",children:[f.jsx("h2",{children:"Store Hours Schedule"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Sales Department: 08:00 - 18:00 (Mon-Fri)"}),f.jsx("li",{children:"Customer Support Department: 08:00 - 20:00 (Mon-Sat)"}),f.jsx("li",{children:"Billing Department: 10:00 - 16:00 (Mon-Fri)"})]})]}),f.jsxs("section",{className:"contact-details",children:[f.jsx("h2",{children:"Contact Details"}),f.jsx("p",{children:"Address: 1234 Tech Drive, Innovation City, 56789"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Sales Department: Phone: (555) 123-4567, Email: sales@projectssd.com"}),f.jsx("li",{children:"Customer Support Department: Phone: (555) 234-5678, Email: support@projectssd.com"}),f.jsx("li",{children:"Billing Department: Phone: (555) 456-7890, Email: billing@projectssd.com"})]}),f.jsx("p",{children:"Phone: (555) 123-4567"}),f.jsx("p",{children:"Fax: (555) 987-6543"})]}),f.jsx("section",{className:"additional-info",children:f.jsxs("p",{children:["For more detailed assistance, please visit our ",f.jsx("a",{href:"/customer-support",children:"Customer Support"})," page. Our Customer Support team is also a valuable resource to help resolve any issues or answer any questions you may have."]})})]}),NA=()=>f.jsx("div",{className:"databasePage-container",children:f.jsxs("div",{className:"databasePage-menu",children:[f.jsx("h1",{children:"Database Control Panel"}),f.jsxs("div",{className:"databasePage-buttons",children:[f.jsx(Ae,{to:"/database-products",className:"databasePage-button",children:"Database Products"}),f.jsx(Ae,{to:"/database-orders",className:"databasePage-button",children:"Database Orders"})]})]})}),DA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState({key:null,direction:"ascending"}),[o,a]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const T=(await St(ot(De,"products"))).docs.map(C=>({id:C.id,...C.data()}));e(T)}catch(S){console.error("Error fetching products: ",S)}finally{a(!1)}})()},[]);const u=_=>{let S="ascending";t.key===_&&t.direction==="ascending"&&(S="descending");const T=[...r].sort((C,P)=>C[_]<P[_]?S==="ascending"?-1:1:C[_]>P[_]?S==="ascending"?1:-1:0);e(T),s({key:_,direction:S})},h=_=>t.key===_?t.direction==="ascending"?" ":" ":"",p=async(_,S)=>{const T=parseFloat(prompt(`Enter the new ${S}:`,_[S]));if(!isNaN(T)&&T>=0)try{await Wo(ht(De,"products",_.id),{[S]:T});const C=r.map(P=>P.id===_.id?{...P,[S]:T}:P);e(C)}catch(C){console.error(`Error updating product ${S}: `,C)}else alert("Invalid price entered.")},g=async _=>{const S=!_.inStock;try{await Wo(ht(De,"products",_.id),{inStock:S});const T=r.map(C=>C.id===_.id?{...C,inStock:S}:C);e(T)}catch(T){console.error("Error updating product stock status: ",T)}};return o?f.jsx("p",{children:"Loading..."}):f.jsxs("div",{className:"databaseProductsPage-container",children:[f.jsxs("div",{className:"databaseOrderPage-buttons",children:[f.jsx(Ae,{to:"/database-product-preview",className:"databaseProductEditor-button",children:"Database Product Preview"}),f.jsx(Ae,{to:"/database-product-editor",className:"databaseOrderPage-button",children:"Product Editor"}),f.jsx(Ae,{to:"/database",className:"databaseOrderPage-button",children:"Database Control Panel"})]}),f.jsx("h1",{children:"Database Product List"}),f.jsxs("table",{className:"databaseProductsPage-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsxs("th",{onClick:()=>u("crt"),children:["Number",h("crt")]}),f.jsxs("th",{onClick:()=>u("id"),children:["Id",h("id")]}),f.jsxs("th",{onClick:()=>u("category"),children:["Category",h("category")]}),f.jsx("th",{children:"Image"}),f.jsxs("th",{onClick:()=>u("title"),children:["Title",h("title")]}),f.jsxs("th",{onClick:()=>u("inStock"),children:["In Stock",h("inStock")]}),f.jsxs("th",{onClick:()=>u("price"),children:["Price",h("price")]}),f.jsxs("th",{onClick:()=>u("brand"),children:["Brand",h("brand")]})]})}),f.jsx("tbody",{children:r.map((_,S)=>f.jsxs("tr",{children:[f.jsx("td",{children:S+1}),f.jsx("td",{children:_.id}),f.jsx("td",{children:_.category}),f.jsx("td",{children:f.jsx("img",{src:_.image,alt:_.title,className:"product-image"})}),f.jsx("td",{children:_.title}),f.jsx("td",{className:`product-stock ${_.inStock?"in-stock":"out-of-stock"}`,onClick:()=>g(_),children:_.inStock?"Yes":"No"}),f.jsxs("td",{className:"databaseProductsPage-price",children:[_.oldPrice>0&&f.jsxs("div",{onClick:()=>p(_,"oldPrice"),className:"databaseProductsPage-old-price",children:["$",_.oldPrice.toFixed(2)]}),f.jsxs("div",{onClick:()=>p(_,"price"),className:"databaseProductsPage-current-price",children:["$",_.price.toFixed(2)]})]}),f.jsx("td",{children:_.brand})]},_.id))})]})]})},jA=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]),[o,a]=k.useState({key:null,direction:"ascending"}),[u,h]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const j=(await St(ot(De,"orders"))).docs.map(q=>({id:q.id,...q.data()}));e(j),s(j)}catch(D){console.error("Error fetching orders: ",D)}finally{h(!1)}})()},[]);const p=(P,D)=>{const j=r.filter(q=>{const Q=new Date(q.date),H=new Date(P),X=new Date(D);return(!P||Q>=H)&&(!D||Q<=X)});s(j)},g=P=>{let D="ascending";o.key===P&&o.direction==="ascending"&&(D="descending");const j=[...t].sort((q,Q)=>q[P]<Q[P]?D==="ascending"?-1:1:q[P]>Q[P]?D==="ascending"?1:-1:0);s(j),a({key:P,direction:D})},_=P=>o.key===P?o.direction==="ascending"?" ":" ":"",S=P=>{switch(P){case 1:return"Canceled";case 2:return"Ongoing";case 3:return"Delivered";default:return"Unknown"}},T=P=>{switch(P){case 1:return"order-status-canceled";case 2:return"order-status-ongoing";case 3:return"order-status-delivered";default:return"order-status-unknown"}},C=async(P,D)=>{let j=P.status;D==="increase"&&P.status<3&&(j+=1),D==="decrease"&&P.status>1&&(j-=1);try{const Q=(await St(ot(De,"orders"))).docs.find(H=>H.data().id===P.id);if(Q){await Wo(ht(De,"orders",Q.id),{status:j});const H=r.map(X=>X.id===P.id?{...X,status:j}:X);e(H),s(H)}else console.error("Order document not found")}catch(q){console.error("Error updating order status: ",q)}};return u?f.jsx("p",{children:"Loading..."}):f.jsxs("div",{className:"databaseOrdersPage-container",children:[f.jsx("div",{className:"databaseOrderPage-buttons",children:f.jsx(Ae,{to:"/database",className:"databaseOrderPage-button",children:"Database Control Panel"})}),f.jsx("h1",{children:"Database Order List"}),f.jsx(W0,{filterOrders:p}),f.jsxs("table",{className:"databaseOrdersPage-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsxs("th",{onClick:()=>g("crt"),children:["Number",_("crt")]}),f.jsxs("th",{onClick:()=>g("id"),children:["Order #",_("id")]}),f.jsxs("th",{onClick:()=>g("date"),children:["Date",_("date")]}),f.jsxs("th",{onClick:()=>g("value"),children:["Value",_("value")]}),f.jsx("th",{children:"Status"}),f.jsxs("th",{onClick:()=>g("deliveryDetails"),children:["Delivery Details",_("deliveryDetails")]})]})}),f.jsx("tbody",{children:t.map((P,D)=>f.jsxs("tr",{children:[f.jsx("td",{children:D+1}),f.jsx("td",{children:f.jsx(Ae,{to:`/order/${P.id}`,children:P.id})}),f.jsx("td",{children:P.date}),f.jsxs("td",{children:["$",P.totalValue.toFixed(2)]}),f.jsxs("td",{className:T(P.status),children:[S(P.status),P.status!==3&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>C(P,"decrease"),disabled:P.status===1,children:""}),f.jsx("button",{onClick:()=>C(P,"increase"),disabled:P.status===3,children:""})]})]}),f.jsxs("td",{children:[P.deliveryOption," / ",P.courierChoice]})]},P.id))})]})]})},bA="/assets/internal_ssd_default-C5PCOcve.png",OA="/assets/external_ssd_default-DqfWUjaT.png",LA="/assets/software_default-Ciib_hDq.png",VA="/assets/ssd_accesory_default-CwZr1bom.png",MA="/assets/internal_ssd-DpnqIEZv.jpg",FA="/assets/external_ssd-DaCITs8x.jpg",UA="/assets/m2_ssd-fn9wpmxo.jpg",BA="/assets/adata_se760_ext-BC2U1VWX.jpg",zA="/assets/kingston_xs1000_ext-hGVMfTzf.jpg",$A="/assets/samsung_T7_ext-BfAu1ZR6.jpg",qA="/assets/sandisk_ssd_ext-BDb1wyC0.jpg",HA="/assets/kingston_xs1000_ext_red-HnQHwLV6.jpg",WA="/assets/samsung_T7_ext_blue-DARH-4i9.jpg",GA="/assets/adata_SU650-DO85q75y.jpg",KA="/assets/adata_SU800-D_flIBvD.jpg",QA="/assets/kingston_a400-BTiKIBPj.jpg",YA="/assets/samsung_870EVO-CWeJCflx.jpg",XA="/assets/sandisk_plus-B6L7fajl.jpg",JA="/assets/adata_xpg_m2-DqhUKrw1.jpg",ZA="/assets/samsung_980_m2-bq8LgkYm.jpg",eR="/assets/kingston_nv3_m2-D4ZZvVHe.jpg",tR="/assets/caddy_adapter-CmsOM6Ey.jpg",nR="/assets/sata_cable-JSYSsNBq.jpg",rR="/assets/sata_cable2-C9KXcgp7.jpg",sR="/assets/ssd_rack_adata_m2-CIe1rfeD.jpg",iR="/assets/ssd_rack_adata_sata-wgvuJexL.jpg",uv=[{name:"default-internal-ssd",path:bA},{name:"default-external-ssd",path:OA},{name:"default-software",path:LA},{name:"default-ssd-accessory",path:VA},{name:"Project-SSD o7 Portable SSD",path:FA},{name:"Project-SSD T800 Sata SSD",path:MA},{name:"Project-SSD G1 Mk2 M2 SSD",path:UA},{name:"Adata SE760 External",path:BA},{name:"Kingston XS1000 External Black",path:zA},{name:"Kingston XS1000 External Red",path:HA},{name:"Samsung T7 External Gray",path:$A},{name:"Samsung T7 External Blue",path:WA},{name:"Sandisk Extreme Portable External",path:qA},{name:"Adata SU650",path:GA},{name:"Adata SU800",path:KA},{name:"Kingston A400",path:QA},{name:"Samsung 870 EVO",path:YA},{name:"Sandisk Plus",path:XA},{name:"Adata XPG",path:JA},{name:"Samsung 980 M2",path:ZA},{name:"Kingston NV3 M2",path:eR},{name:"Caddy Adapter",path:tR},{name:"Sata Cable 1",path:nR},{name:"Sata Cable 2",path:rR},{name:"Adata Rack SSD M2",path:sR},{name:"Adata Rack SSD Sata",path:iR}],oR=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]),[o,a]=k.useState(""),[u,h]=k.useState(""),[p,g]=k.useState(""),[_,S]=k.useState(""),[T,C]=k.useState(-1),[P,D]=k.useState(""),[j,q]=k.useState(0),[Q,H]=k.useState(!1),[X,ye]=k.useState(!1),[pe,b]=k.useState(""),[A,x]=k.useState(""),[O,M]=k.useState(!1),[U,N]=k.useState(""),[He,ct]=k.useState(!1),[tt,Me]=k.useState(""),[K,he]=k.useState(!1),[oe,F]=k.useState(""),[Y,le]=k.useState([]),[Ee,Ce]=k.useState(""),[ke,Oe]=k.useState(!1),[Ne,Ge]=k.useState(!1),[ft]=k.useState(["120gb","240gb","480gb","1tb","2tb","4tb","8tb"]),[Sn,lr]=k.useState([]);k.useState("");const[Vn,Cr]=k.useState(""),rs=["Red","Green","Blue","Yellow","Black","White","Purple","Orange","Pink","Brown","Grey","Gold","Silver","Teal","Copper"];k.useEffect(()=>{(async()=>{try{const nt=(await St(ot(De,"products"))).docs.map(ur=>({id:ur.id,...ur.data()}));e(nt);const fn=(await St(ot(De,"brands"))).docs.map(ur=>ur.id);s(fn);const Tn=nt[nt.length-1],ti=Tn?parseInt(Tn.id.replace("PROD",""),10):0;a(`PROD${String(ti+1).padStart(6,"0")}`)}catch(Fe){console.error("Error fetching data: ",Fe)}})()},[]);const Js=ee=>{a(ee.id),h(ee.category),g(ee.image),S(ee.model),C(ee.groupId||-1),D(ee.price),q(ee.oldPrice||0),H(!!ee.oldPrice),ye(ee.inStock),b(ee.brand),x(ee.type||""),M(!!ee.type),N(ee.color||""),ct(!!ee.color),Me(ee.use||""),he(!!ee.use),F(ee.description||""),Ce(ee.size||""),Oe(!!ee.size)},ss=()=>{const ee=r[r.length-1],Fe=ee?parseInt(ee.id.replace("PROD",""),10):0;a(`PROD${String(Fe+1).padStart(6,"0")}`)},xr=()=>{h(""),g(""),S(""),C(-1),D(""),q(0),H(!1),ye(!1),b(""),M(!1),x(""),ct(!1),N(""),he(!1),Me(""),F(""),le([]),Ge(!1),Ce(""),lr([]),Oe(!1),ss()},is=async()=>{if(!_||!P||!u||!pe){alert("Title, Price, Category, and Brand are required.");return}if(Ne&&!(u==="Internal SSDs"||u==="External SSDs")){alert("Add Multiple Sizes is only allowed for Internal SSDs or External SSDs.");return}const ee={category:u,image:p,title:Vn,model:_,groupId:T===-1?null:T,price:parseFloat(P),oldPrice:parseFloat(j),inStock:X,brand:pe,type:O?A:null,color:He?U:null,use:K?tt:null,description:oe};if(Ne){const Fe=Sn.map((nt,Rt)=>{const fn=`PROD${String(parseInt(o.replace("PROD",""),10)+Rt).padStart(6,"0")}`,Tn=`${pe} ${_} ${A} ${nt} ${U} ${tt}`;return{...ee,id:fn,title:Tn,size:nt}});try{await Promise.all(Fe.map(async nt=>{const Rt=ht(De,"products",nt.id);await Lo(Rt,nt,{merge:!0})})),alert("Products saved successfully!"),xr()}catch(nt){console.error("Error saving products: ",nt),alert("Failed to save products. Please try again.")}}else try{const Fe=ht(De,"products",o);await Lo(Fe,ee,{merge:!0}),alert("Product saved successfully!"),xr()}catch(Fe){console.error("Error saving product: ",Fe),alert("Failed to save product. Please try again.")}},Mn=async()=>{if(!o){alert("Please select a product to delete.");return}try{const ee=ht(De,"products",o);await Sp(ee),alert("Product deleted successfully!"),xr()}catch(ee){console.error("Error deleting product: ",ee),alert("Failed to delete product. Please try again.")}},Fn=ee=>{Ce(ee.target.value)},Zs=ee=>{Ge(ee.target.checked),ee.target.checked||lr([])},os=ee=>{const{value:Fe,checked:nt}=ee.target;lr(Rt=>nt?[...Rt,Fe]:Rt.filter(fn=>fn!==Fe))},as=ee=>{const Fe=ee.target.value,nt=uv.find(Rt=>Rt.name===Fe);g(nt?nt.path:"")},ei=async()=>{const ee=window.prompt("Enter the new brand name:");if(ee&&ee.trim()!=="")try{const Fe=ht(De,"brands",ee);await Lo(Fe,{name:ee}),alert("Brand added successfully!")}catch(Fe){console.error("Error adding brand: ",Fe),alert("Failed to add brand. Please try again.")}else alert("Please enter a valid brand name.")},pt=()=>[pe,_,A,Ee,U,tt].filter(Boolean).join(" ");return k.useEffect(()=>{Cr(pt())},[pe,_,A,Ee,U,tt]),f.jsxs("div",{className:"databaseProductEditor-container",children:[f.jsxs("div",{className:"databaseProductEditor-buttons",children:[f.jsx(Ae,{to:"/database-product-preview",className:"databaseProductEditor-button",children:"Database Product Preview"}),f.jsx(Ae,{to:"/database-products",className:"databaseProductEditor-button",children:"Database Products"}),f.jsx(Ae,{to:"/database",className:"databaseProductEditor-button",children:"Database Control Panel"})]}),f.jsx("h1",{children:"Database Product Editor"}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Choose Product to Edit:"}),f.jsxs("select",{onChange:ee=>{const Fe=r.find(nt=>nt.id===ee.target.value);Fe?Js(Fe):ss()},children:[f.jsx("option",{value:"",children:"New Product"}),r.map(ee=>f.jsx("option",{value:ee.id,children:ee.title},ee.id))]})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Product ID:"}),f.jsx("input",{type:"text",value:o,readOnly:!0})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Category:"}),f.jsxs("select",{value:u,onChange:ee=>h(ee.target.value),children:[f.jsx("option",{value:"",children:"Select Category"}),f.jsx("option",{value:"Internal SSDs",children:"Internal SSDs"}),f.jsx("option",{value:"External SSDs",children:"External SSDs"}),f.jsx("option",{value:"SSD Accessories",children:"SSD Accessories"}),f.jsx("option",{value:"Software",children:"Software"})]})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Select Image:"}),f.jsxs("select",{onChange:as,value:p?p.split("/").pop():"",children:[f.jsx("option",{value:"",children:"Select an image"}),uv.map((ee,Fe)=>f.jsx("option",{value:ee.name,children:ee.name},Fe))]})]}),p&&f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Image Preview:"}),f.jsx("img",{src:p,alt:"Selected",width:"200"})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Price:"}),f.jsx("input",{type:"number",value:P,onChange:ee=>D(ee.target.value)})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Old Price:"}),f.jsx("input",{type:"number",value:j,onChange:ee=>q(ee.target.value)})]}),f.jsx("div",{className:"databaseProductEditor-form-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:X,onChange:()=>ye(!X)})," In Stock"]})}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Brand:"}),f.jsxs("select",{value:pe,onChange:ee=>b(ee.target.value),children:[f.jsx("option",{value:"",children:"Select Brand"}),t.map(ee=>f.jsx("option",{value:ee,children:ee},ee))]})]}),f.jsx("div",{className:"databaseProductEditor-addbrand-button",children:f.jsx("button",{onClick:ei,children:"Add New Brand"})}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Model:"}),f.jsx("input",{type:"text",value:_,onChange:ee=>S(ee.target.value)})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:O,onChange:()=>M(!O)})," Add Type"]}),O&&f.jsxs("div",{children:[f.jsx("label",{children:"Type:"}),f.jsx("input",{type:"text",value:A,onChange:ee=>x(ee.target.value)})]})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:ke,onChange:()=>Oe(!ke)})," Add Size"]}),ke&&!Ne&&f.jsxs("div",{children:[f.jsx("label",{children:"Select Size:"}),f.jsxs("select",{value:Ee,onChange:Fn,children:[f.jsx("option",{value:"",children:"Choose Size"}),ft.map(ee=>f.jsx("option",{value:ee,children:ee},ee))]})]}),ke&&f.jsx("div",{children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Ne,onChange:Zs})," Add Multiple Sizes"]})}),Ne&&f.jsxs("div",{children:[f.jsx("label",{children:"Select Sizes:"}),ft.map(ee=>f.jsx("div",{children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",value:ee,checked:Sn.includes(ee),onChange:os})," ",ee]})},ee))]})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:He,onChange:()=>ct(!He)})," Add Color"]}),He&&f.jsxs("div",{children:[f.jsx("label",{children:"Select Color:"}),f.jsx("select",{value:U,onChange:ee=>N(ee.target.value),children:rs.map(ee=>f.jsx("option",{value:ee,children:ee},ee))})]})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:K,onChange:()=>he(!K)})," Add Use"]}),K&&f.jsxs("div",{children:[f.jsx("label",{children:"Use:"}),f.jsx("input",{type:"text",value:tt,onChange:ee=>Me(ee.target.value)})]})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Title Preview:"}),f.jsx("p",{children:Vn})]}),f.jsxs("div",{className:"databaseProductEditor-form-group",children:[f.jsx("label",{children:"Description:"}),f.jsx("textarea",{value:oe,onChange:ee=>F(ee.target.value)})]}),f.jsxs("div",{className:"databaseProductEditor-buttons",children:[f.jsx("button",{onClick:is,children:"Save"}),f.jsx("button",{onClick:Mn,children:"Delete"}),f.jsx("button",{onClick:xr,children:"Clear Form"})]})]})},aR=({product:r})=>{const{id:e,image:t="https://via.placeholder.com/200",title:s="Default Product",inStock:o=!1,price:a="0.00",oldPrice:u="0.00",category:h="internal"}=r;return f.jsxs(Ae,{to:`/${h}/${e}`,className:"product-main-card",children:[f.jsx("img",{src:t,alt:s,className:"product-main-image"}),f.jsx("h2",{className:"product-main-title",children:s}),u>0&&f.jsxs("p",{className:"product-main-old-price",children:["$",u]}),f.jsxs("p",{className:"product-main-price",children:["$",a]}),f.jsx("p",{className:`product-main-stock ${o?"in-stock":"out-of-stock"}`,children:o?"In Stock":"Out of Stock"}),f.jsx("button",{onClick:p=>{},className:"product-main-add-to-cart-button",children:"Add to Cart"})]})},lR=({product:r})=>{const{id:e,image:t="https://via.placeholder.com/200",title:s="Default Product",inStock:o=!1,price:a="0.00",oldPrice:u="0.00",category:h="internal"}=r;return f.jsxs(Ae,{to:`/${h}/${e}`,className:"ProductCardHome-product-card",children:[f.jsx("img",{src:t,alt:s,className:"ProductCardHome-product-image"}),f.jsx("h2",{className:"ProductCardHome-product-title",children:s}),u>0&&f.jsxs("p",{className:"ProductCardHome-product-old-price",children:["$",u]}),f.jsxs("p",{className:"ProductCardHome-product-price",children:["$",a]}),f.jsx("p",{className:`ProductCardHome-product-stock ${o?"in-stock":"out-of-stock"}`,children:o?"In Stock":"Out of Stock"}),f.jsx("button",{onClick:p=>{},className:"ProductCardHome-add-to-cart-button",children:"Add to Cart"})]})},uR=({product:r})=>{const{id:e,image:t="https://via.placeholder.com/200",title:s="Default Product",inStock:o=!1,price:a="0.00",oldPrice:u="0.00",category:h="internal"}=r;return f.jsxs(Ae,{to:`/${h}/${e}`,className:"ProductCardBasket-product-card",children:[f.jsx("img",{src:t,alt:s,className:"ProductCardBasket-product-image"}),f.jsxs("div",{className:"ProductCardBasket-details",children:[f.jsx("h2",{className:"ProductCardBasket-product-title",children:s}),f.jsx("p",{className:`ProductCardBasket-product-stock ${o?"in-stock":"out-of-stock"}`,children:o?"In Stock":"Out of Stock"})]}),f.jsxs("div",{className:"ProductCardBasket-price-container",children:[u>0?f.jsxs("p",{className:"ProductCardBasket-product-old-price",children:["$",u]}):f.jsx("div",{className:"ProductCardBasket-placeholder-price"}),f.jsxs("p",{className:"ProductCardBasket-product-price",children:["$",a]}),f.jsx("button",{onClick:p=>{},className:"ProductCardBasket-remove-from-cart-button",children:"Remove"})]})]})},cR=({product:r})=>{const{id:e,image:t="https://via.placeholder.com/200",title:s="Default Product",quantity:o=1,price:a="0.00",category:u="internal"}=r,h=(a*o).toFixed(2);return f.jsxs("div",{className:"ProductCardOrder-product-card",children:[f.jsx(Ae,{to:`/${u}/${e}`,className:"ProductCardOrder-product-image-link",children:f.jsx("img",{src:t,alt:s,className:"ProductCardOrder-product-image"})}),f.jsxs("div",{className:"ProductCardOrder-details",children:[f.jsx("h2",{className:"ProductCardOrder-product-title",children:s}),f.jsxs("div",{className:"ProductCardOrder-price-container",children:[f.jsxs("p",{className:"ProductCardOrder-product-price",children:["$",h]}),f.jsxs("p",{className:"ProductCardOrder-product-quantity",children:["Qty: ",o]})]})]})]})},dR=()=>{const[r,e]=k.useState([]),[t,s]=k.useState(null),[o,a]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const g=(await St(ot(De,"products"))).docs.map(_=>({id:_.id,..._.data()}));e(g)}catch(p){console.error("Error fetching products: ",p)}finally{a(!1)}})()},[]);const u=h=>{const p=r.find(g=>g.id===h.target.value);s(p)};return o?f.jsx("p",{children:"Loading..."}):f.jsxs("div",{className:"databaseProductPreview-container",children:[f.jsx(Ae,{to:"/database-products",className:"databaseProductPreview-button",children:"Database Products"}),f.jsx("h1",{children:"Database Product Preview"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Choose Product:"}),f.jsxs("select",{onChange:u,children:[f.jsx("option",{value:"",children:"Select a product"}),r.map(h=>f.jsx("option",{value:h.id,children:h.title},h.id))]})]}),t&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"product-cards",children:[f.jsx("h2",{children:"Product Card"}),f.jsx(aR,{product:t}),f.jsx("h2",{children:"Product Card Home"}),f.jsx(lR,{product:t}),f.jsx("h2",{children:"Product Card Basket"}),f.jsx(uR,{product:t})]}),f.jsxs("div",{className:"product-order",children:[f.jsx("h2",{children:"Product Card Order"}),f.jsx(cR,{product:t})]})]})]})},hR=()=>{const r=es(),[e,t]=k.useState(""),[s,o]=k.useState(""),[a,u]=k.useState(null),h=T=>t(T.target.value),p=T=>o(T.target.value),g=T=>T.includes("auth/invalid-credential")?"User or password are incorrect":T.includes("auth/too-many-requests")?"Too many attempts. Please try again later":"An error occurred. Please try again",_=async T=>{T.preventDefault();try{await uP(kt,e,s),console.log("Logged in with email and password:",e),r("/")}catch(C){console.error("Error logging in:",C),u(g(C.message))}},S=async()=>{try{await jP(kt,Ok),console.log("Logged in with Google account"),r("/")}catch(T){console.error("Error logging in with Google:",T),u("An error occurred while logging in with Google. Please try again")}};return f.jsx("div",{className:"logInPage-container",children:f.jsxs("div",{className:"logInPage-card",children:[f.jsx("h1",{children:"Log In"}),f.jsxs("form",{onSubmit:_,children:[f.jsxs("div",{className:"logInPage-form-group",children:[f.jsx("label",{children:"Email:"}),f.jsx("input",{type:"email",value:e,onChange:h,required:!0})]}),f.jsxs("div",{className:"logInPage-form-group",children:[f.jsx("label",{children:"Password:"}),f.jsx("input",{type:"password",value:s,onChange:p,required:!0})]}),f.jsx("button",{type:"submit",className:"logInPage-button",children:"Log In"})]}),f.jsx("button",{onClick:S,className:"logInPage-google-button",children:"Log in with Google"}),a&&f.jsx("p",{className:"logInPage-error-message",children:a}),f.jsx("div",{className:"logInPage-signup-prompt",children:f.jsxs("p",{children:["Don't have an account? ",f.jsx(Ae,{to:"/register",children:"Sign Up"})]})})]})})},fR=()=>{const[r,e]=k.useState(""),[t,s]=k.useState(""),[o,a]=k.useState(""),[u,h]=k.useState(null),p=es(),g=P=>e(P.target.value),_=P=>s(P.target.value),S=P=>a(P.target.value),T=P=>P.includes("auth/weak-password")?"Password should be at least 6 characters":P.includes("auth/email-already-in-use")?"This email is already in use":P,C=async P=>{if(P.preventDefault(),t===o)try{await lP(kt,r,t),console.log("Registered with email and password:",r),p("/")}catch(D){console.error("Error registering:",D),h(T(D.message))}else console.error("Passwords do not match"),h("Passwords do not match")};return f.jsx("div",{className:"registerPage-container",children:f.jsxs("div",{className:"registerPage-card",children:[f.jsx("h1",{children:"Register"}),f.jsxs("form",{onSubmit:C,children:[f.jsxs("div",{className:"registerPage-form-group",children:[f.jsx("label",{children:"Email:"}),f.jsx("input",{type:"email",value:r,onChange:g,required:!0})]}),f.jsxs("div",{className:"registerPage-form-group",children:[f.jsx("label",{children:"Password:"}),f.jsx("input",{type:"password",value:t,onChange:_,required:!0})]}),f.jsxs("div",{className:"registerPage-form-group",children:[f.jsx("label",{children:"Confirm Password:"}),f.jsx("input",{type:"password",value:o,onChange:S,required:!0})]}),f.jsx("button",{type:"submit",className:"registerPage-button",children:"Register"})]}),u&&f.jsx("p",{className:"registerPage-error-message",children:u}),f.jsx("div",{className:"registerPage-login-prompt",children:f.jsxs("p",{children:["Already have an account? ",f.jsx(Ae,{to:"/login",children:"Log In"})]})})]})})},pR=()=>f.jsx("div",{className:"NotFoundPage-container",children:f.jsxs("div",{className:"NotFoundPage-card",children:[f.jsx("h1",{children:"Oops! Page Not Found"}),f.jsx("p",{children:"We couldn't find what you were looking for. But don't worry, you can return to the site using the button below."}),f.jsx(Ae,{to:"/",children:f.jsx("button",{className:"NotFoundPage-button",children:"Return to the site"})})]})}),Qa=({element:r,allowedUids:e,...t})=>{const[s,o]=k.useState(!0),[a,u]=k.useState(null);return k.useEffect(()=>{const h=kt.onAuthStateChanged(p=>{u(p),o(!1)});return()=>h()},[]),s?f.jsx("p",{children:"Loading..."}):a?e&&!e.includes(a.uid)?f.jsx(ll,{to:"/not-found"}):f.jsx(r,{...t}):f.jsx(ll,{to:"/login"})},mR=()=>new URLSearchParams(Zr().search),cv=(r,e)=>{const t=r.toLowerCase().split(" "),s=e.toLowerCase().split(" ");return s.filter(a=>t.includes(a)).length/s.length*100},gR=()=>{const r=mR().get("query")||"",[e,t]=k.useState([]),[s,o]=k.useState([]);k.useEffect(()=>{(async()=>{const p=(await St(ot(De,"products"))).docs.map(g=>({id:g.id,...g.data()}));o(p)})()},[]),k.useEffect(()=>{const u=s.filter(h=>h.title.toLowerCase().includes(r.toLowerCase())).map(h=>({...h,matchPercentage:cv(h.title,r)})).sort((h,p)=>p.matchPercentage-h.matchPercentage);t(u)},[r,s]);const a=u=>{let h=s.filter(p=>p.title.toLowerCase().includes(r.toLowerCase())).map(p=>({...p,matchPercentage:cv(p.title,r)})).sort((p,g)=>g.matchPercentage-p.matchPercentage);u.inStock&&(h=h.filter(p=>p.inStock)),u.priceFrom&&(h=h.filter(p=>p.price>=parseFloat(u.priceFrom))),u.priceTo&&(h=h.filter(p=>p.price<=parseFloat(u.priceTo))),u.selectedBrands.length>0&&(h=h.filter(p=>u.selectedBrands.includes(p.brand))),u.selectedTypes.length>0&&(h=h.filter(p=>u.selectedTypes.includes(p.type))),u.selectedSizes.length>0&&(h=h.filter(p=>u.selectedSizes.includes(p.size))),u.selectedColors.length>0&&(h=h.filter(p=>u.selectedColors.includes(p.color))),u.selectedUses.length>0&&(h=h.filter(p=>u.selectedUses.includes(p.use))),t(h)};return f.jsxs("div",{className:"product-page",children:[f.jsx(na,{products:s,onFilterChange:a}),f.jsx("div",{className:"product-list",children:f.jsx(ra,{title:"Search Results",products:e,category:"search"})})]})};function yR(){return f.jsx(Gk,{children:f.jsxs(_S,{children:[f.jsx(zk,{}),f.jsx($k,{}),f.jsxs(QE,{children:[f.jsx(qe,{path:"/",element:f.jsx(av,{})}),f.jsx(qe,{path:"/home",element:f.jsx(av,{})}),f.jsx(qe,{path:"/basket",element:f.jsx(rA,{})}),f.jsx(qe,{path:"/account",element:f.jsx(iA,{})}),f.jsx(qe,{path:"/internal-ssds",element:f.jsx(EA,{})}),f.jsx(qe,{path:"/external-ssds",element:f.jsx(wA,{})}),f.jsx(qe,{path:"/ssd-accessories",element:f.jsx(SA,{})}),f.jsx(qe,{path:"/ssd-software",element:f.jsx(TA,{})}),f.jsx(qe,{path:"/special-deals",element:f.jsx(xA,{})}),f.jsx(qe,{path:"/customer-support",element:f.jsx(kA,{})}),f.jsx(qe,{path:"/info",element:f.jsx(AA,{})}),f.jsx(qe,{path:"/contact",element:f.jsx(RA,{})}),f.jsx(qe,{path:"/internal-ssds/:id",element:f.jsx(Ka,{})}),f.jsx(qe,{path:"/external-ssds/:id",element:f.jsx(Ka,{})}),f.jsx(qe,{path:"/ssd-accessories/:id",element:f.jsx(Ka,{})}),f.jsx(qe,{path:"/ssd-software/:id",element:f.jsx(Ka,{})}),f.jsx(qe,{path:"/special-deals/:id",element:f.jsx(Ka,{})}),f.jsx(qe,{path:"/order-details",element:f.jsx(lA,{})}),f.jsx(qe,{path:"/security-options",element:f.jsx(mA,{})}),f.jsx(qe,{path:"/orders",element:f.jsx(yA,{})}),f.jsx(qe,{path:"/order/:orderId",element:f.jsx(fA,{})}),f.jsx(qe,{path:"/database",element:f.jsx(Qa,{element:NA,adminIdList:ki})}),f.jsx(qe,{path:"/database-products",element:f.jsx(Qa,{element:DA,adminIdList:ki})}),f.jsx(qe,{path:"/database-orders",element:f.jsx(Qa,{element:jA,adminIdList:ki})}),f.jsx(qe,{path:"/database-product-editor",element:f.jsx(Qa,{element:oR,adminIdList:ki})}),f.jsx(qe,{path:"/database-product-preview",element:f.jsx(Qa,{element:dR,adminIdList:ki})}),f.jsx(qe,{path:"/login",element:f.jsx(hR,{})}),f.jsx(qe,{path:"/register",element:f.jsx(fR,{})}),f.jsx(qe,{path:"/search",element:f.jsx(gR,{})}),f.jsx(qe,{path:"/not-found",element:f.jsx(pR,{})}),f.jsx(qe,{path:"*",element:f.jsx(ll,{to:"/not-found"})})]})]})})}iE.createRoot(document.getElementById("root")).render(f.jsx(Jw.StrictMode,{children:f.jsx(yR,{})}));
